'Example home subroutine that homes to a limit switch and backs off to the index pulse
'Setting Up port D as an Input Port:
UCP
UDI
'-----------------------
GOSUB0	'go to home subroutine
'------------------------------------------------------------------
END	'END OF PROGRAM
'---------------------------------------------------------
C0   'HOME ROUTINE
r=-1
'Make r a -1 to reverse home direction

v=500000	'Home speed

PRINT("Homing motor",#13)
 MV
 V=-10000*r	'Home speed corrected for direction
 A=1000	'Home ACCEL
 G	'start a velocity mode move
 i=I	'Assigning the index marker to i
'The following line looks at Port D as a TTL level Input.
 WHILE UDI==1 
  i=I	'Assigning the index marker to i
 LOOP
'When Port D gets pulled to ground it drops out of the loop.
 PRINT("Hit Limit Switch on Port D",#13)
 X
 P=i
 PRINT("Moving to Index Pulse",#13)
 G
 TWAIT
 WAIT=1000	
 O=0		'Setting present position to HOME
 PRINT("Motor is at Home",#13)
RETURN




