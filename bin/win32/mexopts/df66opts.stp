# $Revision: 1.1 $
sub df66opts 
{
    my $input = shift;
    my $default_location = "C:\\Program Files\\Microsoft Visual Studio";

    my $language_handled_fcn = sub {
        my $lang = shift;
        
        return $lang eq "FORTRAN";
    };

    my $locate_fcn = sub {
        my @df_roots = ();
        
        my $registry_lookup_fcn = $input->{"registry_lookup"};
        my $search_path_fcn = $input->{"search_path"};

        my $df_root = &$search_path_fcn("fl32.exe");
        if ($df_root =~ /\\df98\\bin$/i)
        {
            $version=`\"$df_root\\fl32.exe\"`;
            if ($version =~ /Version 6.6/) 
            {
                $df_root =~ s/\\df98\\bin$//i;
                push(@df_roots, $df_root);
            }
        }
        
        $df_root = &$registry_lookup_fcn("SOFTWARE\\DigitalEquipmentCorporation\\VisualFortran\\6.6",
                                         "DevStudioPath");
        if (-e "$df_root")
        {
            $df_root =~ s/\\Common$//i;
            push(@df_roots, $df_root);
        }

        if (-e "$default_location\\DF98\\BIN")
        {
            $version=`\"$default_location\\DF98\\BIN\\fl32.exe\"`;
            if ($version =~ /Version 6.6/) 
            {
                push(@df_roots, $default_location);
            }
        }

        return @df_roots;
    };

    my $root_val = sub {
        return shift;
    };

    return {
        "vendor_name"  => "Compaq Visual Fortran",
        "version"      => "6.6",
        "group_id"     => "DVF",
        "serial"       => 3.0,
        "root_var"     => "DF_ROOT",
        "optfile_name" => "df66opts.bat",
        "default_location" => $default_location,
        "language_handled" => $language_handled_fcn,
        "root_val"     => $root_val,
        "locate"       => $locate_fcn,
        "post_setup_hook"  => $post_setup_hook
        };
}
1;
