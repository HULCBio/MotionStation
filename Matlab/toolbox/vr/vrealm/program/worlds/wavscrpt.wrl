#VRML V2.0 utf8

#Created with V-Realm Builder v2.0
#Integrated Data Systems Inc.
#www.ids-net.com


DirectionalLight {
	color	1 0.859452 0.716481
	direction	-0.273588 -0.939017 0.208318
}
NavigationInfo {
	headlight	FALSE
	speed	0.7
}
Background {
	groundAngle	[ 0.9, 1.5, 1.57 ]
	groundColor	[ 0.165992 0.435355 0.8,
			  0.24 0.34 0.7,
			  0.25 0.32 0.71,
			  0.147318 0.386378 0.71 ]
	skyAngle	[ 0.1, 1.2, 1.57 ]
	skyColor	[ 0.466409 0.226476 0.8,
			  0.34193 0.261775 0.7,
			  0.7 0.154144 0.582833,
			  0.8 0.428559 0.120926 ]
}
DEF ENTER Viewpoint {
	position	0 1.6 120
	description	"enter"
}
DEF ISLAND_DUMMY Transform {
	translation	7 0 0
	scale	9 9 9
	children Shape {
		appearance	Appearance {
			material	Material {
			}

		}

		geometry	Sphere {
			radius	2
		}

	}
}
DEF SEA Transform {
	scale	15 1 15
	children [ 
	    DEF GRID Transform {
		    translation	-5.5 0 -5.5
		    children [ 
			Shape {
				appearance	Appearance {
					material	DEF Water Material {
						ambientIntensity	0.5
						diffuseColor	0.177321 0.396772 1
						specularColor	0.93 0.93 0.93
					}

				}

				geometry	DEF GRID ElevationGrid {
					color	Color {
						color	[ 0.184014 0.164669 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.180043 0.29646 0.85,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.180043 0.29646 0.85,
								  0.184014 0.164669 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.180043 0.29646 0.85,
								  0.248048 0.300179 1,
								  0.248048 0.300179 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.180043 0.29646 0.85,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.148271 0.244144 0.7,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.248048 0.300179 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.184014 0.164669 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.148271 0.244144 0.7,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.148271 0.244144 0.7,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.184014 0.164669 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.377381 0.638627 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.290975 0.61954 1,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.148271 0.244144 0.7,
								  0.191099 0.287961 1,
								  0.377381 0.638627 1,
								  0.377381 0.638627 1,
								  0.191099 0.287961 1,
								  0.228204 0.276165 0.92,
								  0.191099 0.287961 1,
								  0.191099 0.287961 1,
								  0.169453 0.279022 0.8 ]
					}

					normal	NULL
					texCoord	NULL
					ccw	TRUE
					colorPerVertex	TRUE
					creaseAngle	2.04
					normalPerVertex	TRUE
					solid	TRUE
					xDimension	12
					xSpacing	1
					zDimension	12
					zSpacing	1
					height	[ 0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0,
							  0, 0, 0, 0 ]
				}

			}

			DEF TIMER TimeSensor {
				cycleInterval	6
				loop	TRUE
				startTime	1
			}
		    ]
	    }

	    DEF WAVYSCRIPT Script {
		    url	"vrmlscript: 
                function initialize() {

                    xCenter = (12 * 1)/2; // xDimension * xSize
                    zCenter = (12 * 1)/2; // xDimension * xSize

                    for (i = 0; i < 12; i++)
                    {
                        for (j = 0; j < 12; j++)
                        {
                             dist[i*12+j] = Math.sqrt((5.5 - i)*(5.5 - i) + (5.5 - j)*(5.5 - j));
                        }
                    }
                }

                function fraction (value) {

                    for (i = 0; i < 12; i++)
                    {
                        for (j = 0; j < 12; j++)
                        {     // 5.5 * 1.414 / 2 = half max height = 3.535
                             height[i*12+j] = Math.sin((6.28*value)-dist[i*12+j]);
                        }
                    }
                }
"
		    directOutput	FALSE
		    mustEvaluate	FALSE
		    eventIn  SFFloat fraction
		    eventOut  MFFloat height
		    field  MFFloat 		    dist	[ 7.77817, 7.10634, 6.5192, 6.04152,
				      5.70088, 5.52268, 5.52268, 5.70088,
				      6.04152, 6.5192, 7.10634, 7.77817,
				      7.10634, 6.36396, 5.70088, 5.14782,
				      4.74342, 4.52769, 4.52769, 4.74342,
				      5.14782, 5.70088, 6.36396, 7.10634,
				      6.5192, 5.70088, 4.94975, 4.30116,
				      3.80789, 3.53553, 3.53553, 3.80789,
				      4.30116, 4.94975, 5.70088, 6.5192,
				      6.04152, 5.14782, 4.30116, 3.53553,
				      2.91548, 2.54951, 2.54951, 2.91548,
				      3.53553, 4.30116, 5.14782, 6.04152,
				      5.70088, 4.74342, 3.80789, 2.91548,
				      2.12132, 1.58114, 1.58114, 2.12132,
				      2.91548, 3.80789, 4.74342, 5.70088,
				      5.52268, 4.52769, 3.53553, 2.54951,
				      1.58114, 0.707107, 0.707107, 1.58114,
				      2.54951, 3.53553, 4.52769, 5.52268,
				      5.52268, 4.52769, 3.53553, 2.54951,
				      1.58114, 0.707107, 0.707107, 1.58114,
				      2.54951, 3.53553, 4.52769, 5.52268,
				      5.70088, 4.74342, 3.80789, 2.91548,
				      2.12132, 1.58114, 1.58114, 2.12132,
				      2.91548, 3.80789, 4.74342, 5.70088,
				      6.04152, 5.14782, 4.30116, 3.53553,
				      2.91548, 2.54951, 2.54951, 2.91548,
				      3.53553, 4.30116, 5.14782, 6.04152,
				      6.5192, 5.70088, 4.94975, 4.30116,
				      3.80789, 3.53553, 3.53553, 3.80789,
				      4.30116, 4.94975, 5.70088, 6.5192,
				      7.10634, 6.36396, 5.70088, 5.14782,
				      4.74342, 4.52769, 4.52769, 4.74342,
				      5.14782, 5.70088, 6.36396, 7.10634,
				      7.77817, 7.10634, 6.5192, 6.04152,
				      5.70088, 5.52268, 5.52268, 5.70088,
				      6.04152, 6.5192, 7.10634, 7.77817 ]
	    }
	]
}
ROUTE TIMER.fraction_changed TO WAVYSCRIPT.fraction
ROUTE WAVYSCRIPT.height TO GRID.set_height
