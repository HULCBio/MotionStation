Model {
  Name			  "servo_demo"
  Version		  6.0
  GraphicalInterface {
    NumRootInports	    0
    NumRootOutports	    0
    ParameterArgumentNames  ""
    ComputedModelVersion    "1.44"
    NumTestPointedSignals   0
  }
  PreLoadFcn		  "load servo_demo"
  SaveDefaultBlockParams  on
  SampleTimeColors	  on
  LibraryLinkDisplay	  "none"
  WideLines		  on
  ShowLineDimensions	  off
  ShowPortDataTypes	  off
  ShowLoopsOnError	  on
  IgnoreBidirectionalLines off
  ShowStorageClass	  off
  ShowTestPointIcons	  on
  ShowViewerIcons	  on
  SortedOrder		  off
  ExecutionContextIcon	  off
  ShowLinearizationAnnotations on
  RecordCoverage	  off
  CovPath		  "/"
  CovSaveName		  "covdata"
  CovMetricSettings	  "dcmtr"
  CovNameIncrementing	  off
  CovHtmlReporting	  on
  covSaveCumulativeToWorkspaceVar on
  CovSaveSingleToWorkspaceVar on
  CovCumulativeVarName	  "covCumulativeData"
  CovCumulativeReport	  off
  CovReportOnPause	  on
  ScopeRefreshTime	  0.035000
  OverrideScopeRefreshTime on
  DisableAllScopes	  off
  DataTypeOverride	  "UseLocalSettings"
  MinMaxOverflowLogging	  "UseLocalSettings"
  MinMaxOverflowArchiveMode "Overwrite"
  BlockNameDataTip	  off
  BlockParametersDataTip  on
  BlockDescriptionStringDataTip	off
  ToolBar		  on
  StatusBar		  on
  BrowserShowLibraryLinks off
  BrowserLookUnderMasks	  off
  Created		  "Tue Jun 02 16:12:08 1998"
  Creator		  "The Mathworks Inc."
  UpdateHistory		  "UpdateHistoryNever"
  ModifiedByFormat	  "%<Auto>"
  LastModifiedBy	  "rlandy"
  ModifiedDateFormat	  "%<Auto>"
  LastModifiedDate	  "Tue Feb 17 14:42:57 2004"
  ModelVersionFormat	  "1.%<AutoIncrement:44>"
  ConfigurationManager	  "none"
  SimParamPage		  "Solver"
  LinearizationMsg	  "none"
  Profile		  off
  ParamWorkspaceSource	  "MATLABWorkspace"
  AccelSystemTargetFile	  "accel.tlc"
  AccelTemplateMakefile	  "accel_default_tmf"
  AccelMakeCommand	  "make_rtw"
  TryForcingSFcnDF	  off
  ExtModeBatchMode	  off
  ExtModeEnableFloating	  on
  ExtModeTrigType	  "manual"
  ExtModeTrigMode	  "oneshot"
  ExtModeTrigPort	  "1"
  ExtModeTrigElement	  "any"
  ExtModeTrigDuration	  1000
  ExtModeTrigDurationFloating "auto"
  ExtModeTrigHoldOff	  0
  ExtModeTrigDelay	  0
  ExtModeTrigDirection	  "rising"
  ExtModeTrigLevel	  0
  ExtModeArchiveMode	  "off"
  ExtModeAutoIncOneShot	  off
  ExtModeIncDirWhenArm	  off
  ExtModeAddSuffixToVar	  off
  ExtModeWriteAllDataToWs off
  ExtModeArmWhenConnect	  off
  ExtModeSkipDownloadWhenConnect off
  ExtModeLogAll		  on
  ExtModeAutoUpdateStatusClock off
  BufferReuse		  on
  ProdHWDeviceType	  "32-bit Generic"
  Array {
    Type		    "Handle"
    Dimension		    1
    Simulink.ConfigSet {
      $ObjectID		      1
      Version		      "1.0.3"
      Array {
	Type			"Handle"
	Dimension		8
	Simulink.SolverCC {
	  $ObjectID		  2
	  Version		  "1.0.3"
	  StartTime		  "0.0"
	  StopTime		  "1"
	  AbsTol		  "1e-6"
	  FixedStep		  "0.2e-4"
	  InitialStep		  "auto"
	  MaxNumMinSteps	  "-1"
	  MaxOrder		  5
	  ExtrapolationOrder	  4
	  NumberNewtonIterations  1
	  MaxStep		  "0.2e-3"
	  MinStep		  "auto"
	  RelTol		  "1e-3"
	  SolverMode		  "SingleTasking"
	  Solver		  "ode45"
	  ZeroCrossControl	  "UseLocalSettings"
	  PositivePriorityOrder	  off
	  AutoInsertRateTranBlk	  off
	  SampleTimeConstraint	  "Unconstrained"
	  RateTranMode		  "Deterministic"
	}
	Simulink.DataIOCC {
	  $ObjectID		  3
	  Version		  "1.0.3"
	  Decimation		  "1"
	  ExternalInput		  "[t, u]"
	  FinalStateName	  "xFinal"
	  InitialState		  "xInitial"
	  LimitDataPoints	  off
	  MaxDataPoints		  "1000"
	  LoadExternalInput	  off
	  LoadInitialState	  off
	  SaveFinalState	  off
	  SaveFormat		  "Array"
	  SaveOutput		  off
	  SaveState		  off
	  SaveTime		  off
	  StateSaveName		  "xout"
	  TimeSaveName		  "tout"
	  OutputSaveName	  "yout"
	  SignalLoggingName	  "logsOut"
	  OutputOption		  "RefineOutputTimes"
	  OutputTimes		  "[]"
	  Refine		  "1"
	}
	Simulink.OptimizationCC {
	  $ObjectID		  4
	  Array {
	    Type		    "Cell"
	    Dimension		    4
	    Cell		    "ZeroExternalMemoryAtStartup"
	    Cell		    "ZeroInternalMemoryAtStartup"
	    Cell		    "InitFltsAndDblsToZero"
	    Cell		    "OptimizeModelRefInitCode"
	    PropName		    "DisabledProps"
	  }
	  Version		  "1.0.3"
	  BlockReduction	  on
	  BooleanDataType	  off
	  ConditionallyExecuteInputs on
	  ConditionalExecOptimization "on_for_testing"
	  InlineParams		  off
	  InlineInvariantSignals  on
	  OptimizeBlockIOStorage  on
	  BufferReuse		  on
	  EnforceIntegerDowncast  on
	  ExpressionFolding	  on
	  FoldNonRolledExpr	  on
	  LocalBlockOutputs	  on
	  ParameterPooling	  on
	  RollThreshold		  5
	  SystemCodeInlineAuto	  off
	  StateBitsets		  off
	  DataBitsets		  off
	  UseTempVars		  off
	  ZeroExternalMemoryAtStartup on
	  ZeroInternalMemoryAtStartup on
	  InitFltsAndDblsToZero	  on
	  NoFixptDivByZeroProtection off
	  OptimizeModelRefInitCode off
	  LifeSpan		  "inf"
	}
	Simulink.DebuggingCC {
	  $ObjectID		  5
	  Version		  "1.0.3"
	  ConsistencyChecking	  "none"
	  ArrayBoundsChecking	  "none"
	  AlgebraicLoopMsg	  "warning"
	  ArtificialAlgebraicLoopMsg "warning"
	  CheckSSInitialOutputMsg on
	  CheckExecutionContextPreStartOutputMsg on
	  CheckExecutionContextRuntimeOutputMsg	on
	  SignalResolutionControl "TryResolveAllWithWarning"
	  BlockPriorityViolationMsg "warning"
	  MinStepSizeMsg	  "warning"
	  SolverPrmCheckMsg	  "none"
	  InheritedTsInSrcMsg	  "warning"
	  DiscreteInheritContinuousMsg "warning"
	  MultiTaskRateTransMsg	  "error"
	  SingleTaskRateTransMsg  "none"
	  CheckMatrixSingularityMsg "none"
	  IntegerOverflowMsg	  "none"
	  Int32ToFloatConvMsg	  "warning"
	  ParameterDowncastMsg	  "error"
	  ParameterOverflowMsg	  "error"
	  ParameterPrecisionLossMsg "warning"
	  UnderSpecifiedDataTypeMsg "none"
	  UnnecessaryDatatypeConvMsg "none"
	  VectorMatrixConversionMsg "none"
	  InvalidFcnCallConnMsg	  "error"
	  SignalLabelMismatchMsg  "none"
	  UnconnectedInputMsg	  "warning"
	  UnconnectedOutputMsg	  "warning"
	  UnconnectedLineMsg	  "warning"
	  SFcnCompatibilityMsg	  "none"
	  UniqueDataStoreMsg	  "none"
	  RootOutportRequireBusObject "warning"
	  AssertControl		  "UseLocalSettings"
	  EnableOverflowDetection off
	  ModelReferenceIOMsg	  "none"
	  ModelReferenceVersionMismatchMessage "none"
	  ModelReferenceIOMismatchMessage "none"
	  ModelReferenceCSMismatchMessage "none"
	  UnknownTsInhSupMsg	  "warning"
	  ModelReferenceDataLoggingMessage "warning"
	}
	Simulink.HardwareCC {
	  $ObjectID		  6
	  Version		  "1.0.3"
	  ProdBitPerChar	  8
	  ProdBitPerShort	  16
	  ProdBitPerInt		  32
	  ProdBitPerLong	  32
	  ProdIntDivRoundTo	  "Undefined"
	  ProdEndianess		  "Unspecified"
	  ProdWordSize		  32
	  ProdShiftRightIntArith  on
	  ProdHWDeviceType	  "32-bit Generic"
	  TargetBitPerChar	  8
	  TargetBitPerShort	  16
	  TargetBitPerInt	  32
	  TargetBitPerLong	  32
	  TargetShiftRightIntArith on
	  TargetIntDivRoundTo	  "Undefined"
	  TargetEndianess	  "Unspecified"
	  TargetWordSize	  32
	  TargetTypeEmulationWarnSuppressLevel 0
	  TargetPreprocMaxBitsSint 32
	  TargetPreprocMaxBitsUint 32
	  TargetHWDeviceType	  "Specified"
	  TargetUnknown		  on
	  ProdEqTarget		  on
	}
	Simulink.ModelReferenceCC {
	  $ObjectID		  7
	  Version		  "1.0.3"
	  UpdateModelReferenceTargets "IfOutOfDate"
	  CheckModelReferenceTargetMessage "error"
	  ModelReferenceNumInstancesAllowed "Multi"
	  ModelReferencePassRootInputsByReference on
	  ModelReferenceMinAlgLoopOccurrences off
	}
	Simulink.RTWCC {
	  $BackupClass		  "Simulink.RTWCC"
	  $ObjectID		  8
	  Array {
	    Type		    "Cell"
	    Dimension		    1
	    Cell		    "IncludeHyperlinkInReport"
	    PropName		    "DisabledProps"
	  }
	  Version		  "1.0.3"
	  SystemTargetFile	  "grt.tlc"
	  GenCodeOnly		  off
	  MakeCommand		  "make_rtw"
	  TemplateMakefile	  "grt_default_tmf"
	  GenerateReport	  off
	  SaveLog		  off
	  RTWVerbose		  on
	  RetainRTWFile		  off
	  ProfileTLC		  off
	  TLCDebug		  off
	  TLCCoverage		  off
	  TLCAssert		  off
	  ProcessScriptMode	  "Default"
	  ConfigurationMode	  "Optimized"
	  ConfigAtBuild		  off
	  IncludeHyperlinkInReport off
	  LaunchReport		  off
	  Array {
	    Type		    "Handle"
	    Dimension		    2
	    Simulink.CodeAppCC {
	      $ObjectID		      9
	      Array {
		Type			"Cell"
		Dimension		8
		Cell			"IgnoreCustomStorageClasses"
		Cell			"InsertBlockDesc"
		Cell			"SFDataObjDesc"
		Cell			"SimulinkDataObjDesc"
		Cell			"DefineNamingRule"
		Cell			"SignalNamingRule"
		Cell			"ParamNamingRule"
		Cell			"InlinedPrmAccess"
		PropName		"DisabledProps"
	      }
	      Version		      "1.0.3"
	      ForceParamTrailComments off
	      GenerateComments	      on
	      IgnoreCustomStorageClasses on
	      IncHierarchyInIds	      off
	      MaxIdLength	      31
	      PreserveName	      off
	      PreserveNameWithParent  off
	      ShowEliminatedStatement off
	      IncAutoGenComments      off
	      SimulinkDataObjDesc     off
	      SFDataObjDesc	      off
	      IncDataTypeInIds	      off
	      PrefixModelToSubsysFcnNames on
	      CustomSymbolStr	      "$R$N$M"
	      MangleLength	      1
	      DefineNamingRule	      "None"
	      ParamNamingRule	      "None"
	      SignalNamingRule	      "None"
	      InsertBlockDesc	      off
	      SimulinkBlockComments   on
	      EnableCustomComments    off
	      InlinedPrmAccess	      "Literals"
	      ReqsInCode	      off
	    }
	    Simulink.GRTTargetCC {
	      $BackupClass	      "Simulink.TargetCC"
	      $ObjectID		      10
	      Array {
		Type			"Cell"
		Dimension		15
		Cell			"IncludeMdlTerminateFcn"
		Cell			"CombineOutputUpdateFcns"
		Cell			"SuppressErrorStatus"
		Cell			"ERTCustomFileBanners"
		Cell			"GenerateSampleERTMain"
		Cell			"MultiInstanceERTCode"
		Cell			"PurelyIntegerCode"
		Cell			"SupportNonFinite"
		Cell			"SupportComplex"
		Cell			"SupportAbsoluteTime"
		Cell			"SupportContinuousTime"
		Cell			"SupportNonInlinedSFcns"
		Cell			"LifeSpan"
		Cell			"NoFixptDivByZeroProtection"
		Cell			"CustomSymbolStr"
		PropName		"DisabledProps"
	      }
	      Version		      "1.0.3"
	      TargetFcnLib	      "ansi_tfl_tmw.mat"
	      GenFloatMathFcnCalls    "ANSI_C"
	      UtilityFuncGeneration   "Auto"
	      GenerateFullHeader      on
	      GenerateSampleERTMain   off
	      IsPILTarget	      off
	      ModelReferenceCompliant on
	      IncludeMdlTerminateFcn  on
	      CombineOutputUpdateFcns off
	      SuppressErrorStatus     off
	      IncludeFileDelimiter    "Auto"
	      ERTCustomFileBanners    off
	      SupportAbsoluteTime     on
	      LogVarNameModifier      "rt_"
	      MatFileLogging	      on
	      MultiInstanceERTCode    off
	      SupportNonFinite	      on
	      SupportComplex	      on
	      PurelyIntegerCode	      off
	      SupportContinuousTime   on
	      SupportNonInlinedSFcns  on
	      ExtMode		      off
	      ExtModeStaticAlloc      off
	      ExtModeTesting	      off
	      ExtModeStaticAllocSize  1000000
	      ExtModeTransport	      0
	      ExtModeMexFile	      "ext_comm"
	      RTWCAPISignals	      off
	      RTWCAPIParams	      off
	      RTWCAPIStates	      off
	      GenerateASAP2	      off
	    }
	    PropName		    "Components"
	  }
	}
	Simulink.SFSimCC {
	  $ObjectID		  11
	  Version		  "1.0.3"
	  SFSimApplyToAllLibs	  on
	  SFSimEnableDebug	  on
	  SFSimOverflowDetection  on
	  SFSimEcho		  on
	  SFSimBuildMode	  "Incremental"
	}
	PropName		"Components"
      }
      Name		      "Configuration"
      SimulationMode	      "normal"
      CurrentDlgPage	      "Solver"
    }
    PropName		    "ConfigurationSets"
  }
  Simulink.ConfigSet {
    $PropName		    "ActiveConfigurationSet"
    $ObjectID		    1
  }
  BlockDefaults {
    Orientation		    "right"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    NamePlacement	    "normal"
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
    ShowName		    on
  }
  BlockParameterDefaults {
    Block {
      BlockType		      Abs
      SaturateOnIntegerOverflow	on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Constant
      Value		      "1"
      VectorParams1D	      on
      OutDataTypeMode	      "Inherit from 'Constant value'"
      OutDataType	      "sfix(16)"
      ConRadixGroup	      "Use specified scaling"
      OutScaling	      "2^0"
      SampleTime	      "inf"
    }
    Block {
      BlockType		      Demux
      Outputs		      "4"
      DisplayOption	      "none"
      BusSelectionMode	      off
    }
    Block {
      BlockType		      ElementaryMath
      Operator		      "sin"
    }
    Block {
      BlockType		      Gain
      Gain		      "1"
      Multiplication	      "Element-wise(K.*u)"
      ParameterDataTypeMode   "Same as input"
      ParameterDataType	      "sfix(16)"
      ParameterScalingMode    "Best Precision: Matrix-wise"
      ParameterScaling	      "2^0"
      OutDataTypeMode	      "Same as input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      SignalConversion
      OverrideOpt	      off
    }
    Block {
      BlockType		      HitCross
      HitCrossingOffset	      "0"
      HitCrossingDirection    "either"
      ShowOutputPort	      on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Inport
      Port		      "1"
      BusObject		      "BusObject"
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      SampleTime	      "-1"
      DataType		      "auto"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      SignalType	      "auto"
      SamplingMode	      "auto"
      Interpolate	      on
    }
    Block {
      BlockType		      Integrator
      ExternalReset	      "none"
      InitialConditionSource  "internal"
      InitialCondition	      "0"
      LimitOutput	      off
      UpperSaturationLimit    "inf"
      LowerSaturationLimit    "-inf"
      ShowSaturationPort      off
      ShowStatePort	      off
      AbsoluteTolerance	      "auto"
      ZeroCross		      on
    }
    Block {
      BlockType		      Logic
      Operator		      "AND"
      Inputs		      "2"
      AllPortsSameDT	      on
      OutDataTypeMode	      "Logical (see Advanced Sim. Parameters)"
      LogicDataType	      "uint(8)"
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Lookup2D
      RowIndex		      "[0 1]"
      ColumnIndex	      "[0 1]"
      OutputValues	      "[0 0;0 0]"
      LookUpMeth	      "Interpolation-Extrapolation"
      InputSameDT	      on
      OutDataTypeMode	      "Same as first input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
      LUTDesignTableMode      "Redesign Table"
      LUTDesignDataSource     "Block Dialog"
      LUTDesignFunctionName   "sqrt(x)"
      LUTDesignUseExistingBP  on
      LUTDesignRelError	      "0.01"
      LUTDesignAbsError	      "1e-6"
    }
    Block {
      BlockType		      Memory
      X0		      "0"
      InheritSampleTime	      off
      LinearizeMemory	      off
      StateMustResolveToSignalObject off
      RTWStateStorageClass    "Auto"
    }
    Block {
      BlockType		      Mux
      Inputs		      "4"
      DisplayOption	      "none"
      BusObject		      "BusObject"
      NonVirtualBus	      off
    }
    Block {
      BlockType		      Outport
      Port		      "1"
      BusObject		      "BusObject"
      BusOutputAsStruct	      off
      PortDimensions	      "-1"
      SampleTime	      "-1"
      DataType		      "auto"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      SignalType	      "auto"
      SamplingMode	      "auto"
      OutputWhenDisabled      "held"
      InitialOutput	      "[]"
    }
    Block {
      BlockType		      Product
      Inputs		      "2"
      Multiplication	      "Element-wise(.*)"
      InputSameDT	      on
      OutDataTypeMode	      "Same as first input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Zero"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      RelationalOperator
      Operator		      ">="
      InputSameDT	      on
      LogicOutDataTypeMode    "Logical (see Advanced Sim. Parameters)"
      LogicDataType	      "uint(8)"
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Saturate
      UpperLimit	      "0.5"
      LowerLimit	      "-0.5"
      LinearizeAsGain	      on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Scope
      Floating		      off
      ModelBased	      off
      TickLabels	      "OneTimeTick"
      ZoomMode		      "on"
      Grid		      "on"
      TimeRange		      "auto"
      YMin		      "-5"
      YMax		      "5"
      SaveToWorkspace	      off
      SaveName		      "ScopeData"
      LimitDataPoints	      on
      MaxDataPoints	      "5000"
      Decimation	      "1"
      SampleInput	      off
      SampleTime	      "0"
    }
    Block {
      BlockType		      "S-Function"
      FunctionName	      "system"
      PortCounts	      "[]"
      SFunctionModules	      "''"
    }
    Block {
      BlockType		      Signum
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Step
      Time		      "1"
      Before		      "0"
      After		      "1"
      SampleTime	      "-1"
      VectorParams1D	      on
      ZeroCross		      on
    }
    Block {
      BlockType		      SubSystem
      ShowPortLabels	      on
      Permissions	      "ReadWrite"
      PermitHierarchicalResolution "All"
      SystemSampleTime	      "-1"
      RTWFcnNameOpts	      "Auto"
      RTWFileNameOpts	      "Auto"
      SimViewingDevice	      off
      DataTypeOverride	      "UseLocalSettings"
      MinMaxOverflowLogging   "UseLocalSettings"
    }
    Block {
      BlockType		      Sum
      IconShape		      "rectangular"
      Inputs		      "++"
      InputSameDT	      on
      OutDataTypeMode	      "Same as first input"
      OutDataType	      "sfix(16)"
      OutScaling	      "2^0"
      LockScale		      off
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Switch
      Criteria		      "u2 >= Threshold"
      Threshold		      "0"
      InputSameDT	      on
      OutDataTypeMode	      "Inherit via internal rule"
      RndMeth		      "Floor"
      SaturateOnIntegerOverflow	on
      ZeroCross		      on
      SampleTime	      "-1"
    }
    Block {
      BlockType		      Terminator
    }
    Block {
      BlockType		      UnitDelay
      X0		      "0"
      SampleTime	      "1"
      StateMustResolveToSignalObject off
      RTWStateStorageClass    "Auto"
    }
    Block {
      BlockType		      ZeroOrderHold
      SampleTime	      "1"
    }
  }
  AnnotationDefaults {
    HorizontalAlignment	    "center"
    VerticalAlignment	    "middle"
    ForegroundColor	    "black"
    BackgroundColor	    "white"
    DropShadow		    off
    FontName		    "Helvetica"
    FontSize		    10
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  LineDefaults {
    FontName		    "Helvetica"
    FontSize		    9
    FontWeight		    "normal"
    FontAngle		    "normal"
  }
  System {
    Name		    "servo_demo"
    Location		    [16, 74, 865, 464]
    Open		    on
    ModelBrowserVisibility  off
    ModelBrowserWidth	    200
    ScreenColor		    "white"
    PaperOrientation	    "landscape"
    PaperPositionMode	    "auto"
    PaperType		    "usletter"
    PaperUnits		    "inches"
    ZoomFactor		    "100"
    ReportName		    "simulink-default.rpt"
    Block {
      BlockType		      SubSystem
      Name		      "Controller"
      Ports		      [2, 1]
      Position		      [110, 79, 185, 161]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
      System {
	Name			"Controller"
	Location		[57, 474, 889, 745]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "set point"
	  Position		  [25, 28, 55, 42]
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "feedback"
	  Position		  [50, 105, 80, 120]
	  Orientation		  "up"
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant5"
	  Position		  [295, 115, 315, 135]
	  Orientation		  "up"
	  ShowName		  off
	  Value			  "0"
	}
	Block {
	  BlockType		  Saturate
	  Name			  "Saturation"
	  Position		  [665, 60, 695, 90]
	  UpperLimit		  "dcmax"
	  LowerLimit		  "dcmin"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [620, 15, 640, 135]
	  ShowName		  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum1"
	  Ports			  [2, 1]
	  Position		  [95, 27, 125, 58]
	  ShowName		  off
	  Inputs		  "+-"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum2"
	  Ports			  [2, 1]
	  Position		  [490, 87, 520, 118]
	  ShowName		  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [340, 80, 370, 110]
	  ShowName		  off
	  Threshold		  "0.5"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    3
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  UnitDelay
	  Name			  "Unit Delay"
	  Position		  [545, 90, 575, 120]
	  ShowName		  off
	  X0			  "dcnull"
	  SampleTime		  "0.02"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "integral\ngain"
	  Position		  [405, 76, 455, 114]
	  BackgroundColor	  "green"
	  Gain			  "Ki"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "loop\ngain"
	  Position		  [220, 25, 255, 65]
	  BackgroundColor	  "green"
	  Gain			  "Ka"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "prevent\nwindup"
	  Ports			  [2, 1]
	  Position		  [725, 138, 765, 187]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextAcrossSSBoundary on
	  RTWSystemCode		  "Auto"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  System {
	    Name		    "prevent\nwindup"
	    Location		    [368, 447, 868, 776]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "dc"
	      Position		      [25, 30, 55, 50]
	      NamePlacement	      "alternate"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "e1"
	      Position		      [25, 90, 55, 110]
	      NamePlacement	      "alternate"
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [160, 44, 195, 66]
	      ShowName		      off
	      Value		      "dcmin"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [165, 204, 200, 226]
	      ShowName		      off
	      Value		      "dcmax"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant5"
	      Position		      [215, 105, 235, 125]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant6"
	      Position		      [210, 285, 230, 305]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [2, 1]
	      Position		      [325, 62, 355, 93]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [315, 217, 345, 248]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      Ports		      [2, 1]
	      Position		      [390, 127, 420, 158]
	      ShowName		      off
	      Operator		      "NOR"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [240, 32, 270, 63]
	      ShowName		      off
	      Operator		      "<="
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [245, 192, 275, 223]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [250, 92, 280, 123]
	      ShowName		      off
	      Operator		      "<="
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      Position		      [250, 272, 280, 303]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "nothold"
	      Position		      [445, 138, 475, 152]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      DstBlock		      "nothold"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      Points		      [15, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [5, 0; 0, -50]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      Points		      [5, 0; 0, 15]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant6"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant5"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [25, 0]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [20, 0; 0, 20]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "dc"
	      SrcPort		      1
	      Points		      [70, 0]
	      Branch {
		DstBlock		"Relational\nOperator"
		DstPort			1
	      }
	      Branch {
		Points			[0, 160]
		DstBlock		"Relational\nOperator1"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "e1"
	      SrcPort		      1
	      Points		      [35, 0]
	      Branch {
		DstBlock		"Relational\nOperator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, 180]
		DstBlock		"Relational\nOperator3"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  ZeroOrderHold
	  Name			  "sampled\nerror"
	  Position		  [150, 30, 180, 60]
	  SampleTime		  "0.02"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "duty cycle"
	  Position		  [775, 68, 805, 82]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  "sampled\nerror"
	  SrcPort		  1
	  DstBlock		  "loop\ngain"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum1"
	  SrcPort		  1
	  DstBlock		  "sampled\nerror"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant5"
	  SrcPort		  1
	  Points		  [0, -5]
	  DstBlock		  "Switch"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "integral\ngain"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "prevent\nwindup"
	  SrcPort		  1
	  Points		  [20, 0; 0, 55; -535, 0; 0, -125]
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "integral\ngain"
	  SrcPort		  1
	  DstBlock		  "Sum2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum2"
	  SrcPort		  1
	  DstBlock		  "Unit Delay"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Unit Delay"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 35; -125, 0; 0, -30]
	    DstBlock		    "Sum2"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "set point"
	  SrcPort		  1
	  DstBlock		  "Sum1"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "feedback"
	  SrcPort		  1
	  Points		  [0, -50]
	  DstBlock		  "Sum1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "loop\ngain"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, 40]
	    Branch {
	      Points		      [0, 90]
	      DstBlock		      "prevent\nwindup"
	      DstPort		      2
	    }
	    Branch {
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	  }
	  Branch {
	    DstBlock		    "Sum"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Saturation"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "duty cycle"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "prevent\nwindup"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Saturation"
	  DstPort		  1
	}
	Annotation {
	  Name			  "proportional + integral control"
	  Position		  [447, 60]
	}
	Annotation {
	  Name			  "controller"
	  Position		  [414, 249]
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      Reference
      Name		      "Desired Response for \nPiston Position"
      Ports		      [1]
      Position		      [685, 275, 775, 345]
      BackgroundColor	      "green"
      DropShadow	      on
      SourceBlock	      "srolib/Signal Constraint"
      SourceType	      "Signal Constraint"
      ShowPortLabels	      on
      DialogPosition	      "[0.031875 0.296666666666667 0.3725 0.2758333333"
"33333]"
      SaveIn		      "workspace"
      SaveAs		      "servo_optim"
      LogID		      "SRO_DataLog_1"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
    }
    Block {
      BlockType		      Gain
      Name		      "Gain1"
      Position		      [405, 87, 445, 123]
      ShowName		      off
      Gain		      "Ao"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
    }
    Block {
      BlockType		      HitCross
      Name		      "Hit \nCrossing"
      Ports		      [1]
      Position		      [250, 186, 280, 214]
      ShowName		      off
      HitCrossingOffset	      "[0, Ipull, (Ihold + deltai), (Ihold - deltai)]"
      HitCrossingDirection    "either"
      ShowOutputPort	      off
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "Magnetic\nCircuit"
      Ports		      [2, 2]
      Position		      [355, 123, 430, 172]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
      System {
	Name			"Magnetic\nCircuit"
	Location		[129, 298, 973, 648]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "vsol"
	  Position		  [15, 93, 45, 107]
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "x"
	  Position		  [15, 203, 45, 217]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	  Port {
	    PortNumber		    1
	    Name		    "armature position"
	    RTWStorageClass	    "Auto"
	    DataLoggingNameMode	    "SignalName"
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain"
	  Position		  [190, 100, 220, 130]
	  ShowName		  off
	  Gain			  "1/N"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain1"
	  Position		  [80, 110, 110, 140]
	  ShowName		  off
	  Gain			  "R"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "Gain6"
	  Position		  [490, 132, 535, 168]
	  ShowName		  off
	  Gain			  "1/mu0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Lookup2D
	  Name			  "H vs. B"
	  Position		  [425, 67, 455, 98]
	  DialogController	  "Simulink.DDGSource"
	  RowIndex		  "Bvalues"
	  ColumnIndex		  "[-1 1]"
	  OutputValues		  "Hdata'"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Memory
	  Name			  "Memory"
	  Position		  [325, 150, 355, 180]
	  ShowName		  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "Product"
	  Ports			  [2, 1]
	  Position		  [550, 22, 580, 53]
	  ShowName		  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Signum
	  Name			  "Sign"
	  Position		  [255, 149, 290, 181]
	  ShowName		  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [135, 88, 170, 137]
	  ShowName		  off
	  Inputs		  "+-"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum2"
	  Ports			  [2, 1]
	  Position		  [210, 187, 240, 218]
	  ShowName		  off
	  Inputs		  "+-"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "air mmf"
	  Ports			  [2, 1]
	  Position		  [570, 142, 600, 173]
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "current"
	  Position		  [690, 82, 730, 118]
	  Gain			  "1/N"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "equiv. series gap"
	  Position		  [410, 179, 445, 201]
	  NamePlacement		  "alternate"
	  Value			  "gser"
	}
	Block {
	  BlockType		  Integrator
	  Name			  "flux"
	  Ports			  [1, 1]
	  Position		  [255, 100, 285, 130]
	  NamePlacement		  "alternate"
	  LowerSaturationLimit	  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "flux\ndensity"
	  Position		  [315, 96, 355, 134]
	  NamePlacement		  "alternate"
	  Gain			  "1/A"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "force"
	  Position		  [615, 18, 690, 62]
	  NamePlacement		  "alternate"
	  Gain			  "0.5*A/mu0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "gap at\nx = 0"
	  Position		  [145, 185, 185, 205]
	  NamePlacement		  "alternate"
	  Value			  "gmax"
	}
	Block {
	  BlockType		  Sum
	  Name			  "net air gap"
	  Ports			  [2, 1]
	  Position		  [475, 182, 505, 213]
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "overall\nmmf"
	  Ports			  [2, 1]
	  Position		  [635, 71, 660, 124]
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "steel mmf"
	  Position		  [520, 68, 565, 102]
	  Gain			  "Lsteel"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "Fsol"
	  Position		  [785, 33, 815, 47]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "isol"
	  Position		  [785, 93, 815, 107]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  Name			  "armature position"
	  Labels		  [1, 1]
	  SrcBlock		  "x"
	  SrcPort		  1
	  DstBlock		  "Sum2"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "gap at\nx = 0"
	  SrcPort		  1
	  DstBlock		  "Sum2"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum2"
	  SrcPort		  1
	  DstBlock		  "net air gap"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "equiv. series gap"
	  SrcPort		  1
	  DstBlock		  "net air gap"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "Gain"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Gain1"
	  SrcPort		  1
	  DstBlock		  "Sum"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "vsol"
	  SrcPort		  1
	  DstBlock		  "Sum"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "net air gap"
	  SrcPort		  1
	  Points		  [30, 0; 0, -35]
	  DstBlock		  "air mmf"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "current"
	  SrcPort		  1
	  Points		  [10, 0]
	  Branch {
	    DstBlock		    "isol"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 135; -685, 0; 0, -110]
	    DstBlock		    "Gain1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "flux\ndensity"
	  SrcPort		  1
	  Points		  [0, 0]
	  Branch {
	    Points		    [0, -40]
	    DstBlock		    "H vs. B"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -40]
	    Branch {
	      Points		      [0, 40; 75, 0; 0, 35]
	      DstBlock		      "Gain6"
	      DstPort		      1
	    }
	    Branch {
	      Points		      [0, -45; 155, 0]
	      Branch {
		Points			[0, 15]
		DstBlock		"Product"
		DstPort			2
	      }
	      Branch {
		DstBlock		"Product"
		DstPort			1
	      }
	    }
	  }
	}
	Line {
	  SrcBlock		  "overall\nmmf"
	  SrcPort		  1
	  DstBlock		  "current"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "air mmf"
	  SrcPort		  1
	  Points		  [10, 0; 0, -50]
	  DstBlock		  "overall\nmmf"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "steel mmf"
	  SrcPort		  1
	  DstBlock		  "overall\nmmf"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "H vs. B"
	  SrcPort		  1
	  DstBlock		  "steel mmf"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Gain6"
	  SrcPort		  1
	  DstBlock		  "air mmf"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Gain"
	  SrcPort		  1
	  Points		  [5, 0]
	  Branch {
	    DstBlock		    "flux"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 50]
	    DstBlock		    "Sign"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Memory"
	  SrcPort		  1
	  Points		  [35, 0; 0, -75]
	  DstBlock		  "H vs. B"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "flux"
	  SrcPort		  1
	  DstBlock		  "flux\ndensity"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "force"
	  SrcPort		  1
	  DstBlock		  "Fsol"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Product"
	  SrcPort		  1
	  DstBlock		  "force"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Sign"
	  SrcPort		  1
	  DstBlock		  "Memory"
	  DstPort		  1
	}
	Annotation {
	  Name			  "magnetic circuit"
	  Position		  [374, 289]
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      Mux
      Name		      "Mux"
      Ports		      [2, 1]
      Position		      [900, 57, 905, 93]
      BackgroundColor	      "black"
      ShowName		      off
      Inputs		      "2"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "PWM_driver_ckt"
      Ports		      [2, 1]
      Position		      [230, 106, 305, 164]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      MaskType		      "Stateflow"
      MaskDescription	      "Stateflow diagram"
      MaskDisplay	      "plot(sf('Private','sfblk','xIcon'),sf('Private'"
",'sfblk','yIcon'));text(0.5,0,sf('Private', 'sfblk', 'tIcon'),'HorizontalAl',"
"'Center','VerticalAl','Bottom');"
      MaskSelfModifiable      on
      MaskIconFrame	      off
      MaskIconOpaque	      off
      MaskIconRotate	      "none"
      MaskIconUnits	      "autoscale"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
      Port {
	PortNumber		1
	Name			"solenoid\nvoltage"
	PropagatedSignals	"v"
	RTWStorageClass		"Auto"
	DataLoggingNameMode	"SignalName"
	ShowSigGenPortName	on
      }
      System {
	Name			"PWM_driver_ckt"
	Location		[70, 200, 570, 460]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "duty_cycle"
	  Position		  [20, 101, 40, 119]
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "i"
	  Position		  [20, 136, 40, 154]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Demux
	  Name			  " Demux "
	  Ports			  [1, 1]
	  Position		  [270, 160, 320, 200]
	  Outputs		  "1"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  "S-Function"
	  Name			  " SFunction "
	  Tag			  "Stateflow S-Function servo_demo 1"
	  Ports			  [2, 2]
	  Position		  [180, 100, 230, 160]
	  FunctionName		  "sf_sfun"
	  Parameters		  "Ihold,Ipull,Tpwm,Vd,Vs,Vz,deltai"
	  PortCounts		  "[2 2]"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortNumber		    2
	    Name		    "v"
	    RTWStorageClass	    "Auto"
	    DataLoggingNameMode	    "SignalName"
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Terminator
	  Name			  " Terminator "
	  Position		  [460, 171, 480, 189]
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "v"
	  Position		  [460, 101, 480, 119]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  " SFunction "
	  SrcPort		  1
	  Points		  [0, 65]
	  DstBlock		  " Demux "
	  DstPort		  1
	}
	Line {
	  SrcBlock		  " Demux "
	  SrcPort		  1
	  DstBlock		  " Terminator "
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "duty_cycle"
	  SrcPort		  1
	  DstBlock		  " SFunction "
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "i"
	  SrcPort		  1
	  DstBlock		  " SFunction "
	  DstPort		  2
	}
	Line {
	  Name			  "v"
	  Labels		  [0, 0]
	  SrcBlock		  " SFunction "
	  SrcPort		  2
	  DstBlock		  "v"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      Constant
      Name		      "Supply\nPressure"
      Position		      [360, 95, 380, 115]
      NamePlacement	      "alternate"
      Value		      "Ps"
    }
    Block {
      BlockType		      SubSystem
      Name		      "armature\nmotion"
      Ports		      [2, 1]
      Position		      [460, 89, 515, 151]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
      System {
	Name			"armature\nmotion"
	Location		[152, 487, 683, 764]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "Fball"
	  Position		  [15, 18, 45, 32]
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "Fsol"
	  Position		  [15, 58, 45, 72]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Gain
	  Name			  "damping"
	  Position		  [265, 110, 295, 140]
	  Orientation		  "left"
	  Gain			  "Cv"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "double integrator"
	  Ports			  [1, 2]
	  Position		  [300, 17, 350, 73]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextAcrossSSBoundary on
	  RTWSystemCode		  "Auto"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  System {
	    Name		    "double integrator"
	    Location		    [344, 545, 1104, 841]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "xdotdot"
	      Position		      [15, 63, 45, 77]
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [505, 219, 585, 241]
	      Orientation	      "left"
	      ShowName		      off
	      Value		      "gmax - gmin"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [505, 174, 585, 196]
	      Orientation	      "left"
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [360, 41, 390, 59]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [90, 96, 120, 114]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [95, 171, 125, 189]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Integrator1"
	      Ports		      [2, 1]
	      Position		      [515, 52, 545, 83]
	      ShowName		      off
	      ExternalReset	      "rising"
	      LowerSaturationLimit    "Inf"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Integrator2"
	      Ports		      [1, 2]
	      Position		      [605, 51, 635, 84]
	      ShowName		      off
	      LimitOutput	      on
	      UpperSaturationLimit    "gmax - gmin"
	      LowerSaturationLimit    "0"
	      ShowSaturationPort      on
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [2, 1]
	      Position		      [230, 92, 260, 123]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [290, 127, 320, 158]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      Ports		      [2, 1]
	      Position		      [360, 102, 390, 133]
	      ShowName		      off
	      Operator		      "OR"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [435, 207, 465, 238]
	      Orientation	      "left"
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [140, 82, 170, 113]
	      ShowName		      off
	      Operator		      ">"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [435, 162, 465, 193]
	      Orientation	      "left"
	      ShowName		      off
	      Operator		      "<="
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      Position		      [155, 157, 185, 188]
	      ShowName		      off
	      Operator		      "<"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [435, 45, 465, 75]
	      Threshold		      "0.5"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		3
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "x"
	      Position		      [715, 53, 745, 67]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "xdot"
	      Position		      [715, 13, 745, 27]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Line {
	      SrcBlock		      "Integrator1"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, -50]
		DstBlock		"xdot"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Integrator2"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [-225, 0; 0, -110]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [-165, 0; 0, -30]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "xdotdot"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		DstBlock		"Switch"
		DstPort			3
	      }
	      Branch {
		Points			[0, 20]
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 75]
		  DstBlock		  "Relational\nOperator3"
		  DstPort		  1
		}
	      }
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0; 0, -40]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [15, 0; 0, -60]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Integrator2"
	      SrcPort		      2
	      Points		      [10, 0; 0, 45; -160, 0; 0, -45]
	      DstBlock		      "Integrator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Integrator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Integrator2"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"x"
		DstPort			1
	      }
	      Branch {
		Points			[0, 95]
		Branch {
		  Points		  [0, 60]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
		Branch {
		  Points		  [-185, 0]
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  1
		}
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "mass"
	  Position		  [230, 30, 260, 60]
	  Gain			  "1/m"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "net force"
	  Ports			  [5, 1]
	  Position		  [165, 13, 190, 77]
	  Inputs		  "++---"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    3
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    4
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    5
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Constant
	  Name			  "spring preload"
	  Position		  [140, 139, 175, 161]
	  Orientation		  "left"
	  Value			  "Fs0"
	}
	Block {
	  BlockType		  Gain
	  Name			  "spring rate"
	  Position		  [200, 170, 230, 200]
	  Orientation		  "left"
	  Gain			  "Ks"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "stroke"
	  Position		  [455, 23, 485, 37]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  "mass"
	  SrcPort		  1
	  DstBlock		  "double integrator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Fball"
	  SrcPort		  1
	  DstBlock		  "net force"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Fsol"
	  SrcPort		  1
	  Points		  [20, 0; 0, -30]
	  DstBlock		  "net force"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "spring rate"
	  SrcPort		  1
	  Points		  [-105, 0; 0, -140]
	  DstBlock		  "net force"
	  DstPort		  3
	}
	Line {
	  SrcBlock		  "spring preload"
	  SrcPort		  1
	  Points		  [-20, 0; 0, -95]
	  DstBlock		  "net force"
	  DstPort		  4
	}
	Line {
	  SrcBlock		  "damping"
	  SrcPort		  1
	  Points		  [-125, 0; 0, -60]
	  DstBlock		  "net force"
	  DstPort		  5
	}
	Line {
	  SrcBlock		  "double integrator"
	  SrcPort		  2
	  Points		  [20, 0; 0, 65]
	  DstBlock		  "damping"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "net force"
	  SrcPort		  1
	  DstBlock		  "mass"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "double integrator"
	  SrcPort		  1
	  Points		  [35, 0]
	  Branch {
	    Points		    [0, 155]
	    DstBlock		    "spring rate"
	    DstPort		    1
	  }
	  Branch {
	    DstBlock		    "stroke"
	    DstPort		    1
	  }
	}
	Annotation {
	  Name			  "armature motion"
	  Position		  [249, 249]
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "cylinder pressurization"
      Ports		      [3, 1]
      Position		      [700, 135, 765, 195]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		3
	ShowSigGenPortName	on
      }
      Port {
	PortNumber		1
	Name			"control\npressure"
	RTWStorageClass		"Auto"
	DataLoggingNameMode	"SignalName"
	ShowSigGenPortName	on
      }
      System {
	Name			"cylinder pressurization"
	Location		[285, 112, 791, 391]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "qnet"
	  Position		  [25, 68, 55, 82]
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "xp"
	  Position		  [30, 183, 60, 197]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "xpdot"
	  Position		  [25, 138, 55, 152]
	  Port			  "3"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Gain
	  Name			  "Volume"
	  Position		  [160, 170, 195, 210]
	  Gain			  "Ap"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "bulk\nmodulus"
	  Position		  [215, 65, 250, 105]
	  NamePlacement		  "alternate"
	  Gain			  "beta"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "dVolume/dt"
	  Position		  [90, 125, 125, 165]
	  Gain			  "Ap"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "effective\nflow"
	  Ports			  [2, 1]
	  Position		  [160, 67, 190, 98]
	  Inputs		  "+-"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Integrator
	  Name			  "pressure"
	  Ports			  [1, 1]
	  Position		  [370, 85, 400, 115]
	  LimitOutput		  on
	  LowerSaturationLimit	  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Product
	  Name			  "quotient"
	  Ports			  [2, 1]
	  Position		  [295, 74, 325, 121]
	  Inputs		  "*/"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "pc"
	  Position		  [445, 93, 475, 107]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  "xpdot"
	  SrcPort		  1
	  DstBlock		  "dVolume/dt"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "dVolume/dt"
	  SrcPort		  1
	  Points		  [10, 0; 0, -55]
	  DstBlock		  "effective\nflow"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "bulk\nmodulus"
	  SrcPort		  1
	  DstBlock		  "quotient"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "quotient"
	  SrcPort		  1
	  DstBlock		  "pressure"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "effective\nflow"
	  SrcPort		  1
	  DstBlock		  "bulk\nmodulus"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "xp"
	  SrcPort		  1
	  DstBlock		  "Volume"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Volume"
	  SrcPort		  1
	  Points		  [45, 0; 0, -80]
	  DstBlock		  "quotient"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "qnet"
	  SrcPort		  1
	  DstBlock		  "effective\nflow"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "pressure"
	  SrcPort		  1
	  DstBlock		  "pc"
	  DstPort		  1
	}
	Annotation {
	  Name			  "cylinder pressurization"
	  Position		  [254, 249]
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "piston motion"
      Ports		      [1, 2]
      Position		      [820, 126, 870, 204]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortNumber		1
	Name			"piston\nposition"
	RTWStorageClass		"Auto"
	DataLoggingNameMode	"SignalName"
	ShowSigGenPortName	on
      }
      System {
	Name			"piston motion"
	Location		[117, 531, 633, 735]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "pc"
	  Position		  [25, 93, 55, 107]
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [155, 77, 185, 108]
	  ShowName		  off
	  Inputs		  "-+"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "area"
	  Position		  [90, 80, 125, 120]
	  Gain			  "Ap"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "double integrator"
	  Ports			  [1, 2]
	  Position		  [290, 67, 340, 123]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextAcrossSSBoundary on
	  RTWSystemCode		  "Auto"
	  MaskPromptString	  "initial position|minimum position|maximum p"
"osition|initial velocity|minimum velocity|maximum velocity"
	  MaskStyleString	  "edit,edit,edit,edit,edit,edit"
	  MaskTunableValueString  "on,on,on,on,on,on"
	  MaskCallbackString	  "|||||"
	  MaskEnableString	  "on,on,on,on,on,on"
	  MaskVisibilityString	  "on,on,on,on,on,on"
	  MaskToolTipString	  "on,on,on,on,on,on"
	  MaskVarAliasString	  ",,,,,"
	  MaskVariables		  "x0=@1;xmin=@2;xmax=@3;xdot0=@4;xdotmin=@5;x"
"dotmax=@6;"
	  MaskIconFrame		  on
	  MaskIconOpaque	  on
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "xpmin|xpmin|xpmax|0|-Inf|Inf"
	  MaskTabNameString	  ",,,,,"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  System {
	    Name		    "double integrator"
	    Location		    [512, 724, 1272, 1020]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "xdotdot"
	      Position		      [15, 63, 45, 77]
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant"
	      Position		      [505, 220, 550, 240]
	      Orientation	      "left"
	      ShowName		      off
	      Value		      "xmax"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant1"
	      Position		      [505, 175, 550, 195]
	      Orientation	      "left"
	      ShowName		      off
	      Value		      "xmin"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant2"
	      Position		      [360, 41, 390, 59]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant3"
	      Position		      [90, 96, 120, 114]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Constant
	      Name		      "Constant4"
	      Position		      [95, 171, 125, 189]
	      ShowName		      off
	      Value		      "0"
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Integrator1"
	      Ports		      [2, 1]
	      Position		      [515, 52, 545, 83]
	      ShowName		      off
	      ExternalReset	      "rising"
	      InitialCondition	      "xdot0"
	      UpperSaturationLimit    "xdotmax"
	      LowerSaturationLimit    "xdotmin"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Integrator
	      Name		      "Integrator2"
	      Ports		      [1, 2]
	      Position		      [605, 51, 635, 84]
	      ShowName		      off
	      InitialCondition	      "x0"
	      LimitOutput	      on
	      UpperSaturationLimit    "xmax"
	      LowerSaturationLimit    "xmin"
	      ShowSaturationPort      on
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator"
	      Ports		      [2, 1]
	      Position		      [230, 92, 260, 123]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator1"
	      Ports		      [2, 1]
	      Position		      [290, 127, 320, 158]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Logic
	      Name		      "Logical\nOperator2"
	      Ports		      [2, 1]
	      Position		      [360, 102, 390, 133]
	      ShowName		      off
	      Operator		      "OR"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator"
	      Position		      [435, 207, 465, 238]
	      Orientation	      "left"
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator1"
	      Position		      [140, 82, 170, 113]
	      ShowName		      off
	      Operator		      ">"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator2"
	      Position		      [435, 162, 465, 193]
	      Orientation	      "left"
	      ShowName		      off
	      Operator		      "<="
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      RelationalOperator
	      Name		      "Relational\nOperator3"
	      Position		      [155, 157, 185, 188]
	      ShowName		      off
	      Operator		      "<"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Switch
	      Name		      "Switch"
	      Position		      [435, 45, 465, 75]
	      Threshold		      "0.5"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		3
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "x"
	      Position		      [715, 53, 745, 67]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "xdot"
	      Position		      [715, 13, 745, 27]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Line {
	      SrcBlock		      "Integrator2"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		Points			[0, 110]
		Branch {
		  DstBlock		  "Relational\nOperator2"
		  DstPort		  1
		}
		Branch {
		  Points		  [0, 45]
		  DstBlock		  "Relational\nOperator"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"x"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Switch"
	      SrcPort		      1
	      DstBlock		      "Integrator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Integrator2"
	      SrcPort		      2
	      Points		      [10, 0; 0, 45; -160, 0; 0, -45]
	      DstBlock		      "Integrator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator2"
	      SrcPort		      1
	      Points		      [15, 0; 0, -60]
	      DstBlock		      "Switch"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant2"
	      SrcPort		      1
	      DstBlock		      "Switch"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator1"
	      SrcPort		      1
	      Points		      [20, 0]
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Logical\nOperator"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator2"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator3"
	      SrcPort		      1
	      Points		      [50, 0; 0, -40]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant4"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator3"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator1"
	      SrcPort		      1
	      DstBlock		      "Logical\nOperator"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Constant3"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "xdotdot"
	      SrcPort		      1
	      Points		      [20, 0]
	      Branch {
		Points			[0, 20]
		Branch {
		  Points		  [0, 75]
		  DstBlock		  "Relational\nOperator3"
		  DstPort		  1
		}
		Branch {
		  DstBlock		  "Relational\nOperator1"
		  DstPort		  1
		}
	      }
	      Branch {
		DstBlock		"Switch"
		DstPort			3
	      }
	    }
	    Line {
	      SrcBlock		      "Constant1"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator2"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator2"
	      SrcPort		      1
	      Points		      [-165, 0; 0, -30]
	      DstBlock		      "Logical\nOperator1"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Relational\nOperator"
	      SrcPort		      1
	      Points		      [-225, 0; 0, -110]
	      DstBlock		      "Logical\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Constant"
	      SrcPort		      1
	      DstBlock		      "Relational\nOperator"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Integrator1"
	      SrcPort		      1
	      Points		      [25, 0]
	      Branch {
		DstBlock		"Integrator2"
		DstPort			1
	      }
	      Branch {
		Points			[0, -50]
		DstBlock		"xdot"
		DstPort			1
	      }
	    }
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "mass"
	  Position		  [220, 75, 255, 115]
	  Gain			  "1/Mp"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Gain
	  Name			  "spring"
	  Position		  [200, 25, 235, 65]
	  Orientation		  "left"
	  NamePlacement		  "alternate"
	  Gain			  "Ksp"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "xp"
	  Position		  [455, 73, 485, 87]
	  NamePlacement		  "alternate"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "xpdot"
	  Position		  [455, 103, 485, 117]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  "pc"
	  SrcPort		  1
	  DstBlock		  "area"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "double integrator"
	  SrcPort		  2
	  DstBlock		  "xpdot"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "area"
	  SrcPort		  1
	  DstBlock		  "Sum"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "mass"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "spring"
	  SrcPort		  1
	  Points		  [-60, 0; 0, 40]
	  DstBlock		  "Sum"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "mass"
	  SrcPort		  1
	  DstBlock		  "double integrator"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "double integrator"
	  SrcPort		  1
	  Points		  [45, 0]
	  Branch {
	    DstBlock		    "xp"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -35]
	    DstBlock		    "spring"
	    DstPort		    1
	  }
	}
	Annotation {
	  Name			  "piston motion"
	  Position		  [249, 184]
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	}
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "position\ncommand"
      Ports		      [0, 1]
      Position		      [25, 72, 70, 128]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      System {
	Name			"position\ncommand"
	Location		[158, 229, 343, 378]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Step
	  Name			  "Step"
	  Position		  [20, 30, 50, 60]
	  Time			  ".5"
	  Before		  "0.01"
	  After			  "0.015"
	  SampleTime		  "0"
	}
	Block {
	  BlockType		  Outport
	  Name			  "set point"
	  Position		  [130, 38, 160, 52]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  "Step"
	  SrcPort		  1
	  DstBlock		  "set point"
	  DstPort		  1
	}
      }
    }
    Block {
      BlockType		      Scope
      Name		      "set point (yellow)\nand\npiston position"
      Ports		      [1]
      Position		      [925, 59, 955, 91]
      Location		      [862, 48, 1227, 256]
      Open		      on
      NumInputPorts	      "1"
      TickLabels	      "on"
      List {
	ListType		AxesTitles
	axes1			"%<SignalLabel>"
      }
      YMin		      "0.002"
      YMax		      "0.0175"
      DataFormat	      "Array"
      MaxDataPoints	      "5e4"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
    }
    Block {
      BlockType		      Scope
      Name		      "solenoid current (A)"
      Ports		      [1]
      Position		      [470, 210, 500, 240]
      Location		      [862, 309, 1232, 505]
      Open		      on
      NumInputPorts	      "1"
      TickLabels	      "on"
      List {
	ListType		AxesTitles
	axes1			"%<SignalLabel>"
      }
      TimeRange		      "0.02"
      YMin		      "-0.25"
      YMax		      "2.75"
      DataFormat	      "Array"
      MaxDataPoints	      "5e4"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
    }
    Block {
      BlockType		      SubSystem
      Name		      "valve flows"
      Ports		      [2, 1]
      Position		      [565, 97, 640, 188]
      TreatAsAtomicUnit	      off
      MinAlgLoopOccurrences   off
      PropExecContextAcrossSSBoundary on
      RTWSystemCode	      "Auto"
      Port {
	PortType		0
	PortNumber		1
	ShowSigGenPortName	on
      }
      Port {
	PortType		0
	PortNumber		2
	ShowSigGenPortName	on
      }
      System {
	Name			"valve flows"
	Location		[219, 103, 846, 424]
	Open			off
	ModelBrowserVisibility	off
	ModelBrowserWidth	200
	ScreenColor		"white"
	PaperOrientation	"landscape"
	PaperPositionMode	"auto"
	PaperType		"usletter"
	PaperUnits		"inches"
	ZoomFactor		"100"
	Block {
	  BlockType		  Inport
	  Name			  "armature position"
	  Position		  [45, 87, 75, 103]
	  NamePlacement		  "alternate"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Inport
	  Name			  "control pressure"
	  Position		  [50, 198, 80, 212]
	  Port			  "2"
	  IconDisplay		  "Port number"
	  LatchInput		  off
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant"
	  Position		  [140, 100, 160, 120]
	  ShowName		  off
	  Value			  "0"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant1"
	  Position		  [110, 156, 165, 174]
	  ShowName		  off
	  Value			  "balltravel"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant2"
	  Position		  [355, 120, 375, 140]
	  ShowName		  off
	  Value			  "0"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant3"
	  Position		  [255, 35, 275, 55]
	  ShowName		  off
	  Value			  "Ps"
	}
	Block {
	  BlockType		  Constant
	  Name			  "Constant4"
	  Position		  [245, 225, 265, 245]
	  ShowName		  off
	  Value			  "0"
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator"
	  Position		  [190, 87, 220, 118]
	  ShowName		  off
	  Operator		  ">"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortNumber		    1
	    Name		    "source\nopen"
	    RTWStorageClass	    "Auto"
	    DataLoggingNameMode	    "SignalName"
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  RelationalOperator
	  Name			  "Relational\nOperator1"
	  Position		  [190, 142, 220, 173]
	  ShowName		  off
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortNumber		    1
	    Name		    "exhaust\nclosed"
	    RTWStorageClass	    "Auto"
	    DataLoggingNameMode	    "SignalName"
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Sum
	  Name			  "Sum"
	  Ports			  [2, 1]
	  Position		  [500, 77, 530, 188]
	  ShowName		  off
	  Inputs		  "+-"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch"
	  Position		  [425, 90, 455, 120]
	  ShowName		  off
	  Threshold		  "0.5"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    3
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  Switch
	  Name			  "Switch1"
	  Position		  [425, 145, 455, 175]
	  ShowName		  off
	  Threshold		  "0.5"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    3
	    ShowSigGenPortName	    on
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "exhaust flow"
	  Ports			  [2, 1]
	  Position		  [300, 190, 360, 250]
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextAcrossSSBoundary on
	  RTWSystemCode		  "Auto"
	  MaskType		  "turbulent orifice flow"
	  MaskPromptString	  "flow coefficient|orifice area"
	  MaskStyleString	  "edit,edit"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskVarAliasString	  ","
	  MaskVariables		  "Ko=@1;Ao=@2;"
	  MaskDisplay		  "plot(-0.75,-1.25,0.75,1.25,[0 0],[1 -1],0.5"
"*cos(-pi/4:.1:pi/4)-0.55, 0.5*sin(-pi/4:.1:pi/4),-0.5*cos(-pi/4:.1:pi/4)+0.55"
", 0.5*sin(-pi/4:.1:pi/4))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  off
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "Ko|Ao"
	  MaskTabNameString	  ","
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  System {
	    Name		    "exhaust flow"
	    Location		    [758, 797, 1358, 968]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "pup"
	      Position		      [25, 53, 55, 67]
	      NamePlacement	      "alternate"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "pdown"
	      Position		      [25, 68, 55, 82]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      Position		      [170, 75, 200, 105]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      ElementaryMath
	      Name		      "Elementary\nMath"
	      Ports		      [1, 1]
	      Position		      [250, 75, 280, 105]
	      ShowName		      off
	      Operator		      "sqrt"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [475, 61, 520, 99]
	      ShowName		      off
	      Gain		      "Ko*Ao"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [400, 60, 430, 100]
	      ShowName		      off
	      FontName		      "Arial"
	      FontSize		      24
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Signum
	      Name		      "Sign"
	      Position		      [310, 55, 340, 85]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [80, 52, 110, 83]
	      ShowName		      off
	      Inputs		      "+-"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "q"
	      Position		      [545, 73, 575, 87]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "q"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "pdown"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "pup"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		Points			[0, 20]
		DstBlock		"Abs"
		DstPort			1
	      }
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      DstBlock		      "Elementary\nMath"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Elementary\nMath"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Annotation {
	      Name		      "Turbulent Orifice Flow"
	      Position		      [299, 147]
	      FontName		      "Arial"
	      FontSize		      12
	      FontWeight	      "bold"
	    }
	  }
	}
	Block {
	  BlockType		  SubSystem
	  Name			  "source flow"
	  Ports			  [2, 1]
	  Position		  [300, 29, 360, 91]
	  NamePlacement		  "alternate"
	  TreatAsAtomicUnit	  off
	  MinAlgLoopOccurrences	  off
	  PropExecContextAcrossSSBoundary on
	  RTWSystemCode		  "Auto"
	  MaskType		  "turbulent orifice flow"
	  MaskPromptString	  "flow coefficient|orifice area"
	  MaskStyleString	  "edit,edit"
	  MaskTunableValueString  "on,on"
	  MaskCallbackString	  "|"
	  MaskEnableString	  "on,on"
	  MaskVisibilityString	  "on,on"
	  MaskToolTipString	  "on,on"
	  MaskVarAliasString	  ","
	  MaskVariables		  "Ko=@1;Ao=@2;"
	  MaskDisplay		  "plot(-0.75,-1.25,0.75,1.25,[0 0],[1 -1],0.5"
"*cos(-pi/4:.1:pi/4)-0.55, 0.5*sin(-pi/4:.1:pi/4),-0.5*cos(-pi/4:.1:pi/4)+0.55"
", 0.5*sin(-pi/4:.1:pi/4))"
	  MaskIconFrame		  on
	  MaskIconOpaque	  off
	  MaskIconRotate	  "none"
	  MaskIconUnits		  "autoscale"
	  MaskValueString	  "Ko|Ao"
	  MaskTabNameString	  ","
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	  Port {
	    PortType		    0
	    PortNumber		    2
	    ShowSigGenPortName	    on
	  }
	  System {
	    Name		    "source flow"
	    Location		    [758, 797, 1358, 968]
	    Open		    off
	    ModelBrowserVisibility  off
	    ModelBrowserWidth	    200
	    ScreenColor		    "white"
	    PaperOrientation	    "landscape"
	    PaperPositionMode	    "auto"
	    PaperType		    "usletter"
	    PaperUnits		    "inches"
	    ZoomFactor		    "100"
	    Block {
	      BlockType		      Inport
	      Name		      "pup"
	      Position		      [25, 53, 55, 67]
	      NamePlacement	      "alternate"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Inport
	      Name		      "pdown"
	      Position		      [25, 68, 55, 82]
	      Port		      "2"
	      IconDisplay	      "Port number"
	      LatchInput	      off
	    }
	    Block {
	      BlockType		      Abs
	      Name		      "Abs"
	      Position		      [170, 75, 200, 105]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      ElementaryMath
	      Name		      "Elementary\nMath"
	      Ports		      [1, 1]
	      Position		      [250, 75, 280, 105]
	      ShowName		      off
	      Operator		      "sqrt"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Gain
	      Name		      "Gain"
	      Position		      [475, 61, 520, 99]
	      ShowName		      off
	      Gain		      "Ko*Ao"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Product
	      Name		      "Product"
	      Ports		      [2, 1]
	      Position		      [400, 60, 430, 100]
	      ShowName		      off
	      FontName		      "Arial"
	      FontSize		      24
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Signum
	      Name		      "Sign"
	      Position		      [310, 55, 340, 85]
	      ShowName		      off
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Sum
	      Name		      "Sum"
	      Ports		      [2, 1]
	      Position		      [80, 52, 110, 83]
	      ShowName		      off
	      Inputs		      "+-"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	      Port {
		PortType		0
		PortNumber		2
		ShowSigGenPortName	on
	      }
	    }
	    Block {
	      BlockType		      Outport
	      Name		      "q"
	      Position		      [545, 73, 575, 87]
	      IconDisplay	      "Port number"
	      BusOutputAsStruct	      off
	      InitialOutput	      "0"
	      Port {
		PortType		0
		PortNumber		1
		ShowSigGenPortName	on
	      }
	    }
	    Line {
	      SrcBlock		      "Sign"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Elementary\nMath"
	      SrcPort		      1
	      DstBlock		      "Product"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Abs"
	      SrcPort		      1
	      DstBlock		      "Elementary\nMath"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Product"
	      SrcPort		      1
	      DstBlock		      "Gain"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "Sum"
	      SrcPort		      1
	      Points		      [30, 0]
	      Branch {
		DstBlock		"Sign"
		DstPort			1
	      }
	      Branch {
		Points			[0, 20]
		DstBlock		"Abs"
		DstPort			1
	      }
	    }
	    Line {
	      SrcBlock		      "pup"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      1
	    }
	    Line {
	      SrcBlock		      "pdown"
	      SrcPort		      1
	      DstBlock		      "Sum"
	      DstPort		      2
	    }
	    Line {
	      SrcBlock		      "Gain"
	      SrcPort		      1
	      DstBlock		      "q"
	      DstPort		      1
	    }
	    Annotation {
	      Name		      "Turbulent Orifice Flow"
	      Position		      [299, 147]
	      FontName		      "Arial"
	      FontSize		      12
	      FontWeight	      "bold"
	    }
	  }
	}
	Block {
	  BlockType		  Outport
	  Name			  "net\nflow"
	  Position		  [570, 128, 600, 142]
	  IconDisplay		  "Port number"
	  BusOutputAsStruct	  off
	  InitialOutput		  "0"
	  Port {
	    PortType		    0
	    PortNumber		    1
	    ShowSigGenPortName	    on
	  }
	}
	Line {
	  SrcBlock		  "Switch"
	  SrcPort		  1
	  DstBlock		  "Sum"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "source flow"
	  SrcPort		  1
	  Points		  [30, 0; 0, 35]
	  DstBlock		  "Switch"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "Constant2"
	  SrcPort		  1
	  Points		  [15, 0]
	  Branch {
	    Points		    [0, -15]
	    DstBlock		    "Switch"
	    DstPort		    3
	  }
	  Branch {
	    Points		    [0, 20]
	    DstBlock		    "Switch1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Constant"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant3"
	  SrcPort		  1
	  DstBlock		  "source flow"
	  DstPort		  1
	}
	Line {
	  Name			  "source\nopen"
	  Labels		  [0, 0]
	  SrcBlock		  "Relational\nOperator"
	  SrcPort		  1
	  DstBlock		  "Switch"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Sum"
	  SrcPort		  1
	  DstBlock		  "net\nflow"
	  DstPort		  1
	}
	Line {
	  SrcBlock		  "armature position"
	  SrcPort		  1
	  Points		  [20, 0]
	  Branch {
	    DstBlock		    "Relational\nOperator"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, 55]
	    DstBlock		    "Relational\nOperator1"
	    DstPort		    1
	  }
	}
	Line {
	  SrcBlock		  "Constant4"
	  SrcPort		  1
	  DstBlock		  "exhaust flow"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "control pressure"
	  SrcPort		  1
	  Points		  [185, 0]
	  Branch {
	    DstBlock		    "exhaust flow"
	    DstPort		    1
	  }
	  Branch {
	    Points		    [0, -130]
	    DstBlock		    "source flow"
	    DstPort		    2
	  }
	}
	Line {
	  SrcBlock		  "Switch1"
	  SrcPort		  1
	  DstBlock		  "Sum"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "Constant1"
	  SrcPort		  1
	  DstBlock		  "Relational\nOperator1"
	  DstPort		  2
	}
	Line {
	  Name			  "exhaust\nclosed"
	  Labels		  [0, 0]
	  SrcBlock		  "Relational\nOperator1"
	  SrcPort		  1
	  DstBlock		  "Switch1"
	  DstPort		  2
	}
	Line {
	  SrcBlock		  "exhaust flow"
	  SrcPort		  1
	  Points		  [35, 0; 0, -50]
	  DstBlock		  "Switch1"
	  DstPort		  3
	}
	Annotation {
	  Name			  "poppet valve flows"
	  Position		  [309, 294]
	  FontName		  "Arial"
	  FontSize		  16
	  FontWeight		  "bold"
	}
      }
    }
    Line {
      SrcBlock		      "Mux"
      SrcPort		      1
      DstBlock		      "set point (yellow)\nand\npiston position"
      DstPort		      1
    }
    Line {
      SrcBlock		      "position\ncommand"
      SrcPort		      1
      Points		      [0, 0; 10, 0]
      Branch {
	DstBlock		"Controller"
	DstPort			1
      }
      Branch {
	Points			[0, -35]
	DstBlock		"Mux"
	DstPort			1
      }
    }
    Line {
      SrcBlock		      "piston motion"
      SrcPort		      2
      Points		      [20, 0; 0, 40; -225, 0; 0, -40]
      DstBlock		      "cylinder pressurization"
      DstPort		      3
    }
    Line {
      Name		      "control\npressure"
      Labels		      [0, 1]
      SrcBlock		      "cylinder pressurization"
      SrcPort		      1
      Points		      [0, 0; 15, 0]
      Branch {
	DstBlock		"piston motion"
	DstPort			1
      }
      Branch {
	Points			[0, 50; -240, 0; 0, -50]
	DstBlock		"valve flows"
	DstPort			2
      }
    }
    Line {
      SrcBlock		      "valve flows"
      SrcPort		      1
      DstBlock		      "cylinder pressurization"
      DstPort		      1
    }
    Line {
      Name		      "piston\nposition"
      Labels		      [0, 0]
      SrcBlock		      "piston motion"
      SrcPort		      1
      Points		      [0, 0]
      Branch {
	Points			[0, -60]
	DstBlock		"Mux"
	DstPort			2
      }
      Branch {
	Points			[40, 0; 0, 90]
	Branch {
	  Points		  [-260, 0; 0, -70]
	  DstBlock		  "cylinder pressurization"
	  DstPort		  2
	}
	Branch {
	  Points		  [0, 20; -335, 0]
	  Branch {
	    Points		    [-505, 0; 0, -115]
	    DstBlock		    "Controller"
	    DstPort		    2
	  }
	  Branch {
	    Points		    [0, 55]
	    DstBlock		    "Desired Response for \nPiston Position"
	    DstPort		    1
	  }
	}
      }
    }
    Line {
      SrcBlock		      "armature\nmotion"
      SrcPort		      1
      Points		      [0, 0; 10, 0]
      Branch {
	Points			[0, 85; -195, 0; 0, -45]
	DstBlock		"Magnetic\nCircuit"
	DstPort			2
      }
      Branch {
	DstBlock		"valve flows"
	DstPort			1
      }
    }
    Line {
      SrcBlock		      "Controller"
      SrcPort		      1
      DstBlock		      "PWM_driver_ckt"
      DstPort		      1
    }
    Line {
      Name		      "solenoid\nvoltage"
      Labels		      [1, 1]
      SrcBlock		      "PWM_driver_ckt"
      SrcPort		      1
      DstBlock		      "Magnetic\nCircuit"
      DstPort		      1
    }
    Line {
      SrcBlock		      "Magnetic\nCircuit"
      SrcPort		      1
      DstBlock		      "armature\nmotion"
      DstPort		      2
    }
    Line {
      SrcBlock		      "Magnetic\nCircuit"
      SrcPort		      2
      Points		      [5, 0; 0, 65]
      Branch {
	DstBlock		"solenoid current (A)"
	DstPort			1
      }
      Branch {
	Points			[-230, 0; 0, -25]
	Branch {
	  DstBlock		  "Hit \nCrossing"
	  DstPort		  1
	}
	Branch {
	  Points		  [0, -50]
	  DstBlock		  "PWM_driver_ckt"
	  DstPort		  2
	}
      }
    }
    Line {
      SrcBlock		      "Gain1"
      SrcPort		      1
      DstBlock		      "armature\nmotion"
      DstPort		      1
    }
    Line {
      SrcBlock		      "Supply\nPressure"
      SrcPort		      1
      DstBlock		      "Gain1"
      DstPort		      1
    }
    Annotation {
      Name		      "The controller generates a\npulse-width modulat"
"ed duty\ncycle, according to which the\ndriver regulates the solenoid\ncurren"
"t, hence valve action."
      Position		      [140, 209]
      FontName		      "Arial"
      FontSize		      9
    }
    Annotation {
      Name		      "Optimizing the response of an electrohydraulic "
"servomechanism"
      Position		      [456, 28]
      BackgroundColor	      "yellow"
      DropShadow	      on
      FontName		      "Arial"
      FontSize		      14
      FontWeight	      "bold"
    }
    Annotation {
      Name		      "Double-click on the \"Desired Response\" block "
"to \noptimize the controller gains Ka and Ki.\n\nThe piston position should r"
"emain between the \nred bounds to adequately track the position command."
      Position		      [239, 326]
    }
  }
}

# Finite State Machines
#
#    Stateflow Version 6.0 (R14 Prerelease) dated Feb 10 2004, 04:40:05
#
#

Stateflow {

	machine {
		id                   		1
		name                 		"servo_demo"
		isLibrary            		0
		firstTarget          		32
		sfVersion            		60014000.000005
		sfDemoChecksum       		[2210782306 3454324556 3434755744 812657864]
	}

	chart {
		id                       		2
		name                     		"PWM_driver_ckt"
		description              		"The objective is to direct fluid from supply to control wh"
						"en the duty\n"
						" cycle is high, and from control to exhaust when low.  The"
						" solenoid\n"
						"is energized for the high portion.  This requires a curren"
						"t which is\n"
						"initially large to pull the solenoid armature into its ene"
						"rgized position,\n"
						"and then somewhat lower to hold it in for the remainder of"
						" the high\n"
						"phase of each PWM pulse."
		windowPosition           		[18.75 95.484 466.5 234.75]
		viewLimits               		[12.763 544.474 0 249.829]
		zoomFactor               		1.257
		screen                   		[1 1 1600 1200 1.333333333333333]
		treeNode                 		[0 3 0 0]
		firstTransition          		10
		firstJunction            		9
		viewObj                  		2
		machine                  		1
		decomposition            		CLUSTER_CHART
		firstData                		19
		chartFileNumber          		1
	}

	state {
		id                  		3
		labelString         		"energize_solenoid"
		position            		[246.977 4.632 274.789 203.11]
		fontSize            		10.482
		arrowSize           		9.317
		chart               		2
		treeNode            		[2 4 0 7]
		firstTransition     		11
		subviewer           		2
		type                		OR_STATE
		decomposition       		CLUSTER_STATE
	}

	state {
		id                  		4
		labelString         		"pull_in_current\n"
						"entry : v = Vs;"
		position            		[367.305 11.771 94.154 38.838]
		fontSize            		8.692
		arrowSize           		7.726
		chart               		2
		treeNode            		[3 0 0 5]
		subviewer           		2
		type                		OR_STATE
		decomposition       		CLUSTER_STATE
	}

	state {
		id                  		5
		labelString         		"regulate_hold_current"
		position            		[311.41 58.499 200.855 144.726]
		fontSize            		10.123
		arrowSize           		8.998
		chart               		2
		treeNode            		[3 6 4 0]
		firstTransition     		15
		subviewer           		2
		type                		OR_STATE
		decomposition       		CLUSTER_STATE
	}

	state {
		id                  		6
		labelString         		"freewheel\n"
						"entry: v = -(i > 0)*Vd;\n"
						"during: v = -(i > 0)*Vd;"
		position            		[349.073 84.626 110.096 42.369]
		fontSize            		8.692
		arrowSize           		7.726
		chart               		2
		treeNode            		[5 0 0 8]
		subviewer           		2
		type                		OR_STATE
		decomposition       		CLUSTER_STATE
	}

	state {
		id                  		7
		labelString         		"solenoid_off\n"
						"entry : v = -(i > 0)*Vz;\n"
						"during: v = -(i > 0)*Vz;"
		position            		[39.721 99.855 114.33 57.974]
		chart               		2
		treeNode            		[2 0 3 0]
		subviewer           		2
		type                		OR_STATE
		decomposition       		CLUSTER_STATE
	}

	state {
		id                  		8
		labelString         		"hold/\n"
						"entry : v = Vs;"
		position            		[352.791 153.6 104.052 39.151]
		fontSize            		8.692
		arrowSize           		7.726
		chart               		2
		treeNode            		[5 0 6 0]
		subviewer           		2
		type                		OR_STATE
		decomposition       		CLUSTER_STATE
	}

	junction {
		id         		9
		position   		[64.5252 48.1225 8.1527]
		arrowSize  		9.317
		chart      		2
		linkNode   		[2 0 0]
		subviewer  		2
		type       		CONNECTIVE_JUNCTION
	}

	transition {
		id             		10
		labelString    		"{ ton = 0; }"
		labelPosition  		[42.737 13.836 43.29 13.198]
		arrowSize      		9.317
		src {
			intersection		[0 0 0 0 35.4704 22.626 0 0]
		}
		dst {
			id          		9
			intersection		[0 -0.7071 -0.7071 -1 58.7604 42.3577 0 0]
		}
		midPoint       		[44.335 29.1709]
		chart          		2
		linkNode       		[2 0 13]
		dataLimits     		[35.47 58.76 22.626 42.358]
		subviewer      		2
	}

	transition {
		id             		11
		labelPosition  		[340.264 29.471 7.529 15.084]
		fontSize       		10.123
		arrowSize      		7.726
		src {
			intersection		[0 0 0 0.7937 334.3221 29.2252 0 0]
		}
		dst {
			id          		4
			intersection		[4 -1 0 0.5409 367.3046 29.6002 0 0]
		}
		midPoint       		[347.4153 29.4697]
		chart          		2
		linkNode       		[3 0 12]
		dataLimits     		[334.322 367.305 27.282 31.918]
		subviewer      		2
	}

	transition {
		id             		12
		labelString    		"[ i >= Ipull ]"
		labelPosition  		[472.841 23.25 46.113 13.198]
		fontSize       		8.692
		arrowSize      		8.998
		src {
			id          		4
			intersection		[2 1 0 0.5635 461.4587 33.6559 0 0]
		}
		dst {
			id          		5
			intersection		[1 0 -1 0.8145 475.0089 58.4986 0 0]
		}
		midPoint       		[470.5718 37.9339]
		chart          		2
		linkNode       		[3 11 0]
		dataLimits     		[461.459 477.708 33.656 58.499]
		subviewer      		2
	}

	transition {
		id             		13
		labelString    		"{ toff = ton + duty_cycle*Tpwm/100; }"
		labelPosition  		[81.006 32.804 151.514 13.198]
		arrowSize      		9.317
		src {
			id          		9
			intersection		[0 1 -0.004 -1 72.6778 48.0898 0 0]
		}
		dst {
			id          		3
			intersection		[4 -1 0 0.7861 246.977 48.0802 0 0]
		}
		midPoint       		[158.6542 48.0014]
		chart          		2
		linkNode       		[2 10 14]
		dataLimits     		[72.678 246.977 45.285 50.875]
		subviewer      		2
	}

	transition {
		id             		14
		labelString    		"[ t >= ton ]"
		labelPosition  		[74.28 65.436 43.29 13.198]
		fontSize       		8.935
		arrowSize      		9.317
		src {
			id          		7
			intersection		[1 0 -1 0.2184 64.6956 99.855 0 0]
		}
		dst {
			id          		9
			intersection		[0 0.013 0.9999 -1 64.6308 56.2745 0 0]
		}
		midPoint       		[64.7989 82.0786]
		chart          		2
		linkNode       		[2 13 16]
		dataLimits     		[61.957 67.547 56.275 99.855]
		subviewer      		2
	}

	transition {
		id             		15
		labelPosition  		[483.108 101.239 7.529 15.084]
		fontSize       		10.123
		arrowSize      		7.726
		src {
			intersection		[0 0 0 0.2374 488.9331 100.8743 0 0]
		}
		dst {
			id          		6
			intersection		[2 1 0 0.4033 459.1695 101.7139 0 0]
		}
		midPoint       		[477.5206 101.4216]
		chart          		2
		linkNode       		[5 0 17]
		dataLimits     		[459.17 488.933 99.396 104.032]
		subviewer      		2
	}

	transition {
		id             		16
		labelString    		"[ t > toff ]\n"
						"{ ton += Tpwm;}"
		labelPosition  		[172.196 124.281 63.052 24.512]
		src {
			id          		3
			intersection		[4 -1 0 0.424 246.977 121.6148 0 0]
		}
		dst {
			id          		7
			intersection		[2 1 0 0.3888 154.0514 122.3967 0 0]
		}
		midPoint       		[202.7548 122.0312]
		chart          		2
		linkNode       		[2 14 0]
		dataLimits     		[154.051 246.977 119.997 124.797]
		subviewer      		2
	}

	transition {
		id             		17
		labelString    		"[ i <= Ihold - deltai ]"
		labelPosition  		[319.335 133.957 78.11 13.198]
		fontSize       		8.692
		arrowSize      		7.726
		src {
			id          		6
			intersection		[3 0 1 0.5428 399.4079 126.9953 0 0]
		}
		dst {
			id          		8
			intersection		[1 0 -1 0.4512 399.7429 153.6003 0 0]
		}
		midPoint       		[399.5085 134.9841]
		chart          		2
		linkNode       		[5 15 18]
		dataLimits     		[397.425 402.061 126.995 153.6]
		subviewer      		2
	}

	transition {
		id             		18
		labelString    		"[ i >= Ihold + deltai ]"
		labelPosition  		[422.551 132.271 79.992 13.198]
		fontSize       		8.692
		arrowSize      		7.726
		src {
			id          		8
			intersection		[1 0 -1 0.6198 417.2841 153.6 0 0]
		}
		dst {
			id          		6
			intersection		[3 0 1 0.3804 417.2841 126.995 0 0]
		}
		midPoint       		[417.2841 143.8339]
		chart          		2
		linkNode       		[5 17 0]
		dataLimits     		[414.966 419.602 126.995 153.6]
		subviewer      		2
	}

	data {
		id                            		19
		name                          		"v"
		description                   		"applied solenoid voltage"
		linkNode                      		[2 0 20]
		scope                         		OUTPUT_DATA
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"volts"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		20
		name                          		"duty_cycle"
		description                   		"pulse-width modulation duty cycle"
		linkNode                      		[2 19 21]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"%"
		props {
			range {
				minimum		"0"
				maximum		"100"
			}
		}
	}

	data {
		id                            		21
		name                          		"ton"
		description                   		"absolute time at the beginning of each PWM cycle"
		linkNode                      		[2 20 22]
		scope                         		LOCAL_DATA
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"seconds"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		22
		name                          		"toff"
		description                   		"absolute time at which the current PWM cycle switches off"
		linkNode                      		[2 21 23]
		scope                         		LOCAL_DATA
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"seconds"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		23
		name                          		"Tpwm"
		description                   		"pulse-width modulation period"
		linkNode                      		[2 22 24]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		paramIndexForInitFromWorkspace		2
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"seconds"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		24
		name                          		"Ipull"
		description                   		"solenoid pull-in current, generates maximum force to move "
						"armature"
		linkNode                      		[2 23 25]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		paramIndexForInitFromWorkspace		1
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"A"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		25
		name                          		"Ihold"
		description                   		"solenoid hold current (maintain armature in energized posi"
						"tion)"
		linkNode                      		[2 24 26]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"A"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		26
		name                          		"deltai"
		description                   		"switch-mode current regulation error width"
		linkNode                      		[2 25 27]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		paramIndexForInitFromWorkspace		6
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"A"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		27
		name                          		"Vs"
		description                   		"power supply voltage"
		linkNode                      		[2 26 28]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		paramIndexForInitFromWorkspace		4
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"volts"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		28
		name                          		"Vz"
		description                   		"zener diode voltage"
		linkNode                      		[2 27 29]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		paramIndexForInitFromWorkspace		5
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"volts"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		29
		name                          		"Vd"
		description                   		"freewheel diode forward voltage drop"
		linkNode                      		[2 28 30]
		scope                         		PARAMETER_DATA
		initFromWorkspace             		1
		paramIndexForInitFromWorkspace		3
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"volts"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	data {
		id                            		30
		name                          		"i"
		description                   		"solenoid current"
		linkNode                      		[2 29 0]
		scope                         		INPUT_DATA
		machine                       		1
		dataType                      		"double"
		lastBuiltInDataType           		SF_DOUBLE_TYPE
		fixptType {
			bias    		0
			slope   		1
			exponent		0
			baseType		SF_INT16_TYPE
			lock    		0
		}
		dlgFixptMode                  		0
		units                         		"A"
		props {
			range {
				minimum		""
				maximum		""
			}
		}
	}

	instance {
		id     		31
		name   		"PWM_driver_ckt"
		machine		1
		chart  		2
	}

	target {
		id               		32
		name             		"sfun"
		description      		"Default S-Function target."
		customCode       		"#include <math.h>"
		codeFlags        		" debug=1 overflow=1 echo=1 telemetry=0 preservenames=0 prese"
						"rvenameswithparent=0 exportcharts=0 project=0 multiinstanced"
						"=0 statebitsets=0 databitsets=0 comments=1 initializer=1 iof"
						"ormat=1"
		machine          		1
		linkNode         		[1 0 0]
		checksumOld      		[1116176592 1155474684 613732500 3394403572]
	}
}
