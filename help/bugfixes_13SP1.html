<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
      
      
      <HTML>
	<HEAD>
	  <TITLE>Release Note Report</TITLE>
	</HEAD>
	<BODY>
          
          <H1>Major Bug Fixes for Release 13 with Service Pack 1</H1>
	  This document describes major bug fixes for the following:<br>          
          <UL>
          </li><li><a href="#Embedded+Target+for+TI+C6000+DSP">Embedded Target for TI C6000 DSP</a></li><li><a href="#MATLAB+Compiler">MATLAB Compiler</a></li>
<li><a href="#MATLAB+Link+for+Code+Composer+Studio">MATLAB Link for Code Composer Studio</a></li>
<li><a href="#Model-Based+Calibration+Toolbox">Model-Based Calibration Toolbox</a></li>
<li><a href="#Real-Time+Workshop">Real-Time Workshop</a></li><li><a href="#Real-Time+Workshop+Embedded+Coder">Real-Time Workshop Embedded Coder</a></li><li> <a href="#SimMechanics">SimMechanics</a></li><li> <a href="#Simulink">Simulink</a></li> <li><a href="#Stateflow">Stateflow</a></li>

          </UL>


            <A NAME="Embedded+Target+for+TI+C6000+DSP"></A><H2>Embedded Target for TI C6000 DSP</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#All+DSP+Blockset+Blocks+Now+Have+TLC+Files+and+Generate+Code+Properly">All DSP Blockset Blocks Now Have TLC Files and Generate Code Properly</a><br>
<a href="#FIR_SYM+Block+Generates+Correct+Code+and+Results">FIR_SYM Block Generates Correct Code and Results</a><br>
<a href="#FIR_SYM+Block+Generates+Correct+Results+Under+Non-Zero+Initial+Conditions+and+Multichannel+Input+Mode">FIR_SYM Block Generates Correct Results Under Non-Zero Initial Conditions and Multichannel Input Mode</a><br>
<a href="#Special+Characters+Allowed+in+Board+Names">Special Characters Allowed in Board Names</a><br>
       
          
          <H3><A NAME="All+DSP+Blockset+Blocks+Now+Have+TLC+Files+and+Generate+Code+Properly"></A>All DSP Blockset Blocks Now Have TLC Files and Generate Code Properly</H3>
          <blockquote>All  blocks in the DSP Blockset now include TLC files and you can 
generate code for them. Note that blocks that do not include TLC files, 
such as blocks from other block sets, are not supported by Embedded Target 
for TI C6000 DSP.</blockquote>
          
          
          <H3><A NAME="FIR_SYM+Block+Generates+Correct+Code+and+Results"></A>FIR_SYM Block Generates Correct Code and Results</H3>
          <blockquote>Results from FIR_SYM block generated code block are now reliable. Fixes to 
the  variable initialization for the block solved the problem that existed 
in the earlier release.</blockquote>
          
          
          <H3><A NAME="FIR_SYM+Block+Generates+Correct+Results+Under+Non-Zero+Initial+Conditions+and+Multichannel+Input+Mode"></A>FIR_SYM Block Generates Correct Results Under Non-Zero Initial Conditions and Multichannel Input Mode</H3>
          <blockquote>Earlier versions of the Embedded Target for TI C6000 DSP returned 
incorrect answers when you used the FIR_SYM block with non-zero ICs and in 
multichannel input mode. This bug has been fixed in both simulation and 
code generation.                             </blockquote>

<H3><A NAME="Special+Characters+Allowed+in+Board+Names"></A>Special Characters Allowed in Board Names</H3>
<blockquote> The following special characters are now allowed in your CCS board name 
string. Previously, these characters caused various errors during code 
generation or may have corrupted your model Real-Time Workshop 
Options.  
<p>
, = % | ' " ; :<p> 
<p>
In particular, one board emulator has a comma in its default
board name which caused the problems to occur.<p>  

To avoid running into the board name problem, Embedded Target for TIC6000 
now replaces the special characters in board names with underscores, 
before it passes the board name to Real-Time Workshop, preventing the code 
generation or Real-Time Workshop options problems.
<p>
The Embedded Target for TI C6000 already handles spaces (a special, 
special character), which cause a 
similar problem. Spaces are replaced by underscores.  </blockquote>
          
          
            
            <A NAME="MATLAB+Compiler"></A><H2>MATLAB Compiler</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Compiling+Callback+Routines+with+Mixed+Case+Names+No+Longer+Gives+Run-Time+Errors">Compiling Callback Routines with Mixed Case Names No Longer Gives Run-Time Errors</a><br>
<a href="#Compiling+the+toc+Function+No+Longer+Produces+Run-Time+Errors">Compiling the toc Function No Longer Produces Run-Time Errors</a><br>
<br>
       
          
          <H3><A NAME="Compiling+Callback+Routines+with+Mixed+Case+Names+No+Longer+Gives+Run-Time+Errors"></A>Compiling Callback Routines with Mixed Case Names No Longer Gives Run-Time Errors</H3>
          <blockquote>In MATLAB Compiler 3.0 (Release 13), compiling callback routines with 
mixed case names on Windows platforms resulted in run-time errors.

This issue has been resolved in the MATLAB Compiler for Release 13 with 
Service Pack 1.</blockquote>
          
          
          <H3><A NAME="Compiling+the+toc+Function+No+Longer+Produces+Run-Time+Errors"></A>Compiling the toc Function No Longer Produces Run-Time Errors</H3>
          <blockquote>In some cases, compiling the <code>toc</code> function with MATLAB 
Compiler 3.0 (Release 13) would result in a run-time error 
stating "datenummx not found." This issue has been resolved in Release 13 
with Service Pack 1.</blockquote>

          <A NAME="MATLAB+Link+for+Code+Composer+Studio"></A><H2>MATLAB Link for Code Composer Studio</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#C5000+Processors+Now+Represent+Character+Data+Types+Correctly">C5000 Processors Now Represent Character Data Types Correctly</a><br>
<a href="#Code+Composer+remains+in+memory+after+an+Rtdx.Open+on+illegal+channel">Code Composer remains in memory after an Rtdx.Open on illegal channel</a><br>
<br>
<br>

         <H3><A NAME="C5000+Processors+Now+Represent+Character+Data+Types+Correctly"></A>C5000 Processors Now Represent Character Data Types Correctly</H3>
          <blockquote>C5000 processors now apply the correct data type mappings to character 
data types. The corrected mappings are:<p>
<ol>
<li><code>char</code>--now <code>signed char</code>
<li><code>signed char</code>--now <code>signed char</code>
<li><code>unsigned char</code>--<code>unsigned char</code>
</ol><p>

Note that the ASCII conversions remain constrained to values from 0 to 127
</blockquote>
          
          
          <H3><A NAME="Code+Composer+remains+in+memory+after+an+Rtdx.Open+on+illegal+channel"></A>Code Composer remains in memory after an Rtdx.Open on illegal channel</H3>
          <blockquote>Normally, if CCS is invisible and you delete all existing links, the CCS 
task (<code>cc_app.exe</code>) goes away.  Trying to open an illegal RTDX 
channel seems to prevent CCS from closing.

This problem occurs if you try to open an unrecogized RTDX channel. For 
the RTDX open operation to succeed, the channel must exist in the most 
recently downloaded version of the program file.  If you attempt to open 
an illegal channel, MATLAB generates a normal error message and you do not 
encounter problems using the link.  However, after you close the link, 
<code>cc_app.exe</code> remains in memory.

To avoid this problem, be sure you have loaded the correct program file 
and avoid attempts to open illegal channels.  If you do open an illegal 
channel by mistake, start the Microsoft Windows Task Manager and end the 
process <code>cc_app.exe</code>.</blockquote>
          

            <A NAME="Model-Based+Calibration+Toolbox"></A><H2>Model-Based Calibration Toolbox</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Applying+design+constraints+when+no+constraints+are+present">Applying design constraints when no constraints are present</a><br>
<a href="#CAGE+strategy+editor+appears+off-screen">CAGE strategy editor appears off-screen</a><br>
<a href="#CAGE+table+auto-renaming">CAGE table auto-renaming</a><br>
<a href="#Hiding+models+in+multi-model+trade+off+studies">Hiding models in multi-model trade off studies</a><br>
<a href="#Linked+models+in+CAGE+can+be+used+in+trade+off+studies">Linked models in CAGE can be used in trade off studies</a><br>
<a href="#Model+Browser+projects+save+correctly+while+other+windows+are+open">Model Browser projects save correctly while other windows are open</a><br>
<a href="#Name+clashes+when+importing+a+variable+dictionary">Name clashes when importing a variable dictionary</a><br>
<a href="#NaN%27s+in+exported+data+appear+as+%2265535%22+in+Excel">NaN's in exported data appear as "65535" in Excel</a><br>
<a href="#Simultaneously+closing+the+Design+Editor+and+Model+Browser+causes+an+error">Simultaneously closing the Design Editor and Model Browser causes an error</a><br>
<a href="#Updating+of+variable+dictionary+list">Updating of variable dictionary list</a><br>
<a href="#Variable+ranges+for+multi-model+trade+offs">Variable ranges for multi-model trade offs</a><br>
<br>
       
          
          <H3><A NAME="Applying+design+constraints+when+no+constraints+are+present"></A>Applying design constraints when no constraints are present</H3>
          <blockquote>The Constraint Manager dialog in the Design Editor will now work correctly 
when there are no constraints defined.  Previously, pressing OK with no 
constraints caused an error.</blockquote>
          
          
          <H3><A NAME="CAGE+strategy+editor+appears+off-screen"></A>CAGE strategy editor appears off-screen</H3>
          <blockquote>Selecting "Graphical Strategy Editor" from the Feature menu in CAGE will 
now bring up the strategy editor on-screen.  Previously the diagram for 
editing appeared partly off-screen.</blockquote>
          
          
          <H3><A NAME="CAGE+table+auto-renaming"></A>CAGE table auto-renaming</H3>
          <blockquote>When tables are created as a result of importing a strategy diagram in 
CAGE, their names are forced to be unique.  This is now done so that the 
names Table, Table_1, Table_2, etc are created.  Previously the names 
Table, Table_1, Table_1_1, etc were created.</blockquote>
          
          
          <H3><A NAME="Hiding+models+in+multi-model+trade+off+studies"></A>Hiding models in multi-model trade off studies</H3>
          <blockquote>Hiding a model in a multi-model trade off will now correctly hide that 
model for every available operating point in that trade off. Previously, 
only the model for a particular operating point was hidden. </blockquote>
          
          
          <H3><A NAME="Linked+models+in+CAGE+can+be+used+in+trade+off+studies"></A>Linked models in CAGE can be used in trade off studies</H3>
          <blockquote>You can now use models that have other models as inputs in trade off 
studies in CAGE.  Previously, attempting to add these models to a trade 
off view would cause an error.</blockquote>

          
          <H3><A NAME="Model+Browser+projects+save+correctly+while+other+windows+are+open"></A>Model Browser projects save correctly while other windows are open</H3>
          <blockquote>In previous versions, projects that were saved while a sub-window such as 
the Design Editor or Stepwise was open would not save any changes that had 
been made in these windows.  The Model Browser now correctly shuts down 
any sub-windows to ensure that all data is updated before saving.</blockquote>
          
          
          <H3><A NAME="Name+clashes+when+importing+a+variable+dictionary"></A>Name clashes when importing a variable dictionary</H3>
          <blockquote>When you import a variable dictionary into CAGE, if there are items with 
the same name in the current variable dictionary and the imported one you 
are given the option of over-writing the current ones or renaming the new 
items.  Previously the items were imported, resulting in multiple 
variables with the same name.</blockquote>
          
          
          <H3><A NAME="NaN%27s+in+exported+data+appear+as+%2265535%22+in+Excel"></A>NaN's in exported data appear as "65535" in Excel</H3>
          <blockquote>You can now correctly export data that contains NaN values into Excel.  In 
previous versions these were converted by Excel to be "65535".</blockquote>
          
          
          <H3><A NAME="Simultaneously+closing+the+Design+Editor+and+Model+Browser+causes+an+error"></A>Simultaneously closing the Design Editor and Model Browser causes an error</H3>
          <blockquote>In previous versions, if you closed the Design Editor and immediately 
closed the Model Browser while the Design Editor was still closing down, 
an error occurred.  This no longer happens.</blockquote>
          
          
          <H3><A NAME="Updating+of+variable+dictionary+list"></A>Updating of variable dictionary list</H3>
          <blockquote>When a variable is also an input to a formula and its name is edited, the 
description of the formula in the variable dictionary's list also updates 
to correctly show the new name.  Previously the old name was displayed 
until a refresh was forced by performing another action.</blockquote>
          
          
          <H3><A NAME="Variable+ranges+for+multi-model+trade+offs"></A>Variable ranges for multi-model trade offs</H3>
          <blockquote>The ranges of variables that are created as part of the process of 
importing models to multi-model trade off are now set up to be the ranges 
of the source models.  Previously the variable ranges were set to [-1 1].</blockquote>

            <A NAME="Real-Time+Workshop"></A><H2>Real-Time Workshop</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Altering+Execution+Order+in+Subsystem+Copies+Caused+Segmentation+Violation">Altering Execution Order in Subsystem Copies Caused Segmentation Violation</a><br>
<a href="#Block+I%2FO+Optimization">Block I/O Optimization</a><br>
<a href="#C%2B%2B+Compatibility+for+Stateflow+and+Real-Time+Workshop">C++ Compatibility for Stateflow and Real-Time Workshop</a><br>
<a href="#Code+for+Logic+Block+with+Single+Input">Code for Logic Block with Single Input</a><br>
<a href="#Code+Generation+Failure+for+Relational+Operator+Block">Code Generation Failure for Relational Operator Block</a><br>
<a href="#Code+Generation+for+Data+Store+Memory+Blocks">Code Generation for Data Store Memory Blocks</a><br>
<a href="#Code+Generation+for+Wide+State+Input+Signals">Code Generation for Wide State Input Signals</a><br>
<a href="#Code+Generation+from+a+Block+Whose+Output+Is+Connected+to+a+Subsystem+Input">Code Generation from a Block Whose Output Is Connected to a Subsystem Input</a><br>
<a href="#Data+Store+Read+Block+Generates+Valid+Code+When+Expression+Folding+Is+Enabled">Data Store Read Block Generates Valid Code When Expression Folding Is Enabled</a><br>
<a href="#Discrete+States+in+a+For%2FWhile+Subsystem+Reset+Correctly">Discrete States in a For/While Subsystem Reset Correctly</a><br>
<a href="#Early+Termination+of+Real-Time+Workshop+or+Stateflow+S-Function+Builds+Issue+Fixed+RTW">Early Termination of Real-Time Workshop or Stateflow S-Function Builds Issue Fixed</a><br>
<a href="#Expression+Folding+and+Selector+Blocks">Expression Folding and Selector Blocks</a><br>
<a href="#Generated+Code+for+Switch+Blocks+with+Wide+Fixed-Point+Inputs">Generated Code for Switch Blocks with Wide Fixed-Point Inputs</a><br>
<a href="#Include+System+Hierarchy+Numbers+in+Identifier+Option">Include System Hierarchy Numbers in Identifier Option</a><br>
<a href="#Look-Up+Table+2-D+Generated+Incorrect+Code+for+Repeated+Zeros+in+Breakpoints">Look-Up Table 2-D Generated Incorrect Code for Repeated Zeros in Breakpoints</a><br>
<a href="#Missing+Storage+Type+Qualifier+in+Generated+Code+for+Data+Store+Memory+Block">Missing Storage Type Qualifier in Generated Code for Data Store Memory Block</a><br>
<a href="#Multi-instanced+Stateflow+Library+Charts+Now+Generate+Correct+Code">Multi-instanced Stateflow Library Charts Now Generate Correct Code</a><br>
<a href="#Multiport+Switch+Block+Generates+Correct+Code+for+Wide+Inputs">Multiport Switch Block Generates Correct Code for Wide Inputs</a><br>
<a href="#Name+Conflicts+Between+Multiple+Models+for+Constant+Parameters">Name Conflicts Between Multiple Models for Constant Parameters</a><br>
<a href="#New+-w+TLC+Command+Line+Flag+to+Conserve+Memory+During+Lexical+Analysis">New -w TLC Command Line Flag to Conserve Memory During Lexical Analysis</a><br>
<a href="#No+Name+Clashing+of+Function-call+Arguments+of+Reusable+Subsystems+and+Global+Identifiers">No Name Clashing of Function-call Arguments of Reusable Subsystems and Global Identifiers</a><br>
<a href="#Non-reusable+Functions+for+Subsystem+Library+Links+No+Longer+Mangle+Function+Names+Unnecessarily">Non-reusable Functions for Subsystem Library Links No Longer Mangle Function Names Unnecessarily</a><br>
<a href="#Presetting+RTWOption+Values+in+a+Custom+System+Target+File">Presetting RTWOption Values in a Custom System Target File</a><br>
<a href="#RTW+TLC+Clear+Out+Global+TLC+Variables+After+Use">RTW TLC Clear Out Global TLC Variables After Use</a><br>
<a href="#Saturation+Characteristics+No+Longer+Required+in+rtw_info_hook+M-files">Saturation Characteristics No Longer Required in rtw_info_hook M-files</a><br>
<a href="#Spaces+in+TLC+Pathnames+No+Longer+Abort+Code+Generation">Spaces in TLC Pathnames No Longer Abort Code Generation</a><br>
<a href="#Subsystem+Functions+with+Incompatible+Argument+Types+in+Generated+Code">Subsystem Functions with Incompatible Argument Types in Generated Code</a><br>
<a href="#Support+for+N-d+%28N+%3E+2%29+Canonical+Parameters">Support for N-d (N > 2) Canonical Parameters</a><br>
<a href="#TLC+Builtin+Changes+to+Support+Parameter+Sharing+with+Simulink">TLC Builtin Changes to Support Parameter Sharing with Simulink</a><br>
<a href="#TLC+Compiler+Memory+Released+After+Code+Generation">TLC Compiler Memory Now Released After Code Generation</a><br>
<a href="#Tunable+Parameters+with+%22context-sensitive%22+Data+Type">Tunable Parameters with "context-sensitive" Data Type</a><br>
<a href="#Unreachable+Disable+Function+Code+for+Enabled+Subsystems">Unreachable Disable Function Code for Enabled Subsystems</a><br>
<br>
       
          
          <H3><A NAME="Altering+Execution+Order+in+Subsystem+Copies+Caused+Segmentation+Violation"></A>Altering Execution Order in Subsystem Copies Caused Segmentation Violation</H3>
          <blockquote>In Version 5.x, when a subsystem was copied and block execution order was altered in the copy or the original, a segmentation fault could result during code generation. This problem, which was associated with subsystem code reuse, has been fixed.</blockquote>
          
          
          <H3><A NAME="Block+I%2FO+Optimization"></A>Block I/O Optimization</H3>
          <blockquote>In previous releases, there was an inefficiency where sometimes block 
outputs were incorrectly defined as global rather than local. The code ran 
slower than necessary, but there were no inaccuracies or noticeable flaws 
as a result. This did not occur every time; it was dependent on the 
previous state of an internal register.

This issue is fixed, resulting in faster code in cases that were 
previously problematic.</blockquote>
          
          
          <H3><A NAME="C%2B%2B+Compatibility+for+Stateflow+and+Real-Time+Workshop"></A>C++ Compatibility for Stateflow and Real-Time Workshop</H3>
          <blockquote>C++ source files can now be included in Stateflow custom sources. These 
C++ source files can also be built by the Stateflow's RTW target. Please 
see the example "sf_cpp" for more details. In addition, you can now code S-functions in C++. See "sfundemos" and double-click "C++" for more details.</blockquote>
          
          
          <H3><A NAME="Code+for+Logic+Block+with+Single+Input"></A>Code for Logic Block with Single Input</H3>
          <blockquote>In Version 5.x, the code generated for a Logic block with a single 
vectorized input could needlessly occupy a superfluous <code>for</code> 
loop. This caused redundant (but still correct) computations. This problem 
has been fixed.</blockquote>
          
          
          <H3><A NAME="Code+Generation+Failure+for+Relational+Operator+Block"></A>Code Generation Failure for Relational Operator Block</H3>
          <blockquote>In Version 5.x, code generation can fail under certain conditions for the 
Relational Operator and MinMax blocks when expression folding is enabled and input to the Relational Operator block comes from a MinMax block. This has been fixed.</blockquote>
          
          
          <H3><A NAME="Code+Generation+for+Data+Store+Memory+Blocks"></A>Code Generation for Data Store Memory Blocks</H3>
          <blockquote>In Version 5.0, some models that contained Data Store Memory blocks could 
generate code that would not compile. This problem has been fixed.
</blockquote>
          
          
          <H3><A NAME="Code+Generation+for+Wide+State+Input+Signals"></A>Code Generation for Wide State Input Signals</H3>
          <blockquote>In certain block configurations, code generation and acceleration failed 
when wide state signals were emitted to a block. This could happen, for 
example, when an exported state port from an Integrator block fed into a 
Relay block. This was a regression in Version 5.0 and has been fixed.</blockquote>
          
          
          <H3><A NAME="Code+Generation+from+a+Block+Whose+Output+Is+Connected+to+a+Subsystem+Input"></A>Code Generation from a Block Whose Output Is Connected to a Subsystem Input</H3>
          <blockquote>Previously, an error occurred when expression folding was on and 
code was generated from a model that contained a block whose output was 
connected to a subsystem input. This problem only occurred for blocks 
that had expression folding switched off in their TLC file, as was the case for the Delay and Data Store Read blocks. This problem has been fixed.</blockquote>
          
          
          <H3><A NAME="Data+Store+Read+Block+Generates+Valid+Code+When+Expression+Folding+Is+Enabled"></A>Data Store Read Block Generates Valid Code When Expression Folding Is Enabled</H3>
          <blockquote>In Real-Time Workshop, the Data Store Read block could generate 
invalid code when expression folding was enabled. This has been remedied, 
by disallowing expression folding for that block.</blockquote>
          
          
          <H3><A NAME="Discrete+States+in+a+For%2FWhile+Subsystem+Reset+Correctly"></A>Discrete States in a For/While Subsystem Reset Correctly</H3>
          <blockquote>When a block with discrete states, such as a Unit Delay block, was placed
in a For or While Iterator Subsytem, the Initial Conditions of the states 
were not being set when the subsystem was called, in code generated by 
Real-Time Workshop. This is fixed.</blockquote>

<H3><A NAME="Early+Termination+of+Real-Time+Workshop+or+Stateflow+S-Function+Builds+Issue+Fixed+RTW"></A>Early Termination of Real-Time Workshop or Stateflow S-Function Builds Issue Fixed</H3>
<blockquote>Previously, pressing <b>CTRL-C</b> during a Real-Time Workshop build or 
Stateflow S-function build rendered the status window inoperable. This is 
now fixed.</blockquote>

          
          
          <H3><A NAME="Expression+Folding+and+Selector+Blocks"></A>Expression Folding and Selector Blocks</H3>
          <blockquote>In Version 5.0, with Expression folding on, incorrect code could be 
generated for a Selector block. This has been fixed.        </blockquote>
          
          
          <H3><A NAME="Generated+Code+for+Switch+Blocks+with+Wide+Fixed-Point+Inputs"></A>Generated Code for Switch Blocks with Wide Fixed-Point Inputs</H3>
          <blockquote>In Version 5.0, a bug caused Switch blocks that received wide input 
signals containing fixed-point data to compute the entire input vector for each element of output vector in the Real-Time Workshop generated code. The output was correctly computed, but assignments were made redundantly. This inefficiency has been eliminated, so that now the input vector is 
calculated only once.</blockquote>          
          
          <H3><A NAME="Include+System+Hierarchy+Numbers+in+Identifier+Option"></A>Include System Hierarchy Numbers in Identifier Option</H3>
          <blockquote>In Version 5.0, the <B>Include system hierarchy numbers in 
Identifier</B> option in the <B>General code appearance options</B> pane was having no effect on code appearance. This has been fixed, so that when the option is checked, identifiers include system hierarchy numbers.</blockquote>
          
          
          <H3><A NAME="Look-Up+Table+2-D+Generated+Incorrect+Code+for+Repeated+Zeros+in+Breakpoints"></A>Look-Up Table 2-D Generated Incorrect Code for Repeated Zeros in Breakpoints</H3>
          <blockquote>If the column breakpoints in a Look-Up Table 2-D block had repeated zeros, 
Real-Time Workshop would generate incorrect code in some circumstances.  
This has been corrected. A remaining limitation is that the number and 
position of zeros cannot change when breakpoints are tuned, or incorrect 
results will be obtained. To avoid this limitation, do not use repeated 
zeros in lookup tables when the number or position of zeros could change 
while the real-time code is running.

</blockquote>
          
          
          <H3><A NAME="Missing+Storage+Type+Qualifier+in+Generated+Code+for+Data+Store+Memory+Block"></A>Missing Storage Type Qualifier in Generated Code for Data Store Memory Block</H3>
          <blockquote>In Version 5.0, if RTW Storage Class for a Data Store Memory block was specified as non-Auto, and a non-empty Storage Type Qualifier (e.g., <code>volatile</code>) was entered into its block parameter dialog, the generated code would not contain the specified Storage Type Qualifier.

The problem has been fixed in Version 5.1. Now the generated code will contain the correct user input of Storage Class and Type Qualifier in all circumstances.</blockquote>

<h3><A NAME="Multi-instanced+Stateflow+Library+Charts+Now+Generate+Correct+Code"</a>Multi-instanced Stateflow Library Charts Now Generate Correct Code</h3><blockquote>Starting Release 12.1, when a Stateflow library chart was instanced more than once in a model, and when that chart has multiple function-call output events, sometimes the generated code would not compile. One workaround, in Version 5.x of Real-Time Workshop, was to set the <code>RTW System Code</code> to <code>Function</code> on the <b>subsystem parameters</b> dialog for each of the connected function-call subsystems. This problem has now been fixed and the workaround is no longer necessary.
</blockquote>
   
          <H3><A NAME="Multiport+Switch+Block+Generates+Correct+Code+for+Wide+Inputs"></A>Multiport Switch Block Generates Correct Code for Wide Inputs</H3>
          <blockquote>In earlier releases, under certain conditions a Multiport switch with a 
scalar control port input and wide vector data inputs would cause code 
generation to fail. This is fixed.</blockquote>
          
          
          <H3><A NAME="Name+Conflicts+Between+Multiple+Models+for+Constant+Parameters"></A>Name Conflicts Between Multiple Models for Constant Parameters</H3>
          <blockquote>When code generated from multiple models is integrated together,
the names of the variables corresponding to constant parameters in the 
models can conflict.  This problem has been fixed by putting constant 
parameters into a structure that is (by default) named uniquely for each 
model.
</blockquote>

<H3><A NAME="New+-w+TLC+Command+Line+Flag+to+Conserve+Memory+During+Lexical+Analysis"></A>New -w TLC Command Line Flag to Conserve Memory During Lexical Analysis</H3>
<blockquote>To save memory when the Target Language Compiler parses large 
<code>model.rtw</code> files, you can now redirect the lexical analysis 
phase to a text window. This feature is controlled by the <code>-w</code> 
flag on the TLC command line. Doing this prevents large files from being 
read into memory in one piece. 
<p>
By default, this windowing feature is on. You can turn windowing off 
(reverting to the old behavior) by passing <code>-w0</code> (zero) to TLC. The 
<code>-w1</code> TLC command flag turns windowing on.</blockquote>                  
          
                    
          <H3><A NAME="No+Name+Clashing+of+Function-call+Arguments+of+Reusable+Subsystems+and+Global+Identifiers"></A>No Name Clashing of Function-call Arguments of Reusable Subsystems and Global Identifiers</H3>
          <blockquote>In Version 5.0, it was possible for the names of the function-call 
arguments of reusable subsystems to clash with one another, as well as 
with global identifiers. Real-Time Workshop now ensures the names of the 
arguments are unique with respect to one another and do not duplicate 
global identifiers.</blockquote>
          
          
          <H3><A NAME="Non-reusable+Functions+for+Subsystem+Library+Links+No+Longer+Mangle+Function+Names+Unnecessarily"></A>Non-reusable Functions for Subsystem Library Links No Longer Mangle Function Names Unnecessarily</H3>
          <blockquote>Previously, a library-reference atomic subsystem with code generation 
options set to "Function" and "Use Subsystem Name" would use the reference 
name for all instances. This created symbol clashes that Real-Time 
Workshop would resolve via inconsistent name mangling, which created 
tracibility problems. Such subsystems now use their instance name.
</blockquote>

          <H3><A NAME="Presetting+RTWOption+Values+in+a+Custom+System+Target+File"></A>Presetting RTWOption Values in a Custom System Target File</H3>
          <blockquote>In Version 5.0, if you attempted to preset the Common RTW options 
value from a system target file, sometimes errors resulted and sometimes 
nothing happened. This was a regression from  Version 4.1 and has been 
fixed.</blockquote>          
          
          <H3><A NAME="RTW+TLC+Clear+Out+Global+TLC+Variables+After+Use"></A>RTW TLC Clear Out Global TLC Variables After Use</H3>
          <blockquote>RTW TLC files now clear out relevant global TLC variables as they are done 
being used during the code generation phase. This reduces TLC memory usage 
which is helpful in reducing overall memory usage of the MATLAB process. 
This does not affect the C code that is generated from RTW. </blockquote>
          
          
          <H3><A NAME="Saturation+Characteristics+No+Longer+Required+in+rtw_info_hook+M-files"></A>Saturation Characteristics No Longer Required in rtw_info_hook M-files</H3>
          <blockquote>Version 5.01 of Real-Time Workshop derives C-language implementation 
information for the current target from "hook files" 
(<code>&lt;target&gt;_rtw_info_hook.m</code>). In that release, it was 
necessary to specify information on saturation, as seen in the following 
code snippet:
<pre>

 case 'cImplementation'
  
  % specify various C-language information

  value.ShiftRightIntArith   = true;
  value.Float2IntSaturates   = false;
  value.IntPlusIntSaturates  = false;
  value.IntTimesIntSaturates = false;

</pre>
<p>The Saturation information fields are no longer required. You can 
therefore simplify this code to:
<pre>

 case 'cImplementation'
  
  % specify various C-language information
  
  value.ShiftRightIntArith = true;

</pre>
<p>For more information type <code>'edit example_rtw_info_hook.m'</code> 
in MATLAB.
</blockquote>
          
          
          <H3><A NAME="Spaces+in+TLC+Pathnames+No+Longer+Abort+Code+Generation"></A>Spaces in TLC Pathnames No Longer Abort Code Generation</H3>
          <blockquote>In Version 5.x, if a TLC directory's pathname includes a space, Real-Time 
Workshop code generation can fail due to <code>-I</code> flags being 
parsed incorrectly. This problem has been fixed.
</blockquote>
          
          
          <H3><A NAME="Subsystem+Functions+with+Incompatible+Argument+Types+in+Generated+Code"></A>Subsystem Functions with Incompatible Argument Types in Generated Code</H3>
          <blockquote>Starting in Version 5.0, an inlined atomic subsystem within a reused 
atomic subsystem that received a discontinuous input signal could generate 
code with incompatible types in certain cases. This has been corrected in 
Version 5.1.
</blockquote>
          
          
          <H3><A NAME="Support+for+N-d+%28N+%3E+2%29+Canonical+Parameters"></A>Support for N-d (N > 2) Canonical Parameters</H3>
          <blockquote>In Version 5.x, when Real-Time Workshop generated code for n-d canonical parameters (e.g., N-D Lookup blocks), only the first two dimensions of the parameter were used to calculate the size of the argument to a reusable function. In rare cases this could prevent such functions from being reusable. This has been fixed, so that all of the dimensions are now used to compute the size of the argument.
</blockquote> 

<H3><A NAME="TLC+Builtin+Changes+to+Support+Parameter+Sharing+with+Simulink"></A>TLC Builtin Changes to Support Parameter Sharing with Simulink</H3>
<blockquote><p>To support parameter sharing with Simulink, a new builtin
(<code>ISSLPRMREF</code>) has been added to TLC. It returns a Boolean
value indicating whether its argument is a reference to a Simulink parameter or not. Using this function can save memory and time during code generation. Here is an example of its usage:
<pre>
%if !ISSLPRMREF(param.Value) 
%assign param.Value = CAST("Real", param.Value) 
%endif 
</pre>

<p>In addition, the <code>GENERATE_FORMATTED_VALUE</code> builtin has a new
optional third argument, which is a Boolean that controls the expansion of parameters into text. If this argument is true, the parameter will be expanded to raw text before being written to disk. 

<p>Note that this will use much more memory than the default (which is FALSE) and would only be needed if the parameter text needs to be processed for some reason before being written to disk.</blockquote>



<H3><A NAME="TLC+Compiler+Memory+Released+After+Code+Generation"></A>TLC Compiler Memory Now Released After Code Generation</H3>
<blockquote>Memory used by the TLC compiler is now released after code generation. 
Previously, it had maintained memory caches, which had the effect of 
reducing available memory after the build.</blockquote>                  

<H3><A NAME=""></A></H3>
<blockquote></blockquote>                                    
          
          <H3><A NAME="Tunable+Parameters+with+%22context-sensitive%22+Data+Type"></A>Tunable Parameters with "context-sensitive" Data Type</H3>
          <blockquote><p>As part of our effort to unify our handling of floating-point and fixed-
point modeling, the way in which parameter data types are handled has been 
modified:
<ul>
<p><li>All tunable parameters with unspecified data type (i.e., data type 
is <code>double</code>) will now be treated as “context-sensitive”. That 
is, the data type used for these parameters will be determined by their 
usage in the model.
<p><li>All tunable parameters that have a non-double data type will be 
declared using the specified data type, and a run-time type cast will be 
added in the generated code as necessary.
<p><li>All inlined parameters (not tunable) will be treated as “context-
sensitive” (no change).
</ul>
<P>
<B>Backwards Compatibility:</B> It is possible that this change may create 
backwards compatibility problems, although we are not expecting these to 
be very frequent or significant.
<P>
The most likely problem case is where a tunable <CODE>double</CODE> 
parameter is used in a number of different "contexts" throughout a model. 
This is not permitted and an error message will be issued. However, it is 
worth noting that if this case were supported it would always result in 
the downcasting of parameters; the recommended solution would be for users 
to specify the parameter's data type to be something other than <CODE> 
double</CODE> in these cases regardless of this change.</blockquote>
          
          
          <H3><A NAME="Unreachable+Disable+Function+Code+for+Enabled+Subsystems"></A>Unreachable Disable Function Code for Enabled Subsystems</H3>
          <blockquote>Starting with Version 5.0, Real-Time Workshop was generating unreachable 
disable function code for enabled subsystems in single-rate parents. This 
caused the output of the generated code not to match simulation results. 
The disable function code for such enabled subsystems is now reachable.
</blockquote>


            
            <A NAME="Real-Time+Workshop+Embedded+Coder"></A><H2>Real-Time Workshop Embedded Coder</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#ASAP2+File+Generation+Failure+When+Using+Custom+Storage+Classes">ASAP2 File Generation Failure When Using Custom Storage Classes</a><br>
<a href="#Block+I/O+Optimization">Block I/O Optimization</a><br>
<a href="#Block+Reduction+for+Blocks+with+Output+Signal+of+non-Auto+Storage+Class">Block Reduction for Blocks with Output Signal of non-Auto Storage Class</a><br>
<a href="#Code+Generation+Failure+with+Masked+Subsystem+Parameters+of+Non-Auto+Storage+Class">Code Generation Failure with Masked Subsystem Parameters of Non-Auto Storage Class</a><br>
<a href="#Delay+Block+Code+Generation+with+Expression+Folding+Enabled">Delay Block Code Generation with Expression Folding Enabled</a><br>
<a href="#Fixed+Incompatibility+Between+Block+Reduction+and+Custom+Storage+Classes">Fixed Incompatibility Between Block Reduction and Custom Storage Classes</a><br>
<a href="#Generating+ERT+S-Function+with+Parameters+Having+Custom+Storage+Class">Generating ERT S-Function with Parameters Having Custom Storage Class</a><br>
<a href="#Improved+Code+Generation+via+Auto-Configuring+ERT+Targets">Improved Code Generation via Auto-Configuring ERT Targets</a><br>
<a href="#Initial+Value+of+Data+Store+Memory+Is+Now++Tunable">Initial Value of Data Store Memory Is Now  Tunable</a><br>
<a href="#Reduced+Blocks+That+Are+Connected+to+Merge+Block+Input">Reduced Blocks That Are Connected to Merge Block Input</a><br>
<a href="#Selecting+%22MAT-file+logging%22+Simultaneously+with+%22External+mode%22+or+%22Suppress+error+status%22">Selecting "MAT-file logging" Simultaneously with "External mode" or "Suppress error status"</a><br>
<a href="#Start+Function+for+Reusable+Stateflow+Charts">Start Function for Reusable Stateflow Charts</a><br>
<a href="#Subsystem+Build+When+Subsystem+I/O+Is+Fixed-Point+and+References+Simulink.Signal+Objects">Subsystem Build When Subsystem I/O Is Fixed-Point and References Simulink.Signal Objects</a><br>
<a href="#Type+Qualifiers+Supported+for+Data+with+Custom+Storage+Class">Type Qualifiers Supported for Data with Custom Storage Class</a><br>
<a href="#Use+of+Global+Variables+for+Block+Outputs">Use of Global Variables for Block Outputs</a><br>

<br>

         <H3><A NAME="ASAP2+File+Generation+Failure+When+Using+Custom+Storage+Classes">ASAP2 File Generation Failure When Using Custom Storage Classes</A></H3>
          <blockquote>Failures occurred in ASAP2 file generation when custom storage 
classes were used in the model. This problem has been fixed.</blockquote>

<H3><A NAME="">Block+I/O+Optimization</A>Block I/O Optimization</H3>
<blockquote><p>In previous releases, there was an inefficiency where sometimes block 
outputs were incorrectly defined as global rather than local. The code ran 
slower than necessary, but there were no inaccuracies or noticeable flaws 
as a result. This did not occur every time; it was dependent on the 
previous state of an internal register.

<p>This issue is fixed, resulting in faster code in cases that were 
previously problematic.</blockquote>
       
          
          <H3><A NAME="Block+Reduction+for+Blocks+with+Output+Signal+of+non-Auto+Storage+Class"></A>Block Reduction for Blocks with Output Signal of non-Auto Storage Class</H3>
          <blockquote>Block reduction is not performed for blocks that meet the following
conditions: (1) the storage class of the output signal is not set to
<code>Auto</code> and (2) the width of the signal entering the block's 
input port at its origin is not equal to the output port width. This fixes 
a problem where the width of the signal in generated code could differ, 
depending on whether or not Block reduction was enabled.
</blockquote>

          <H3><A NAME="Code+Generation+Failure+with+Masked+Subsystem+Parameters+of+Non-Auto+Storage+Class"></A>Code Generation Failure with Masked Subsystem Parameters of Non-Auto Storage Class</H3>
          <blockquote>Code generation failures occurred for models containing masked 
subsystems with fixed-point parameters having either a custom storage 
class, or any storage class other than <code>Auto</code>. Such failures 
occurred when generating the parameter tuning API (see "C API for 
Parameter Tuning" in the Real-Time Workshop documentation). This problem 
has been fixed.</blockquote>

<H3><A NAME="Delay+Block+Code+Generation+with+Expression+Folding+Enabled"></A>Delay Block Code Generation with Expression Folding Enabled</H3>
<blockquote>With expression folding enabled, it was possible that the code
generated for the Delay block could be invalid. This was a regression 
from Release 12.1 and has been corrected.</blockquote>

          <H3><A NAME="Fixed+Incompatibility+Between+Block+Reduction+and+Custom+Storage+Classes"></A>Fixed Incompatibility Between Block Reduction and Custom Storage Classes</H3>
          <blockquote>Code generation could fail with a segmentation fault when a model 
simultaneously contained custom storage classes and had the Block 
reduction option enabled. This bug has been fixed.
</blockquote>

<H3><A NAME="Generating+ERT+S-Function+with+Parameters+Having+Custom+Storage+Class">Generating ERT S-Function with Parameters Having Custom Storage Class</A></H3>
          <blockquote>Starting in Release 12.1, generation of S-functions with the ERT target could fail for models containing parameters with Custom storage class. This problem has been fixed.
</blockquote>

<H3><A NAME="Improved+Code+Generation+via+Auto-Configuring+ERT+Targets">Improved Code Generation via Auto-Configuring ERT Targets</A></H3>
<blockquote><p>Users of the ERT target need to supply a hook file 
(<code>ert_rtw_info_hook.m</code>) 
that specifies target-specific properties such as 
word sizes for standard C data types. If this hook file is not supplied, 
code generation uses host-based default values for these properties. These 
defaults will produce code that is correct when executed on the host, but 
which may produce incorrect results when deployed on the target 
hardware.</p>

<p>To address this issue and make it easier for you to customize a hook 
file that is optimized for your target hardware, Real-Time 
Workshop Embedded Coder now provides three variants of the ERT target.
These ERT targets are displayed in the System Target File Browser as:</p>

<ul>
<p><li> RTW Embedded Coder (no auto configuration): This target uses host-
based default values as described above.</li>
<p><li> RTW Embedded Coder (auto configures for optimized fixed-point 
code): To optimize for fixed-point code generation, select this target. If 
no hook file is found during the build process, this target 
displays a warning message and opens an example hook file  
 (<code>ert_rtw_info_hook.m</code>)into the MATLAB editor. You should 
customize the 
target word lengths and C language implementation behavior parameters in 
this file and save this file, as instructed by the warning message. Note 
that this target passes in the command 'optimized_fixed_point=1' to the 
build process, via the 'RTW make command' field of the Simulation 
Parameters dialog box. This in turn invokes the M-file 
<code>ert_config_opt.m</code>, 
which auto-configures the model. You can, if desired, customize the option 
settings in this file.</li>
<p><li> RTW Embedded Coder (auto configures for optimized floating-point 
code): To optimize for floating-point code generation, select this target. 
If no hook file is found during the build process, this target 
displays a warning message and opens an example hook file  
 (<code>ert_rtw_info_hook.m</code>)into the MATLAB editor. You should 
customize the 
target word lengths and C language implementation behavior parameters in 
this file and save this file, as instructed by the warning message. Note 
that this target passes in the command 'optimized_floating_point=1' to the 
build process, via the 'RTW make command' field of the Simulation 
Parameters dialog box. This in turn invokes the M-file 
<code>ert_config_opt.m</code>, 
which auto-configures the model. You can, if desired, customize the option 
settings in this file.</li>
</ul>
<p>Note that comments in the example <code>ert_rtw_info_hook.m</code> file 
provide 
appropriate settings for the following CPUs:</p>
<ul>
<p><li>32-bit floating-point: Motorola PPC, 683XX, Renesas (Hitachi) SH-
2/SH-3, Renesas (Mitsubishi) M32R, Intel x86 </li>
<p><li>32-bit fixed-point: TI C28xx, Infineon Tricore, ARM7 </li>
 <li>16-bit fixed-point: Motorola HC12, Infineon C166, TIC24xx, Renesas 
(Hitachi) H8S</li>
<p><li>8-bit fixed-point: Motorola HC08 </li>
</ul></blockquote>

         <H3><A NAME="Initial+Value+of+Data+Store+Memory+Is+Now++Tunable"></A>Initial Value of Data Store Memory Is Now Tunable</H3>
          <blockquote>The Initial value parameter of the Data Store Memory block is now a 
tunable parameter. In  previous releases, Initial value was statically 
initialized and therefore not tunable. This limitation has been removed.</blockquote>
          
<H3><A NAME="Reduced+Blocks+That+Are+Connected+to+Merge+Block+Input"></A>Reduced Blocks That Are Connected to Merge Block Input</H3>
<blockquote>Previously, if a block connected to an input of a Merge block inport is
reduced (e.g., removed by Block Reduction optimization), a segmentation 
fault occurred during code generation. To fix this problem, blocks 
connected to the inputs of Merge blocks are no longer reduced.</blockquote>

          <H3><A NAME="Selecting+%22MAT-file+logging%22+Simultaneously+with+%22External+mode%22+or+%22Suppress+error+status%22"></A>Selecting "MAT-file logging" Simultaneously with "External mode" or "Suppress error status"</H3>
          <blockquote>Errors could result when the "MAT-file logging" option was selected at the 
same time as either the  "Suppress error status" or "External mode" 
options. This problem has been fixed.
</blockquote>


<H3><A NAME="Start+Function+for+Reusable+Stateflow+Charts"></A>Start Function for Reusable Stateflow Charts</H3>
<blockquote>Real-Time Workshop Embedded Coder generated an invalid start function for 
Stateflow charts in reusable subsystems. Library charts have their start 
code called before the chart Instance code is run to initialize the 
pointers.  This caused null pointer exception segmentation faults. This 
problem has been fixed.</blockquote>


<H3><A NAME="Subsystem+Build+When+Subsystem+I/O+Is+Fixed-Point+and+References+Simulink.Signal+Objects"></A>Subsystem Build When Subsystem I/O Is Fixed-Point and References Simulink.Signal Objects</H3>
<blockquote>Code generation could fail when generating code from a subsystem 
if any of the subsystem's inputs or outputs were if fixed point data type 
and the signal name referenced a Simulink.Signal object with non-auto 
storage class. This problem has been fixed.</blockquote>

<H3><A NAME="Type+Qualifiers+Supported+for+Data+with+Custom+Storage+Class"></A>Type Qualifiers Supported for Data with Custom Storage Class</H3>
<blockquote>An access method has been added to custom storage classes to return the 
type qualifier (e.g., "const", "volatile" or "const volatile").  This 
information is used when generating temporary (local) variables to point 
to parameters or signals that correspond to a particular custom storage 
class.</blockquote>

<H3><A NAME="Use+of+Global+Variables+for+Block+Outputs"></A>Use of Global Variables for Block Outputs</H3>
<blockquote>Some block outputs that could have been declared as local variables were 
defined as global, non-reusable storage. This problem is fixed, 
improving code efficiency.</blockquote>
          


            <A NAME="SimMechanics"></A><H2>SimMechanics</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Code+Generation+When+Using+lcc">Code Generation When Using lcc</a><br>
<a href="#Model+Reinitialization+After+Simulation+Errors">Model Reinitialization After Simulation Errors</a><br>
<a href="#Physical+Modeling+XML+Import+for+Massless+Connectors">Physical Modeling XML Import for Massless Connectors</a><br>
<a href="#Update+Diagram+Option+Fix">Update Diagram Option Fix</a><br>


<br>

<H3><A NAME="Code+Generation+When+Using+lcc">Code Generation When Using lcc</A></H3>
<blockquote>An error occurred when using lcc to compile generated code.  This bug is 
now fixed.</blockquote>
              
          <H3><A NAME="Model+Reinitialization+After+Simulation+Errors">Model Reinitialization After Simulation Errors</A></H3>
          <blockquote>Restarting a model that had encountered an error during a previous 
simulation sometimes led SimMechanics to return warnings and zero results. 
Starting the model a third time reproduced the errors of the first 
simulation. This bug is now fixed.</blockquote>

        <H3><A NAME="Physical+Modeling+XML+Import+for+Massless+Connectors">Physical Modeling XML Import for Massless Connectors</A></H3>
          <blockquote>Previously, the Physical Modeling XML file import command, 
<code>import_physmod</code>, failed to generate a SimMechanics model from 
an XML file containing a massless connector Joint.  This bug is now fixed.</blockquote>

        <H3><A NAME="Update+Diagram+Option+Fix">Update Diagram Option Fix</A></H3>
          <blockquote>After successfully simulating a model and adding a new block that was not 
connected to the original machine, SimMechanics would sometimes crash when 
you selected Update Diagram.  This bug is now fixed.</blockquote>

            <A NAME="Simulink"></A><H2>Simulink</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Accumulator+Pattern+Output+in+a+Discontiguous+Wide+Signal">Accumulator Pattern Output in a Discontiguous Wide Signal</a><br>
<a href="#Block+Output+Buffer+Reuse">Block Output Buffer Reuse</a><br>
<a href="#Changing+a+Signal+Index">Changing a Signal Index</a><br>
<a href="#Compiling+Models+with+Inline+Parameters+Enabled">Compiling Models with Inline Parameters Enabled</a><br>
<a href="#Counting+of+Large+Numbers+of+Time+Steps">Counting of Large Numbers of Time Steps</a><br>
<a href="#Direct+Look-Up+Table+and+n-D+Icon">Direct Look-Up Table and n-D Icon</a><br>
<a href="#Early+Termination+of+Real-Time+Workshop+or+Stateflow+S-Function+Builds+Issue+Fixed">Early Termination of Real-Time Workshop or Stateflow S-Function Builds Issue Fixed</a><br>
<a href="#Fixed+rate_transition+S-Function">Fixed rate_transition S-Function</a><br>
<a href="#Hitting+Ctrl-S+Rapidly+Twice+In+Succession">Hitting Ctrl-S Rapidly Twice In Succession</a><br>
<a href="#Inappropriate+Bus+Warning+Message+Eliminated">Inappropriate Bus Warning Message Eliminated</a><br>
<a href="#Issue+Warnings+for+Initial+Output+Changes+Due+to+Conditional+Execution">Issue Warnings for Initial Output Changes Due to Conditional Execution</a><br>
<a href="#Logic+Block+with+Underspecified+Data+Type">Logic Block with Underspecified Data Type</a><br>
<a href="#Look-Up+Table+n-D+Spline+Interpolation+with+Linear+Extrapolation">Look-Up Table n-D Spline Interpolation with Linear Extrapolation</a><br>
<a href="#Model+Refresh+When+Scroll+Bars+Disappear">Model Refresh When Scroll Bars Disappear</a><br>
<a href="#NaN+Input+No+Longer+Freezes+Binary+Search+by+a+Table+Look-Up%2C+n-D++Block">NaN Input No Longer Freezes Binary Search by a Table Look-Up, n-D  Block</a><br>
<a href="#Rate+Transition+Between+0.1+and+0.3">Rate Transition Between 0.1 and 0.3</a><br>
<a href="#Rate+Transition+Block+with+Complex+Signals">Rate Transition Block with Complex Signals</a><br>
<a href="#sfun_nddirectlook+Block">sfun_nddirectlook Block</a><br>
<a href="#Sign+Block+Behavior+Change">Sign Block Behavior Change</a><br>
<a href="#Unified+Blocks+No+Longer+Cause+Segmentation+Violation">Unified Blocks No Longer Cause Segmentation Violation</a><br>
<br>
       
          
          <H3><A NAME="Accumulator+Pattern+Output+in+a+Discontiguous+Wide+Signal"></A>Accumulator Pattern Output in a Discontiguous Wide Signal</H3>
          <blockquote>In the previous release, updating a model containing a certain type of 
block  diagram pattern could cause a memory access (SEGV) error. Patterns 
that could cause this error typically consist of an accumulator 
pattern (e.g., a two-port Sum block with a feedback through a Unit Delay 
block) connected directly or indirectly along with other inputs to a Mux 
block whose output is connected to more than one block requiring 
contiguous signal input (i.e., blocks that require that all elements
of an input signal occupy adjacent locations in memory). This release 
fixes the problem.</blockquote>
          
          
          <H3><A NAME="Block+Output+Buffer+Reuse"></A>Block Output Buffer Reuse</H3>
          <blockquote>Under certain scenarios, Simulink 4.0 and later versions reused a block 
output data buffer when it should not have done so, thus corrupting data 
and resulting in invalid simulation and code generation results. This 
problem has been fixed.</blockquote>
          
          
          <H3><A NAME="Changing+a+Signal+Index"></A>Changing a Signal Index</H3>
          <blockquote>Depending on signals visible, there had been a possibility of corrupting a 
model by changing the index (the port number) of a signal. The new version 
fixes all known problems associated with changing the port number (index).</blockquote>
          
          
          <H3><A NAME="Compiling+Models+with+Inline+Parameters+Enabled"></A>Compiling Models with Inline Parameters Enabled</H3>
          <blockquote>Compiling certain models with Inline Parameters enabled previously caused 
segment violations. This release fixes the problem.</blockquote>
          
          
          <H3><A NAME="Counting+of+Large+Numbers+of+Time+Steps"></A>Counting of Large Numbers of Time Steps</H3>
          <blockquote>In Release 5.0 and 5.0.1, either continuous or fixed-step models could 
miscount steps when start time was large and/or step size was small. After 
around 10e8
steps, major steps could be skipped or the model could freeze due to a
limitation of the timing engine. The current fix increases the threshold
for this behavior to at least 10e12 major steps or more. A complete fix
is planned for a future release of Simulink.</blockquote>
          
          
          <H3><A NAME="Direct+Look-Up+Table+and+n-D+Icon"></A>Direct Look-Up Table and n-D Icon</H3>
          <blockquote>A fix is included for an icon initialization error in the Direct Look-Up 
Table, n-D block when the block is configured for column extraction from a 
2-D table when the table is an input to the block instead of a block 
parameter.  The error prevented correct simulation of models containing 
blocks configured as described above.</blockquote>

<H3><A NAME="Early+Termination+of+Real-Time+Workshop+or+Stateflow+S-Function+Builds+Issue+Fixed"></A>Early Termination of Real-Time Workshop or Stateflow S-Function Builds Issue Fixed</H3>
<blockquote>Previously, pressing <b>CTRL-C</b> during a Real-Time Workshop build or 
Stateflow S-function build rendered the status window inoperable. This is 
now fixed.</blockquote>
          
          
          <H3><A NAME="Fixed+rate_transition+S-Function"></A>Fixed rate_transition S-Function</H3>
          <blockquote>Calling the <code>rate_transition</code> s-function from command line to 
get checksums used to cause a SEGV. This bug has been fixed.</blockquote>

<H3><A NAME="Hitting+Ctrl-S+Rapidly+Twice+In+Succession"></A>Hitting Ctrl-S Rapidly Twice In Succession</H3>
<blockquote>Previously, there was a chance of causing a segmentation violation in the Simulink model editor by hitting the File/Save accelerator key (<b>Ctrl-S</b>) rapidly twice in succession. This has been fixed.</blockquote>
          
          
          <H3><A NAME="Inappropriate+Bus+Warning+Message+Eliminated"></A>Inappropriate Bus Warning Message Eliminated</H3>
          <blockquote>In previous releases, for models with not-loaded-not-visible likbrary link 
self-modifiable subsystems that contained a bus selector block, Simulink 
may have generated warning messages like

"Warning: Selected signal 'DCM' in TopSS/SS/Bus Selector1' originates from 
an unconnected source signal entering ..."

This has been fixed.</blockquote>
          
          
          <H3><A NAME="Issue+Warnings+for+Initial+Output+Changes+Due+to+Conditional+Execution"></A>Issue Warnings for Initial Output Changes Due to Conditional Execution</H3>
          <blockquote>When Constant/Initial Condition/Merge with IC not []/Unit Delay/
Discrete Integrator/Integrator is connected to Outport with IC == [],
and the Outport is inside a conditionally executed subsystem (e.g.,
Triggered, Enable, Trigger and Enable, Function Call, Action) and 
there's at least one block that inherits Execution Context from 
the subsystem output port (corresponding to Outport), Simulink may produce
different results than previous releases. In this case, you can issue an 
warning if you have

<p><code>set_param(model, 'CheckInitialOutput','on')</code> 

<p>This parameter is a never saved parameter and is off by default. 

<p>The warning message is as follows:

<p><code>"Warning: The initial output of 
Outport 'mdintg_ic_warn1/Triggered 
Subsystem/Out1' is set to [], which is undefined and may produce different 
results than the previous Simulink releases if 'mdintg_ic_warn1/Triggered 
Subsystem' is not triggered at t = 0. If you want output port 1 of 
Subsystem 'mdintg_ic_warn1/Triggered Subsystem' to have the same initial 
value as the Outport source, 'mdintg_ic_warn1/Triggered Subsystem/Discrete-
Time Integrator', please explicitly set this initial output value 
on 'mdintg_ic_warn1/Triggered Subsystem/Out1'."</code> 

</blockquote>
          
          
          <H3><A NAME="Logic+Block+with+Underspecified+Data+Type"></A>Logic Block with Underspecified Data Type</H3>
          <blockquote>Logic block sometimes froze Simulink during model update if its input or 
output signals had underspecified data types. This bug has been fixed.</blockquote>
          
          
          <H3><A NAME="Look-Up+Table+n-D+Spline+Interpolation+with+Linear+Extrapolation"></A>Look-Up Table n-D Spline Interpolation with Linear Extrapolation</H3>
          <blockquote>A sign error resulting in an incorrect slope calculation for below-range 
linear extrapolations from a spline-interpolated table has been found 
and fixed.  This only affected spline interpolation/extrapolation results 
and not the flat or linear interpolation/extrapolation results.</blockquote>
          
          
          <H3><A NAME="Model+Refresh+When+Scroll+Bars+Disappear"></A>Model Refresh When Scroll Bars Disappear</H3>
          <blockquote><p>There was a graphics refresh problem when the scroll bars on a model 
window disappear and simultaneously cause the display to scroll back to 
the origin. This could happen under many different circumstances, such as:
<ul>
<p><li>Deleting the bottom-right most block in a model while the window is 
scrolled over to view it.

<p><li>Zoom in on a model until the window scroll bars appear, and then 
enter a 
subsystem with window reuse set to on.
</ul>
<p>The previous work-around was to press Ctrl-D (Edit/Update Diagram).
</blockquote>
          
          
          <H3><A NAME="NaN+Input+No+Longer+Freezes+Binary+Search+by+a+Table+Look-Up%2C+n-D++Block"></A>NaN Input No Longer Freezes Binary Search by a Table Look-Up, n-D  Block</H3>
          <blockquote>A NaN input caused a binary search by a Table Look-Up, n-D block to fail 
to return on some platforms. This caused Simulink and any code generated by
Real-Time Workshop to freeze up with certain C compilers. This release
alters the binary search algorithm to return properly when NaN is 
encountered on IEEE-compliant platforms.</blockquote>
          
          
          <H3><A NAME="Rate+Transition+Between+0.1+and+0.3"></A>Rate Transition Between 0.1 and 0.3</H3>
          <blockquote>When transitioning from a block sampled at 0.1 to a block sampled at 0.3 
using the Rate Transition block, the following error occurs:

<p><code>Error reported by S-function 'rate_transition' in 
block 'untitled/Rate 
Transition':
The sample time of the output port 0.3s must be an integer multiple of the 
input port sample time 0.1s</code>

<p>This error is fixed.</blockquote>
          
          
          <H3><A NAME="Rate+Transition+Block+with+Complex+Signals"></A>Rate Transition Block with Complex Signals</H3>
          <blockquote><p>A problem with the Rate Transition block, when operating on a complex 
signal, has been fixed.

<p>Prior to this fix, the Rate Transition block could write into the wrong 
area of memory when operating on a complex signal. This problem could lead 
to segmentation faults and other errors.</blockquote>
          
          
          <H3><A NAME="sfun_nddirectlook+Block"></A>sfun_nddirectlook Block</H3>
          <blockquote>Previously, calling the sfun_nddirectlook block from the command line 
caused a SEGV. This 
bug has been fixed.</blockquote>
          
          
          <H3><A NAME="Sign+Block+Behavior+Change"></A>Sign Block Behavior Change</H3>
          <blockquote>If fixed-point logging is turned on, the Sign block does not do zero  
crossing detection regardless of whether zero-crossing detection is 
enabled for the block. This change makes the behavior of the Sign block 
consistant with that of other fixed-point-capable blocks that do zero-
crossing detection.                                                       </blockquote>
          
          
          <H3><A NAME="Unified+Blocks+No+Longer+Cause+Segmentation+Violation"></A>Unified Blocks No Longer Cause Segmentation Violation</H3>
          <blockquote>Unified blocks might causes segmentation violations if singnals input to 
these blocks are discontiguous and the discontiguous signals are also fed 
into other blocks that require contiguous signals. This has been fixed.</blockquote>

            <A NAME="Stateflow"></A><H2>Stateflow</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>

<a href="#Re-enabling+Disabled+Link+Subsystems+Containing+Link+Stateflow+Charts">Re-enabling Disabled Link Subsystems Containing Link Stateflow Charts</a><br>
<a href="#Model+Corruptions+Due+to+Self-referential+(Circular)+Link+Charts">Model Corruptions Due to Self-referential (Circular) Link Charts</a><br>
<a href="#lcc+C+Compiler+Fixed+to+Handle+Large+C+Files">lcc C Compiler Fixed to Handle Large C Files</a><br>
<a href="#Early+Termination+of+Real-Time+Workshop+or+Stateflow+S-Function+Builds+Issue+Fixed+SF">Early Termination of Real-Time Workshop or Stateflow S-Function Builds Issue Fixed</a><br>
<a href="#Number+of+Open+Truth+Table+Editors">Number of Open Truth Table Editors</a><br>
<a href="#Data+and+Events+Parented+by+Charts+Copied+by+Drag+and+Drop+Are+Now+Accessible+to+the+Stateflow+API">Data and Events Parented by Charts Copied by Drag and Drop Are Now Accessible to the Stateflow API</a><br>
<a href="#lcc+C+Compiler+No+Longer+Crashes+with+Very+Large+C+Files">lcc C Compiler No Longer Crashes with Very Large C Files</a><br>
<a href="#Disabling+a+Linked+Chart+While+Editing+the+Library+Chart">Disabling a Linked Chart While Editing the Library Chart </a><br>
<a href="#Custom+Code+for+an+RTW+Target+No+Longer+Included+Multiple+Times+in+Generated+Code">Custom Code for an RTW Target No Longer Included Multiple Times in Generated Code</a><br>
<a href="#Initializing+Stateflow+Data+from+Workspace+Variables+of+Logical+Type">Initializing Stateflow Data from Workspace Variables of Logical Type</a><br>
<a href="#Stateflow+Code+Generation+Works+on+the+Network+Directories+of+Windows+NT">Stateflow Code Generation Works on the Network Directories of Windows NT</a><br>
<a href="#Models+With+Linked+Library+Charts+No+Longer+Load+Slowly">Models With Linked Library Charts No Longer Load Slowly</a><br>
<a href="#Code+Generation+Speeded+Up">Code Generation Speeded Up</a><br>




<H3><A NAME="Re-enabling+Disabled+Link+Subsystems+Containing+Link+Stateflow+Charts">Re-enabling Disabled Link Subsystems Containing Link Stateflow Charts</A></H3>

<blockquote>Errors and model corruptions occurred when a library 
link for a subsystem containing linked Stateflow charts was disabled and 
later re-enabled. This is now fixed.</blockquote>


<H3><A NAME="Model+Corruptions+Due+to+Self-referential+(Circular)+Link+Charts">Model Corruptions Due to Self-referential (Circular) Link Charts</A></H3>

<blockquote>Copying and pasting a Stateflow chart from a library model into the same 
model created intra-library link charts. These links would sometimes turn 
into self-referential (circular) links causing model corruptions. The 
creation of these intra-library links is now disabled. Copying a library 
chart and pasting it into the same library 
model now creates a copy of the original chart instead of a library link 
to it.</blockquote>

<H3><A NAME="#lcc+C+Compiler+Fixed+to+Handle+Large+C+Files">lcc C Compiler Fixed to Handle Large C Files</a></H3>

<blockquote>
<p>Stateflow, by default, relies on the lcc C compiler to compile Stateflow-
generated code on a Microsoft Windows-based system. lcc version 2.4.1 
MathWorks patch 1.29 corrects a bug encountered when compiling very large 
C files.  

<p>This bug caused large Stateflow models to crash during simulation.  The 
bug in lcc was triggered by the number of relocations in the generated 
object file.  While this number is not directly related to the number of 
states, models exhibiting this problem usually had more than 500 states 
and generated C files in excess of 1MB.
  
<p>If you choose not to upgrade your version of lcc, you can use one of these 
possible workarounds:
<ol>

<p><li>Configure Stateflow to use a different C compiler.
     Use <code>mex -setup</code> from the MATLAB command line to choose another C compiler.

<p><li>Disable debugging.
     From the target menu select <b>Coder Options</b> and uncheck
     the debugging check box.

<p><li>Split large charts into multiple smaller charts.
</ol>
</blockquote>

<H3><A NAME="Early+Termination+of+Real-Time+Workshop+or+Stateflow+S-Function+Builds+Issue+Fixed+SF"></A>Early Termination of Real-Time Workshop or Stateflow S-Function Builds Issue Fixed</H3>
<blockquote>Previously, pressing <b>CTRL-C</b> during a Real-Time Workshop build or 
Stateflow S-function build rendered the status window inoperable. This is 
now fixed.</blockquote>


<H3><A NAME="Number+of+Open+Truth+Table+Editors">Number of Open Truth Table Editors</A></H3>
<blockquote></blockquote>

<H3><A NAME=""></A></H3>
<blockquote><p>In prior versions, the allowed number of open Truth Table editors was 
unlimited. This allowed users to consume an unlimited amount of memory in 
opening truth tables.

<p>In Stateflow 5.1.1, the maximum number of simultaneously open 
Truthtable editors is limited to 6. The oldest open editor is recycled 
when a seventh Truth Table editor is opened.   </blockquote>

<H3><A NAME="Data+and+Events+Parented+by+Charts+Copied+by+Drag+and+Drop+Are+Now+Accessible+to+the+Stateflow+API">Data and Events Parented by Charts Copied by Drag and Drop Are Now Accessible to the Stateflow API</A></H3>
<blockquote>Previously, when a Stateflow chart is copied from one model to another using drag and 
drop, instead of copy and paste with <b>Ctrl-C/Ctrl-V</b> or menu options, all the data and events parented by the new chart became inaccessible to the Stateflow API. This is fixed in Stateflow 5.1.1. </blockquote>

<H3><A NAME="lcc+C+Compiler+No+Longer+Crashes+with+Very+Large+C+Files">lcc C Compiler No Longer Crashes with Very Large C Files</A></H3>
<blockquote><p>By default, Stateflow uses the lcc C compiler to compile Stateflow- 
generated code on a Microsoft Windows-based system. lcc version 2.4.1 
MathWorks patch 1.29 corrects a bug encountered when compiling very large 
C files.

<p>The bug in lcc was triggered by the number of relocations in the generated 
object. It caused large Stateflow models to crash during simulation. While 
the number of relocations was not directly related to the number of 
states, models exhibiting this problem usually had more than 500 states 
and generated C files in excess of 1MB. 

<p>If you choose not to upgrade your version of lcc, you can use <i>one</i> of these 
possible workarounds: 
<ul>
<p><li>
Configure Stateflow to use a different C compiler. Use the <code>mex -setup</code> 
command in MATLAB to choose another C compiler. 

<p><li>Disable debugging. From the target menu select <b>Coder Options</b> and uncheck 
the debugging check box. 

<p><li>Split large charts into multiple smaller charts. 
</ul></blockquote>

<H3><A NAME="Disabling+a+Linked+Chart+While+Editing+the+Library+Chart">Disabling a Linked Chart While Editing the Library Chart </A></H3>
<blockquote>Previously, if a library link to a chart was disabled while the source chart was open 
for editing, the chart did not contain the latest contents (for example, 
port information) from the source library chart. This could cause a 
segmentation violation when the model is simulated. This is now fixed.</blockquote>

<H3><A NAME="Custom+Code+for+an+RTW+Target+No+Longer+Included+Multiple+Times+in+Generated+Code">Custom Code for an RTW Target No Longer Included Multiple Times in Generated Code</A></H3>
<blockquote>Previously, custom code entered for an RTW target for a model was included multiple 
times in the generated code if the model has linked charts from library 
models. This is fixed in Stateflow Coder 5.1.1.</blockquote>

<H3><A NAME="Initializing+Stateflow+Data+from+Workspace+Variables+of+Logical+Type">Initializing Stateflow Data from Workspace Variables of Logical Type</A></H3>
<blockquote>During RTW code generation, an error occurred during initialization of 
Stateflow data marked "Initialize from workspace", when the workspace data 
is of logical type. This is now fixed.</blockquote>

<H3><A NAME="Stateflow+Code+Generation+Works+on+the+Network+Directories+of+Windows+NT">Stateflow Code Generation Works on the Network Directories of Windows NT</A></H3>
<blockquote>Previouly, Stateflow code generation failed on the network directories of 
Windows NT. This was due to the failure of the underlying call to mkdir to 
create the code-generation directory. This is now fixed in Stateflow 5.1.1</blockquote>

<H3><A NAME="Models+With+Linked+Library+Charts+No+Longer+Load+Slowly">Models With Linked Library Charts No Longer Load Slowly</A></H3>
<blockquote>Previously, models containing linked library Stateflow charts loaded very 
slowly. In Stateflow 5.1.1 (Release 13SP1) the associated library models 
containing the source charts are loaded just-in-time for simulation and 
editing, resulting in faster load times.</blockquote>

<H3><A NAME="Code+Generation+Speeded+Up">Code Generation Speeded Up</A></H3>
<blockquote>Stateflow code generation has been speeded up so that it is faster than 
the same code generation in Release 12.1.

<p>One of the changes involved turning off the display of code generation 
messages.</blockquote>












	</BODY>
      </html>

