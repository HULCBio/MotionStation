<html><head><title>Parameter Tuning (Real-Time Workshop)</title>
<!-- $Revision: 1.2 $  $Date: 2000/04/19 20:15:08 $ -->
<!-- $Log: tuneprmhelp.html,v $
<!-- Revision 1.2  2000/04/19 20:15:08  jwu
<!-- This file was created from help/toolbox/rtw/tuneprmhelp.html (1.1)
<!--
<!-- Move help file into Simulink help area from RTW.
<!-- Related Records: 72713
<!-- Code Reviewer: johnd
<!--
<!-- Revision 1.1  1998/11/17  22:14:28  thornton
<!-- Initial revision
<!-- -->
<!-- DOCNAME: Real-Time Workshop -->
<!-- HEADSTUFF -->
<script language="Javascript">
</script>
</head>
<body bgcolor=#ffffff>
<!-- NAVBARTOP -->
<table border=0 width="100%" cellpadding=0 cellspacing=0><tr>
<td valign=baseline bgcolor="#9bd0e0">&nbsp;<font size=+2>Real-Time Workshop</font></td>
<td valign=baseline align=right bgcolor="#9bd0e0">&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../search1.html" target="_top">Search</a>&nbsp;&nbsp;&nbsp;&nbsp<a href="../../helpdesk.html" target="_top">Help Desk</a>&nbsp;</td>
</tr>
</table>


<!-- H1 --><a name="8302"></a><p><font size=+3>Parameter Tuning</font></p>
<a name="8605"></a><em>Parameter tuning</em> is a method of modifying a block parameter on-the-fly. <font face=times>Clicking the </font><strong>Tunable parameters</strong><font face=times> button opens </font><strong>RTW Tunable Parameters</strong><font face=times> dialog box. You can de-inline</font> any model parameter by placing its name in the <strong>Variable</strong> field and clicking <strong>Add</strong>. This effectively negates the <strong>Inline parameters</strong> check box for the variables you select. All other model parameters remain inlined.</p>
<a name="8303"></a>The purpose of the parameter tuning feature is two fold. In the generated code, it allows you to:</p>
<ul><a name="8212">
<li>Collapse all occurrences of a parameter to a single memory location.
</a><a name="8214">
<li>Interface parameters outside the Real-Time Workshop environment (i.e., hand written code).
</a></ul><a name="8216"></a>A parameter's storage class and storage type qualifier define how the memory is declared and referenced. Regardless of the attributes, parameters listed in the dialog box collapse to a single memory location.</p>
<a name="8220"></a>Conceptually, the meaning of the parameter attributes are the same for <a href="tuneprmhelp.html#8224">C</a> and <a href="tuneprmhelp.html#8449">Ada</a>, however, there are slight differences. </p>
<a name="8222"></a>Note that there are <a href="tuneprmlim.html">current limitations</a> to parameter tuning.</p>
<!-- H2 --><a name="8224"></a><p><font size=+2>C</font></p>
<!-- H3 --><a name="8227"></a><p><font size=+1>Variable Name</font></p>
<a name="8229"></a>Name of a MATLAB workspace variable; this must be a valid C variable.</p>
<!-- H3 --><a name="8231"></a><p><font size=+1>Storage Class</font></p>
<ul><a name="8233">
<li>Auto -- directs RTW to store the variable in a persistent data structure. Declaring parameters in this fashion is suitable for tuning parameters on-the-fly without regenerating or recompiling the generated code using a MathWorks supplied C-API. For more information on parameter tuning using the MathWorks C-API see <code><em>matlabroot</em></code><code>/rtw/c/src/pt_readme.txt</code>.
</a><a name="8368">
<li>ExportedGlobal -- declares a parameter as a global variable that can be accessed from outside the generated code.
</a><a name="8375">
<li>ImportedExtern -- declares the parameter as an extern. The parameter must declared outside the generated code.
</a><a name="8388">
<li>ImportedExternPointer -- declares the parameter as an extern pointer. The parameter must be declared outside the generated code.
</a></ul><!-- H3 --><a name="8246"></a><p><font size=+1>Storage Type Qualifier</font></p>
<a name="8248"></a>Prepend any string (for example, <code>const</code>) to the parameter declaration. Note the Real-Time Workshop does not check the string for syntax errors.</p>
<!-- H3 --><a name="8250"></a><p><font size=+1>Data Type and Initial Value</font></p>
<a name="8252"></a>A parameter's data type and initial value are inferred from the actual MATLAB workspace variable. For example, assume <code>Kp</code> is used in a gain block where</p>
<ul><pre><a name="8255"></a>Kp = int16(5);
</pre></ul>
<a name="8256"></a><code>Kp</code> is a signed 16-bit integer with an initial value of 5.</p>
<!-- H3 --><a name="8257"></a><p><font size=+1>Implicit Casting Rules</font></p>
<a name="8259"></a>The data type of a tunable parameter is enforced at all times. This includes forcing (typeless) <code>K=5</code> as double since MATLAB assumes all untyped data is of type double. There are two basic rules for implicit casting</p>
<a name="8262"></a><dl compact><dt>&nbsp;&nbsp;&nbsp;1<code></code>.</dt><dd>An upcast is always performed silently.
</dd></dl>
<a name="8263"></a><dl compact><dt>&nbsp;&nbsp;&nbsp;2<code></code>.</dt><dd>Downcasting is not allowed. This guarantees deterministic behavior 
between Simulink and the Real-Time Workshop.
</dd></dl>
<!-- H3 --><a name="8266"></a><p><font size=+1>Access to Parameter Tuning Dialog Box via M-code</font></p>
<a name="8437"></a>You can access the Parameter Tuning dialog box using these commands:</p>
<ul><pre><a name="8268"></a>get_para<code>m(gcs, 'TunableVars')
</code><a name="8269"></a><code>get_param(gcs, 'TunableVarsStorageClass')
</code><a name="8270"></a><code>get_param(gcs, 'TunableVarsTypeQualifier')
</code><a name="8271"></a><code>set_param(gcs, 'TunableVars', str)
</code><a name="8272"></a><code>set_param(gcs, 'TunableVarsStorageClass', str)
</code><a name="8273"></a><code>set_param(gcs, 'TunableVarsTypeQualifier', str)
</code></pre></ul>
<a name="8274"></a><font face=times>The valid storage class settings are:</font></p>
<ul><pre><a name="8275"></a>  Auto
<a name="8276"></a>  ExportedGlobal
<a name="8277"></a>  ImportedExtern
<a name="8278"></a>  ImportedExternPointer
</pre></ul>
<a name="8279"></a>For example,</p>
<ul><pre><a name="8280"></a>set_param(gcs, 'TunableVars', 'k1, k2, k3')
<a name="8281"></a>set_param(gcs, 'TunableVarsStorageClass', ...
<a name="8282"></a>  'Auto, ExportedGlobal, ImportedExtern')
<a name="8283"></a>set_param(gcs, 'TunableVarsTypeQualifier', ...
<a name="8284"></a>  ',,const')
</pre></ul>
<a name="8285"></a>Note that the parameter tuning dialog does not refresh automatically for a given <code>set_param</code>.</p>
<!-- H2 --><a name="8449"></a><p><font size=+2>Ada</font></p>
<!-- H3 --><a name="8453"></a><p><font size=+1>Storage Class</font></p>
<a name="8468"></a>Change the storage class of the selected variable. The options available in the <strong>RTW Tunable Parameters</strong> dialog box have C code names that map to Ada concepts. The options in the pull-down menu are as follows:</p>
<ul><a name="8454">
<li>Auto -- directs the Real-Time Workshop Ada Target to store the variable in a persistent data structure. 
</a><a name="8455">
<li>Exported Global -- declares the variable as a global variable that can be accessed from outside the generated code. 
</a><a name="8456">
<li>ImportedExtern -- the variable is assumed to be declared in the package specification <font face=times>entered </font>in the <strong>Storage Type Qualifier</strong> field. The generated code accesses this variable as <code><em>Your_Package</em></code><code>.</code><code><em>Your_variable</em></code>.
</a><a name="8457">
<li>ImportedExternPointer -- this is not permitted in Ada.
</a></ul><!-- H3 --><a name="8458"></a><p><font size=+1>Storage Type Qualifier</font></p>
<a name="8478"></a>This is only used when specifying the package specification to qualify fully the variable name for the <code>ImportedExtern</code> option. This field is ignored in all other cases.</p>
<!-- H3 --><a name="8524"></a><p><font size=+1>Data Type and Initial Value</font></p>
<a name="8525"></a>A parameter's data type and initial value are inferred from the actual MATLAB workspace variable. For example, assume <code>Kp</code> is used in a gain block where</p>
<ul><pre><a name="8526"></a>Kp = int16(5);
</pre></ul>
<a name="8527"></a><code>Kp</code> is a signed 16-bit integer with an initial value of 5.</p>
<!-- H3 --><a name="8509"></a><p><font size=+1>Implicit Casting Rules</font></p>
<a name="8516"></a>Since Ada does not support implicit upcasting of data types, all numerical operations in your model must be of homogeneous data types for Ada code generation.</p>

<hr><br>


<center>[ <a href="tuneprmlim.html">Next</a> |  
<a href="../../helpdesk.html" target="_top">Help Desk</a> ]</center>

<br>
<!-- Copyright (c) 1998 by The MathWorks, Inc. -->
<!-- Last updated: 11/17/98 10:28:02 -->
</body>
</html>


