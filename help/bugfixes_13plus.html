<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
      
      
      <HTML>
	<HEAD>
	  <TITLE>Release Note Report</TITLE>
	</HEAD>
	<BODY>
          
          <H1>Major Bug Fixes </H1>
	  This document describes major bug fixes for the following:<br>          
          <UL>
          <li><a href="#Fixed+Point+Blockset">Fixed-Point Blockset</a></li>
          <li><a href="#Real-Time+Workshop">Real-Time Workshop</a></li>
          <li><a href="#Real-Time+Workshop+Embedded+Coder">Real-Time Workshop Embedded Coder</a></li>
          <li><a href="#Simulink">Simulink</a></li>
          </UL>

            <A NAME="Fixed+Point+Workshop"></A><H2>Fixed-Point Blockset</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="<a href="#Abs+Block+Data+Type+Propagation+Corrected-FP">Abs Block Data Type Propagation Corrected</a><br>
<a href="#Switch+and+Multiport+Switch+Blocks+Data+Type+Propagation+Corrected-FP">Switch and Multiport Switch Blocks Data Type Propagation Corrected</a><br>

          <H3><A NAME="Abs+Block+Data+Type+Propagation+Corrected-FP"></A>Abs Block Data Type Propagation Corrected</H3>
          <blockquote>The Abs block is designed to have the same data type for its input and its 
output. The block accepts all non-Boolean Simulink built-in data types and 
all Fixed-Point Blockset data types with one restriction: Fixed-Point      
Blockset data types must have a bias of zero. These rules were not         
completely implemented in Release 13; that has been corrected.             
</blockquote>



          <H3><A NAME="Switch+and+Multiport+Switch+Blocks+Data+Type+Propagation+Corrected"></A>Switch and Multiport Switch Blocks Data Type Propagation Corrected</H3>
          <blockquote>The output data type of a Switch or Multiport Switch block
	  should be the same as the input signal data type with the greatest positive range
	  to ensure that the output port can accommodate any possible input value.
	  In previous releases, if the inputs of a Switch or Multiport Switch block
	  consisted of signals of both type single and double, Simulink set the data
	  type of the output port to type single. This was incorrect because signals of
	  type double have a much larger positive range than signals of type single. This 
	  release corrects this bug.
</blockquote>
                              
            <A NAME="Real-Time+Workshop"></A><H2>Real-Time Workshop</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Base+Addess+in+Global+Memory+Map+for+Invariant+Signals">Base Addess in Global Memory Map for Invariant Signals</a><br>
<a href="#Base+Addesses+in+Global+Memory+Map+for+DWork+Vectors">Base Addesses in Global Memory Map for DWork Vectors</a><br>
<a href="#Correct+Code+Generated+for+Nested+Reusable+Subsystems">Correct Code Generated for Nested Reusable Subsystems</a><br>
<a href="#Correct+Code+Generated+for+Stateflow+Library+Charts+in+Reusable+Subsystems">Correct Code Generated for Stateflow Library Charts in Reusable Subsystems</a><br>
<a href="#Correct+Code+Generated+for+Tunable+State+Spaces+with+Discontiguous+Inputs">Correct Code Generated for Tunable State Spaces with Discontiguous Inputs</a><br>
<a href="#Data+Store+Read+Block+Generates+Valid+Code+When+Expression+Folding+Is+Enabled">Data Store Read Block Generates Valid Code When Expression Folding Is Enabled</a><br>
<a href="#Dwork+Identifiers+with+Non-Auto+Storage+Class+Are+No+Longer+Mangled">Dwork Identifiers with Non-Auto Storage Class Are No Longer Mangled</a><br>
<a href="#Eliminated+Buffer+Reuse+Option+Errors+with+Multiple+Models+Open">Eliminated Buffer Reuse Option Errors with Multiple Models Open</a><br>
<a href="#Initialization+of+Previous+Zero+Crossing+in+Reused+Subsystem">Initialization of Previous Zero Crossing in Reused Subsystem</a><br>
<a href="#Inputs+and+Outputs+of+Noninlined+S-functions+with+Storage+Class+ImportedExternPointer">Inputs and Outputs of Noninlined S-functions with Storage Class ImportedExternPointer</a><br>
<a href="#Iterator+Blocks+Generate++Valid+Code+When+Expression+Folding+Is+Enabled">Iterator Blocks Generate  Valid Code When Expression Folding Is Enabled</a><br>
<a href="#Testpointed+Signals+in+Reused+Systems+Generate+Code">Testpointed Signals in Reused Systems Generate Code</a><br>
<br>
       
          
          <H3><A NAME="Base+Addess+in+Global+Memory+Map+for+Invariant+Signals"></A>Base Addess in Global Memory Map for Invariant Signals</H3>
          <blockquote>In Real-Time Workshop 5.0, an invalid base address was saved in the global 
memory map for models that generate a constant data structure 
(<code>rtC</code>). This has been fixed.</blockquote>
          
          
          <H3><A NAME="Base+Addesses+in+Global+Memory+Map+for+DWork+Vectors"></A>Base Addesses in Global Memory Map for DWork Vectors</H3>
          <blockquote>In Release 13, if a model contained reuseable atomic subsystems that were 
empty or without states, then an incorrect base address would be stored in 
the global memory map for the system's DWork vector. This has been fixed.</blockquote>
          
          
          <H3><A NAME="Correct+Code+Generated+for+Nested+Reusable+Subsystems"></A>Correct Code Generated for Nested Reusable Subsystems</H3>
          <blockquote>In Release 13, non-reusable code was generated for the following model:

<p>&nbsp;
<br><img src ="nonreusable_code.gif">

<p>If a signal directly crossed the system boundary of a reused, then an 
inlined, then another reused subsystem, the second reused subsystem ("C") 
would be called with arguments that are globaly accessed. This caused 
System "A" not to be reusable and resulted in invalid code. This has been 
fixed.</blockquote>
          
          
          <H3><A NAME="Correct+Code+Generated+for+Stateflow+Library+Charts+in+Reusable+Subsystems"></A>Correct Code Generated for Stateflow Library Charts in Reusable Subsystems</H3>
          <blockquote>Invalid code was generated for following model, where 
<code>signal_1</code> is a scalar signal directly connected to the 
Stateflow library chart.

<p>&nbsp;
<br><img src = "invalid_code.gif">

<p>The incorrect code generally resulted in incorrect answers because the 
wrong signal memory addresses were read by the chart. This could result in 
a segmentation fault should the address be out of the program space. This 
problem has been fixed.
</blockquote>
          
          
          <H3><A NAME="Correct+Code+Generated+for+Tunable+State+Spaces+with+Discontiguous+Inputs"></A>Correct Code Generated for Tunable State Spaces with Discontiguous Inputs</H3>
          <blockquote>Real-Time Workshop 5.0 was generating invalid code for continuous and 
discrete state space blocks with discontiguous inputs (e.g., when the 
signal entering the block was the output of a Mux or Bus Creator block). 
This caused generated code to produce different answers than those 
obtained from simulations. This has been remedied.</blockquote>
          
          
          <H3><A NAME="Data+Store+Read+Block+Generates+Valid+Code+When+Expression+Folding+Is+Enabled"></A>Data Store Read Block Generates Valid Code When Expression Folding Is Enabled</H3>
          <blockquote>In Real-Time Workshop 5.0, the Data Store Read block could generate 
invalid code when expression folding was enabled. This has been remedied, 
by disallowing expression folding for that block.</blockquote>
          
          
          <H3><A NAME="Dwork+Identifiers+with+Non-Auto+Storage+Class+Are+No+Longer+Mangled"></A>Dwork Identifiers with Non-Auto Storage Class Are No Longer Mangled</H3>
          <blockquote>In Real-Time Workshop 5.0, the RTW option <code>Include system hierarchy 
number in identifiers</code> caused Dwork with non-auto storage class to 
have its identifiers mangled (manipulated to be unique). This is no longer 
the case. The behavior of the option <code>Include data type acronym in 
identifier</code> has also been changed so as not to mangle the identifier 
of dwork with non-auto storage class.</blockquote>
          
          
          <H3><A NAME="Eliminated+Buffer+Reuse+Option+Errors+with+Multiple+Models+Open"></A>Eliminated Buffer Reuse Option Errors with Multiple Models Open</H3>
          <blockquote>With multiple models or libraries open, selecting or deselecting 
the <code>Buffer reuse</code> checkbox in the <b>General code generation 
options</b> of the Real-Time Workhop pane would sometimes cause an error 
message to be displayed, or sometimes set the option on the wrong model. 
This problem has been corrected.</blockquote>
          
          
          <H3><A NAME="Initialization+of+Previous+Zero+Crossing+in+Reused+Subsystem"></A>Initialization of Previous Zero Crossing in Reused Subsystem</H3>
          <blockquote>In Release 13, the generated code of a model with triggered subsystems 
located within a reused subsystem block was incorrect, due to an 
initialization problem. In the model below, Subsystems A1 and A2 are 
reused atomic subsystems with triggered subsystem inside. The generated 
code did not initialize the trigger signal <code>signal_1</code> of the 
Subsystem block A2, which resulted in incorrect behavior. This has been 
fixed.

<p>&nbsp;
<br><img src = "atomic_subsystems.gif">

</blockquote>
          
          
          <H3><A NAME="Inputs+and+Outputs+of+Noninlined+S-functions+with+Storage+Class+ImportedExternPointer"></A>Inputs and Outputs of Noninlined S-functions with Storage Class ImportedExternPointer</H3>
          <blockquote>In prior releases, inputs and outputs of noninlined S-functions could not
have storage class <code>ImportedExternPointer</code>. This restriction 
has been eliminated for scalar inputs and outputs of that storage class. 
However, for the time being, in order to use a wide input or output of 
storage class <code>ImportedExternPointer</code>, only non-inlined S-
functions may be used.
</blockquote>
          
          
          <H3><A NAME="Iterator+Blocks+Generate++Valid+Code+When+Expression+Folding+Is+Enabled"></A>Iterator Blocks Generate  Valid Code When Expression Folding Is Enabled</H3>
          <blockquote>In Real-Time Workshop 5.0 it was possible for invalid code to be generated 
for For and While Iterator blocks when expression folding was enabled.  
This has been remedied, by disallowing expression folding for such blocks.</blockquote>
          
          
          <H3><A NAME="Testpointed+Signals+in+Reused+Systems+Generate+Code"></A>Testpointed Signals in Reused Systems Generate Code</H3>
          <blockquote>Real-Time Worksop 5.0 incorrectly generated a reusable function when two 
systems were identical except that in one system a signal was declared as 
SimulinkGlobal (testpointed) but in the other the signal was auto. As a 
result, the generated code might not compile. This has been remedied by 
adding testpointed signals to the checksum, so that systems with such 
signals will not be reused.</blockquote>
          
          
            
            <A NAME="Real-Time+Workshop+Embedded+Coder"></A><H2>Real-Time Workshop Embedded Coder</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#%27Integer+code+only%27+Option+not+Detecting+Floating+Point+Data+Types+Correctly">'Integer code only' Option not Detecting Floating Point Data Types Correctly</a><br>
<a href="#Always+Initialize+States+from+Tunable+Parameters">Always Initialize States from Tunable Parameters</a><br>
<a href="#Delay+Block+Could+Generate+Invalid+Code+when+Expression+Folding+Enabled">Delay Block Could Generate Invalid Code when Expression Folding Enabled</a><br>
<a href="#When+%27Generate+reusable+code%27+Selected+%2C+Error+Raised+If+a+Stateflow+Chart+Feeds+a+Scalar+Root+Inport">When 'Generate reusable code' Selected , Error Raised If a Stateflow Chart Feeds a Scalar Root Inport</a><br>
<br>
       
          
          <H3><A NAME="%27Integer+code+only%27+Option+not+Detecting+Floating+Point+Data+Types+Correctly"></A>'Integer code only' Option not Detecting Floating Point Data Types Correctly</H3>
          <blockquote>In Real-Time Workshop Embedded Coder 3.0, the code generation 
option 'Integer code only' did not correctly detect floating point types 
in a model. This was a regression from previous releases and has been 
corrected. The option now raises an error if any non-integer data or 
expressions are encountered during code generation.</blockquote>
          
          
          <H3><A NAME="Always+Initialize+States+from+Tunable+Parameters"></A>Always Initialize States from Tunable Parameters</H3>
          <blockquote>Real-Time Workshop now unconditionally generates initialization code if 
the initial condition (IC) parameter of a block is tunable.
This fixes a problem where an optimization prevented generation of code to 
initialize the states of delays and discrete integrators, where the IC 
parameter is equal to zero. If such a parameter is tunable, this 
optimization would prevent the parameter from being tuned to a non-zero 
value.
</blockquote>
          
          
          <H3><A NAME="Delay+Block+Could+Generate+Invalid+Code+when+Expression+Folding+Enabled"></A>Delay Block Could Generate Invalid Code when Expression Folding Enabled</H3>
          <blockquote>With expression folding enabled, it was possible that the code
generated for the Delay block could be invalid. This was a regression 
from  release 12.1 and has been corrected.</blockquote>
          
          
          <H3><A NAME="When+%27Generate+reusable+code%27+Selected+%2C+Error+Raised+If+a+Stateflow+Chart+Feeds+a+Scalar+Root+Inport"></A>When 'Generate reusable code' Selected , Error Raised If a Stateflow Chart Feeds a Scalar Root Inport</H3>
          <blockquote>When the <code>Generate reusable code</code>  option is on, 
the generated code represents scalar root inports as arguments passed to 
the main model function(s) by value. This causes invalid code to be 
generated if a Stateflow chart is wired to a root inport. 

<p>To avoid this, Real-Time 
Workshop Embedded Coder now raises an error if a Stateflow chart is wired 
directly to a root model inport and 'Generate reusable code' is selected.
</blockquote>
          
          
            
            <A NAME="Simulink"></A><H2>Simulink</H2>
          Click on a problem area listed below to read how it has been fixed.<br><br>
<a href="#Abs+Block+Data+Type+Propagation+Corrected">Abs Block Data Type Propagation Corrected</a><br>
<a href="#Illegal+Rate+Transition+Error+Report">Illegal Rate Transition Error Report</a><br>
<a href="#Rate+Transistion+Errors+on+Input+Ports+of+Enabled+and+Triggered+Subsystems+Now+Properly+Identified">Rate Transistion Errors on Input Ports of Enabled and Triggered Subsystems Now Properly Identified</a><br>
<a href="#Signal+Builder+Block+Is+Now+Compatible+with+Libraries">Signal Builder Block Is Now Compatible with Libraries</a><br>

<a href="#Switch+and+Multiport+Switch+Blocks+Data+Type+Propagation+Corrected">Switch and Multiport Switch Blocks Data Type Propagation Corrected</a><br>
<a href="#Updating+a+Model+During+Simulation+Resets+Enable+Port+Parameters+to+Default">Updating a Model During Simulation Resets Enable Port Parameters to Default</a><br>
<br>
       
          
          <H3><A NAME="Abs+Block+Data+Type+Propagation+Corrected"></A>Abs Block Data Type Propagation Corrected</H3>
          <blockquote>The Abs block is designed to have the same data type for its input and its 
output. The block accepts all non-Boolean Simulink built-in data types and 
all Fixed-Point Blockset data types with one restriction: Fixed-Point      
Blockset data types must have a bias of zero. These rules were not         
completely implemented in Release 13; that has been corrected.             
</blockquote>
          
          
<H3><A NAME="Illegal+Rate+Transition+Error+Report"></A>Illegal Rate Transition Error Report</H3>

<blockquote>In the previous release, when attempting to report an illegal rate
transition error (for example, as  a result of a model update), Simulink could crash or
misidentify the port involved in the illegal rate transition. This behavior, which occured
in multirate models with rate transition errors between blocks with multiple input and/or
output ports, has been fixed.</blockquote>
          
          
          <H3><A NAME="Rate+Transistion+Errors+on+Input+Ports+of+Enabled+and+Triggered+Subsystems+Now+Properly+Identified"></A>Rate Transistion Errors on Input Ports of Enabled and Triggered Subsystems Now Properly Identified</H3>
          <blockquote>The previous release of Simulink contained a bug that allowed the input of 
a subsystem that was both enabled and triggered to be driven by a block 
with a rate different from the trigger rate. This created an illegal rate 
transition in multi-tasking mode. Now Simulink generates an appropriate rate transition 
error message in such situations.</blockquote>
          
          
<H3><A NAME="Signal+Builder+Block+Is+Now+Compatible+with+Libraries"></A>Signal Builder Block Is Now Compatible with Libraries</H3>
<blockquote>In the previous release, attempting to save a model that 
contained linked Signal Builder blocks caused an error.  The new version of the block is fully compatible with libraries.</blockquote>
          
          
<H3><A NAME="Switch+and+Multiport+Switch+Blocks+Data+Type+Propagation+Corrected"></A>Switch and Multiport Switch Blocks Data Type Propagation Corrected</H3>
<blockquote>The output data type of a Switch or Multiport Switch block
should be the same as the input signal data type with the greatest positive range
to ensure that the output port can accommodate any possible input value.
In previous releases, if the inputs of a Switch or Multiport Switch block
consisted of signals of both type single and double, Simulink set the data
type of the output port to type single. This was incorrect because signals of
type double have a much larger positive range than signals of type single. This 
release corrects this bug.</blockquote>

          
          <H3><A NAME="Updating+a+Model+During+Simulation+Resets+Enable+Port+Parameters+to+Default"></A>Updating a Model During Simulation Resets Enable Port Parameter to Default</H3>
          <blockquote>In previous releases, updating a diagram containing
an Enable Port block with its <strong>States when enabling parameter</strong> set to <code>reset</code> caused Simulink to reset the parameter to its default value, <code>held</code>. This caused the model to produce incorrect answers. This problem has been fixed.</blockquote>
          
	</BODY>
      </html>
