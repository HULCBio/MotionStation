<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:w="urn:schemas-microsoft-com:office:word"
 xmlns="http://www.w3.org/TR/REC-html40">
<head>
                         
  <meta http-equiv="Content-Type"
 content="text/html; charset=windows-1252">
                         
  <meta name="ProgId" content="Word.Document">
                         
  <meta name="Generator" content="Microsoft Word 9">
                         
  <meta name="Originator" content="Microsoft Word 9">
                         
  <link rel="File-List" href="./_c6711dskANC_doc_files/filelist.xml">
  <title>C6000 Video Surveillance and Motion Detection Demo</title>
                          <!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1</o:TotalTime>
  <o:Created>2002-11-25T21:25:00Z</o:Created>
  <o:LastSaved>2002-11-25T21:25:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Company>The MathWorks, Inc.</o:Company>
  <o:Lines>1</o:Lines>
  <o:Paragraphs>1</o:Paragraphs>
  <o:Version>9.4402</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:TargetScreenSize>1600x1200</o:TargetScreenSize>
 </o:OfficeDocumentSettings>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>90</w:Zoom>
 </w:WordDocument>
</xml><![endif]--> 
                    
  <style>
<!--
 /* Font Definitions */
@font-face
	{font-family:Bookman;
	panose-1:0 0 0 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
@page Section1
	{size:8.5in 11.0in;
	margin:.4in .2in .2in .2in;
	mso-header-margin:0in;
	mso-footer-margin:0in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:26107262;
	mso-list-type:hybrid;
	mso-list-template-ids:-563709674 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1
	{mso-list-id:1820884268;
	mso-list-type:hybrid;
	mso-list-template-ids:-1050513594 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
  </style>
</head>
  <body lang="EN-US" link="blue" vlink="purple" style="">
  <font face="Helvetica, Arial, sans-serif"><big><font color="#990000"><big><big><b>C6000
 Video Surveillance and Motion-Detection Demo</b></big></big></font></big><br>
  <br>
   <br>
  This Simulink model demonstrates a video surveillance application on your
 Texas Instruments DSP Starter Kit using Embedded Target for Texas Instruments
 TMS320C6000 DSP Platform.   A motion-detection algorithm is implemented
in  Simulink and deployed to the 'C6416 fixed-point signal processor.  <br>
  <br>
  Note:  This demo uses High-Speed RTDX.  To run this demo, you must have an XDS-560 emulator connecting your
 host computer to your C6416 DSK.  Be sure to load the correct GEL file, dsk6416.gel, to set up the memory map for this board.<br>
  <br>
  <br>
  <font color="#990000"><big><b>Opening the demo model</b></big></font><br>
  <br>
  Click or type   <b><a href="matlab:c6416dsksurveil_hsrtdx">c6416dsksurveil_hsrtdx</a></b></font><font
 face="Helvetica, Arial, sans-serif"><b> </b><br>
  <br>
  </font><font face="Helvetica, Arial, sans-serif"><img
 src="surveilModel.jpg" alt="[screen capture of demo model]" width="615"
 height="301">
   </font><br>
  <font face="Helvetica, Arial, sans-serif"><big><b><font
 color="#990000"><br>
 </font></b></big></font><font face="Helvetica, Arial, sans-serif"><big><b><font
 color="#990000">How it works</font></b></big><br>
  <br>
 Double-click on the subsystem "Video Frame Capture Motion Threshold" to
view its contents.  The algorithm is implemented using  
blocks from Simulink and Signal
Processing Blockset and is converted to C by Real-Time Workshop.  </font><font
 face="Helvetica, Arial, sans-serif">While the generated code is running on
the 'C6416 DSP target, MATLAB simultaneously writes video frames to the target
via Real-Time Date Exchange (RTDX).  The target accepts the frames upon timer
interrupts scheduled at 15 times per second.  The algorithm computes the
sum of the absolute value of differences (SAD) between successive video frames,
returning a useful estimate of motion.</font><font
 face="Helvetica, Arial, sans-serif">  When the motion estimate value exceeds 
a threshold, the 'C6416 increments a counter and sends the corresponding frame
back to the host.  </font><br>
 <br>
 <img src="surveilSystem.jpg" alt="[ system diagram ]" width="550"
 height="380">
 <br>
 <font face="Helvetica, Arial, sans-serif"><big><b><font color="#990000"><br>
  Starting the demo</font></b></big><br>
  <br>
  Double-click  "Build / Reload &amp; Run" button to initiate the demo script.
  Real-Time Workshop, together with Embedded Target for TI C6000 DSP, will
 generate code for the model</font><font
 face="Helvetica, Arial, sans-serif">.</font><font
 face="Helvetica, Arial, sans-serif">*  When the code-generation process
is complete, the Embedded Target will automatically create a project in Code
 Composer Studio, compile it, link it, download it, and execute it on the
board.  The demo script will then initiate the transfer of video frames via
RTDX and display the input and output frames on your screen.  <br>
  <br>
   * If you have already generated and compiled the code, the button should
automatically skip code generation and simply reload the program.  However,
if you have changed the model, you may be asked whether you wish to generate
 code again or simply to reuse the project that has already been created.
  <br>
  <br>
  When the demo begins execution on the 'C6416, you should see the RTDX Video
 Monitor appear on your screen.  <br>
  <br>
  <img src="rtdxVideo.jpg" alt="[ rtdx video display figure ]"
 width="566" height="464">
  <br>
  <br>
 On the left side, MATLAB plots the raw image data that is being sent to
the 'C6416 target at 15 frames per second.  On the right side, MATLAB plots
the captured frames received from the 'C6416; these are the frames in which
the algorithm detected motion.  At the top, you can see a running plot (moving 
from right to left, with the most recent data at the right) of the motion 
estimate value together with the threshold value.<br>
 <br>
  <br>
  <big><font color="#990000"><b>Controlling the algorithm</b></font></big><br>
  <br>
  You can change the behavior of the application while it's running on the
 C6416 DSK.   <br>
  <br>
  To change the type of display for the video output, you can move User  DIP
Switch 0.   The User DIP Switches on the C6416 DSK are located in package
 "SW1" on the printed circuit board and are numbered 0 to 3 (1 to 4 on the 
side of the package itself).   Press a switch down to turn it on.<br>
  </font>  
<ul>
    <li><font face="Helvetica, Arial, sans-serif"><b>Off:  </b>The captured
frames  are displayed in raw form, frozen until the next motion event.</font></li>
    <li><font face="Helvetica, Arial, sans-serif"><b>On:  </b>The absolute
differences  from frame to frame (AD) are displayed.  </font><br>
    </li>
   
</ul>
  <font face="Helvetica, Arial, sans-serif"><br>
 Also, you can adjust the motion threshold by clicking directly on the moving
 plot on your screen.  Clicking on the plot causes a message to be sent to 
the target via the RTDX channel "motionThreshold".  The target will immediately 
begin using the new threshold value corresponding to the vertical position 
of your mouse click.  A higher threshold value corresponds to a decreased 
frequency of motion-detection events.  <br>
  </font><font face="Helvetica, Arial, sans-serif"><br>
 You can also see motion events on User LED 0, located next to the DIP Switch 
package.  Whenever motion is detected, the LED turns on briefly.<br>
 <br>
  <br>
  </font><font face="Helvetica, Arial, sans-serif"><big><font
 color="#990000"><b>Troubleshooting</b></font></big></font><br>
  <font face="Helvetica, Arial, sans-serif"><br>
  If you experience problems running the demo:</font>  
<ul>
    <li><font face="Helvetica, Arial, sans-serif">Reset the 'C6416.</font></li>
    <li><font face="Helvetica, Arial, sans-serif">Reset the XDS560 emulator
 .  (This requires closing Code Composer Studio and clearing the MATLAB workspace.)</font></li>
    <li><font face="Helvetica, Arial, sans-serif">You cannot run this particular 
demo's generated code on its own, because the target will not do anything
without RTDX input.  You must use the buttons in the model to start and stop
the demo, so that the accompanying MATLAB script will be invoked.  </font></li>
  <li><font face="Helvetica, Arial, sans-serif">Be sure to use the "Halt
 demo" button to stop demo execution.  This button includes the necessary
statements to close and disable RTDX channels (via MATLAB Link for Code Composer
Studio). </font></li>
   
</ul>
  <font face="Helvetica, Arial, sans-serif"><br>
  <br>
  Copyright 2002-2003 The MathWorks, Inc.<br>
  <br>
 <font color="#c0c0c0"> $Revision: 1.1.6.2 $</font><br>
  <br>
  </font> <br>
 <br>
</body>
</html>
