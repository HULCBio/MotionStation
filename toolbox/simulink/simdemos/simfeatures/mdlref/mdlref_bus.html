<BR><!-- $Revision: 1.1.6.5 $ -->
<TABLE cellSpacing=0 width="100%" bgColor=#ffe4b0 border=0>
<TBODY>
<TR>
<TD><B>mdlref_bus.mdl</B></TD>
<TD align=right><A href="matlab:mdlref_busscript('open')"><B>Open this 
Model</B></A></TD></TR></TBODY></TABLE>
<P style="FONT-WEIGHT: bold; FONT-SIZE: x-large; COLOR: #990000">Model Reference 
and Bus Signal Demonstration</P>
<H3><A name=DemoDescription></A><U>Introduction</U></H3>
<P>This demonstration explains how to propagate bus signals into referenced 
models. (For a quick introduction to Model Reference, run the <A 
href="matlab:mdlref_basicscript;">Basic Model Reference Demo</A> and for a 
quick introduction to bus signals, run the <A href="matlab:busdemoscript;">Bus 
Signal Demo</A>.)</P>
<H3><A name=CodegenNote></A><U>Demo Requirements</U></H3>
<P>
<UL>
<LI><p>During this demonstration, Simulink and Real-Time Workshop generate code in a Simulink 
project directory created in the current working directory. If you do not want 
to (or if you cannot) generate files in this directory, you should change the 
working directory to a suitable directory.</P>
<LI><p>Real-Time Workshop is required to generate Model Reference RTW target to be deployed in standalone applications.</p>
</UL>
<P>If you plan to alter the demonstration models:</P>
<OL>
<LI>
<P>Preserve the demo in its original state by copying the following files in 
your MATLAB installation directory without changing their names to a different 
directory:</P>
<P>
<UL>
<LI>toolbox/simulink/simdemos/simfeatures/mdlref/mdlref_bus.mdl 
<LI>toolbox/simulink/simdemos/simfeatures/mdlref/mdlref_counter_bus.mdl 
<LI>toolbox/simulink/simdemos/simfeatures/mdlref/mdlref_counter_bus.mat. </LI></UL>
<P></P>
<LI>
<P>Change your current working directory to the directory to which you copied 
the files.</P>
<LI>
<P>Continue with the demonstration.</P></LI></OL>

<P>If you haven't already opened it, open the demo model <A 
href="matlab:mdlref_busscript('open');">mdlref_bus</A>. 
<H3><U>Description of Bus Signal Setup for the Demonstration</U></H3>
<P>This model contains a Model block, <A 
href="matlab:mdlref_busscript('hilite','mdlref_bus','mdlref_bus/CounterA');">CounterA</A>, 
that references <A 
href="matlab:mdlref_busscript('open','mdlref_counter_bus');">mdlref_counter_bus</A>, 
a model of a simple counter. A bus signal called COUNTERBUS feeds the input 
signal and the saturation limits of the counter into the model. The COUNTERBUS 
contains two more bus signals, the LIMITBUS and the SIGNALBUS. LIMITBUS contains 
the upper and lower limit values of the counter and SIGNALBUS contains the 
signal used in counting. The following shows the structure of COUNTERBUS: 
<UL>
<LI><A 
href="matlab:mdlref_busscript('hilite','mdlref_bus','mdlref_bus/COUNTERBUSCreator');">COUNTERBUS</A> 
(<A 
href="matlab:open_system('mdlref_bus'); open_system('mdlref_bus/COUNTERBUSCreator');">bus 
signal</A>) 
<UL>
<LI><A 
href="matlab:mdlref_busscript('hilite','mdlref_bus','mdlref_bus/SIGNALBUSCreator');">SIGNALBUS</A> 
(<A 
href="matlab:open_system('mdlref_bus');open_system('mdlref_bus/SIGNALBUSCreator');">bus 
signal</A>) 
<UL>
<LI>input</LI></UL>
<LI><A 
href="matlab:mdlref_busscript('hilite','mdlref_bus','mdlref_bus/LIMITBUSCreator');">LIMITBUS</A> 
(<A 
href="matlab:open_system('mdlref_bus');open_system('mdlref_bus/LIMITBUSCreator');">bus 
signal</A>) 
<UL>
<LI>upper_saturation_limit 
<LI>lower_saturation_limit </LI></UL></LI></UL></LI></UL>
<P></P>
<P>The demo also includes a MAT-file named <CODE>mdlref_counter_bus.mat</CODE> 
that creates type objects that define the elements of COUNTERBUS, SIGNALBUS, 
and LIMITBUS. The <CODE>mdlref_bus</CODE> model's preload function loads 
this MAT-file when the model is loaded, causing the bus type objects to be 
created in the MATLAB workspace.</P>
<P><STRONG>Note:</STRONG> You can view these objects by selecting the MATLAB 
workspace in the <a href="matlab:mdlref_busscript('basewkspc')">Model Explorer</a>. You can also view the bus structures in the <A 
href="matlab:buseditor">Bus Types Editor</A>.</P>
<P>The model uses these bus type objects to specify the outputs of the following 
Bus Creator Blocks:</P> 
<UL>
<LI>
<P><A 
href="matlab:open_system('mdlref_bus'); open_system('mdlref_bus/COUNTERBUSCreator');">COUNTERBUSCreator</A> 
</P>
<LI>
<P><A 
href="matlab:open_system('mdlref_bus'); open_system('mdlref_bus/SIGNALBUSCreator');">SIGNALBUSCreator</A>, 
</P>
<LI>
<P><A 
href="matlab:open_system('mdlref_bus'); open_system('mdlref_bus/LIMITBUSCreator');">LIMITBUSCreator</A>. 
</P></LI></UL>
<P>The <A href="matlab:mdlref_busscript('hilite','mdlref_counter_bus','mdlref_counter_bus/ input');">Inport</A> 
of the referenced model <CODE>mdlref_counter_bus </CODE>specifies the COUNTERBUS 
bus type object in its <B>Bus object for validating input bus</B> field and enables 
the <B>Specify Properties via bus object</b> option in the <B>Signal Specification </B> page of the <A 
href="matlab:open_system('mdlref_counter_bus');open_system('mdlref_counter_bus/ input');">parameter 
dialog</A>, thereby configuring the port to accept buses of the COUNTERBUS type. 
<P>Now you can <A 
href="matlab:mdlref_busscript('sim','mdlref_bus');">simulate</A> 
<CODE>mdlref_bus</CODE> to see the output. 
<H3><U>Code Generation For Standalone Applications(Requires Real-Time Workshop)</U></H3><A 
href="matlab:mdlref_busscript('build','mdlref_bus','StandaloneRTWTarget');">Create 
the executable and inspect the code</A> for <CODE>mdlref_bus</CODE>. 
<H3><U>Exit<U></H3><A href="matlab:mdlref_busscript('close');">Close 
mdlref_counter_bus and mdlref_bus</A>. </U></U>